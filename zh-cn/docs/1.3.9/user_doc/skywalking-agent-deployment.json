{
  "filename": "skywalking-agent-deployment.md",
  "__html": "<h1>SkyWalking Agent</h1>\n<p>dolphinscheduler-skywalking 模块为 Dolphinscheduler 项目提供了 <a href=\"https://skywalking.apache.org/\">Skywalking</a> 监控代理。</p>\n<p>本文档介绍了如何通过此模块接入 SkyWalking 8.4+ (推荐使用8.5.0)。</p>\n<h1>安装</h1>\n<p>以下配置用于启用 Skywalking agent。</p>\n<h3>通过配置环境变量 (使用 Docker Compose 部署时)</h3>\n<p>修改 <code>docker/docker-swarm/config.env.sh</code> 文件中的 SKYWALKING 环境变量:</p>\n<pre><code>SKYWALKING_ENABLE=true\nSW_AGENT_COLLECTOR_BACKEND_SERVICES=127.0.0.1:11800\nSW_GRPC_LOG_SERVER_HOST=127.0.0.1\nSW_GRPC_LOG_SERVER_PORT=11800\n</code></pre>\n<p>并且运行</p>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> docker-compose up -d</span>\n</code></pre>\n<h3>通过配置环境变量 (使用 Docker 部署时)</h3>\n<pre><code class=\"language-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> docker run -d --name dolphinscheduler \\\n-e DATABASE_HOST=<span class=\"hljs-string\">&quot;192.168.x.x&quot;</span> -e DATABASE_PORT=<span class=\"hljs-string\">&quot;5432&quot;</span> -e DATABASE_DATABASE=<span class=\"hljs-string\">&quot;dolphinscheduler&quot;</span> \\\n-e DATABASE_USERNAME=<span class=\"hljs-string\">&quot;test&quot;</span> -e DATABASE_PASSWORD=<span class=\"hljs-string\">&quot;test&quot;</span> \\\n-e ZOOKEEPER_QUORUM=<span class=\"hljs-string\">&quot;192.168.x.x:2181&quot;</span> \\\n-e SKYWALKING_ENABLE=<span class=\"hljs-string\">&quot;true&quot;</span> \\\n-e SW_AGENT_COLLECTOR_BACKEND_SERVICES=<span class=\"hljs-string\">&quot;your.skywalking-oap-server.com:11800&quot;</span> \\\n-e SW_GRPC_LOG_SERVER_HOST=<span class=\"hljs-string\">&quot;your.skywalking-log-reporter.com&quot;</span> \\\n-e SW_GRPC_LOG_SERVER_PORT=<span class=\"hljs-string\">&quot;11800&quot;</span> \\\n-p 12345:12345 \\\napache/dolphinscheduler:1.3.9 all</span>\n</code></pre>\n<h3>通过配置 install_config.conf (使用 DolphinScheduler <a href=\"http://install.sh\">install.sh</a> 部署时)</h3>\n<p>添加以下配置到 <code>${workDir}/conf/config/install_config.conf</code>.</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\">\n# skywalking config</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">note:</span> enable skywalking tracking plugin</span>\n<span class=\"hljs-attr\">enableSkywalking</span>=<span class=\"hljs-string\">&quot;true&quot;</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">note:</span> configure skywalking backend service address</span>\n<span class=\"hljs-attr\">skywalkingServers</span>=<span class=\"hljs-string\">&quot;your.skywalking-oap-server.com:11800&quot;</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">note:</span> configure skywalking log reporter host</span>\n<span class=\"hljs-attr\">skywalkingLogReporterHost</span>=<span class=\"hljs-string\">&quot;your.skywalking-log-reporter.com&quot;</span>\n<span class=\"hljs-comment\"># <span class=\"hljs-doctag\">note:</span> configure skywalking log reporter port</span>\n<span class=\"hljs-attr\">skywalkingLogReporterPort</span>=<span class=\"hljs-string\">&quot;11800&quot;</span>\n\n</code></pre>\n<h1>使用</h1>\n<h3>导入图表</h3>\n<h4>导入图表到 Skywalking server</h4>\n<p>复制 <code>${dolphinscheduler.home}/ext/skywalking-agent/dashboard/dolphinscheduler.yml</code> 文件到 <code>${skywalking-oap-server.home}/config/ui-initialized-templates/</code> 目录下，并重启 Skywalking oap-server。</p>\n<h4>查看 dolphinscheduler 图表</h4>\n<p>如果之前已经使用浏览器打开过 Skywalking，则需要清空浏览器缓存。</p>\n<p><img src=\"/img/skywalking/import-dashboard-1.jpg\" alt=\"img1\"></p>\n",
  "link": "/dist/zh-cn/docs/1.3.9/user_doc/skywalking-agent-deployment.html",
  "meta": {}
}