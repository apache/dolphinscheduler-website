{
  "filename": "datasync.md",
  "__html": "<h1>DataSync 节点</h1>\n<h2>综述</h2>\n<p><a href=\"https://console.aws.amazon.com/datasync/\">AWS DataSync</a> 是一种在线数据传输服务，可简化、自动化和加速本地存储系统和 AWS Storage 服务之间，以及不同 AWS Storage 服务之间的数据移动。</p>\n<p>DataSync 支持的组件:</p>\n<ul>\n<li>Network File System (NFS) file servers</li>\n<li>Server Message Block (SMB) file servers</li>\n<li>Hadoop Distributed File System (HDFS)</li>\n<li>Object storage systems</li>\n<li>Amazon Simple Storage Service (Amazon S3) buckets</li>\n<li>Amazon EFS file systems</li>\n<li>Amazon FSx for Windows File Server file systems</li>\n<li>Amazon FSx for Lustre file systems</li>\n<li>Amazon FSx for OpenZFS file systems</li>\n<li>Amazon FSx for NetApp ONTAP file systems</li>\n<li>AWS Snowcone devices</li>\n</ul>\n<p>DolphinScheduler DataSync 组件的功能:</p>\n<ul>\n<li>创建 AWS DataSync 任务并启动，持续获取状态，直至任务执行完成。</li>\n</ul>\n<h2>创建任务</h2>\n<ul>\n<li>点击项目管理-项目名称-工作流定义，点击“创建工作流”按钮，进入 DAG 编辑页面；</li>\n<li>拖动工具栏的 <img src=\"/img/tasks/icons/datasync.png\" width=\"15\"/> 任务节点到画板中。</li>\n</ul>\n<h2>任务样例</h2>\n<p>首先介绍一些DS通用参数</p>\n<ul>\n<li><strong>任务名称</strong> ：任务的名称，同一个工作流定义中的节点名称不能重复。</li>\n<li><strong>运行标志</strong> ：标识这个节点是否需要调度执行，如果不需要执行，可以打开禁止执行开关。</li>\n<li><strong>描述</strong> ：当前节点的功能描述。</li>\n<li><strong>任务优先级</strong> ：worker线程数不足时，根据优先级从高到低依次执行任务，优先级一样时根据先到先得原则执行。</li>\n<li><strong>Worker 分组</strong> ：设置分组后，任务会被分配给worker组的机器机执行。若选择Default，则会随机选择一个worker执行。</li>\n<li><strong>任务组名称</strong> ：任务资源组，未配置则不生效。</li>\n<li><strong>组内优先级</strong> ：一个任务组内此任务的优先级。</li>\n<li><strong>环境名称</strong> ：配置任务执行的环境。</li>\n<li><strong>失败重试次数</strong> ：任务失败重新提交的次数，可以在下拉菜单中选择或者手动填充。</li>\n<li><strong>失败重试间隔</strong> ：任务失败重新提交任务的时间间隔，可以在下拉菜单中选择或者手动填充。</li>\n<li><strong>CPU 配额</strong> ：为执行的任务分配指定的CPU时间配额，单位百分比，默认-1代表不限制，例如1个核心的CPU满载是100%，16个核心的是1600%。 <a href=\"../../architecture/configuration.md\">task.resource.limit.state</a></li>\n<li><strong>最大内存</strong> ：为执行的任务分配指定的内存大小，超过会触发OOM被Kill同时不会进行自动重试，单位MB，默认-1代表不限制。这个功能由 <a href=\"../../architecture/configuration.md\">task.resource.limit.state</a> 控制。</li>\n<li><strong>超时告警</strong> ：勾选超时告警、超时失败，当任务超过&quot;超时时长&quot;后，会发送告警邮件并且任务执行失败.这个功能由 <a href=\"../../architecture/configuration.md\">task.resource.limit.state</a> 控制。</li>\n<li><strong>资源</strong> ：任务执行时所需资源文件。</li>\n<li><strong>前置任务</strong> ：设置当前任务的前置（上游）任务。</li>\n<li><strong>延时执行时间</strong> ：任务延迟执行的时间，以分为单位。</li>\n</ul>\n<p>以上参数如无特殊需求，可以默认即可</p>\n<ul>\n<li><strong>name</strong>: 任务名称</li>\n<li><strong>destinationLocationArn</strong>: 目标 AWS 存储资源位置的 Amazon Resource Name (ARN) ，可见 <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html#DataSync-CreateTask-request-DestinationLocationArn\">AWS API</a></li>\n<li><strong>sourceLocationArn</strong>: 源 AWS 存储资源位置的 Amazon Resource Name (ARN) ，可见 <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html#DataSync-CreateTask-request-SourceLocationArn\">AWS API</a></li>\n<li><strong>cloudWatchLogGroupArn</strong>: 用来监控任务的Amazon CloudWatch任务组的 Amazon Resource Name (ARN) ，可见 <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html#DataSync-CreateTask-request-CloudWatchLogGroupArn\">AWS API</a></li>\n</ul>\n<p>或</p>\n<ul>\n<li><strong>json</strong>: 创建 datasync 任务的JSON结构任务参数，可以支持options等参数，可见 [AWS CreateTask API] 的 Request Syntax (<a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html\">https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html</a>)</li>\n</ul>\n<p>组件图示如下：</p>\n<p><img src=\"/img/tasks/demo/datasync_task01.png\" alt=\"datasync\"></p>\n<h2>环境配置</h2>\n<p>需要进行AWS的一些配置，修改<code>common.properties</code>中的<code>xxxxx</code>为你的配置信息</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-comment\"># Defines AWS access key and is required</span>\n<span class=\"hljs-string\">resource.aws.access.key.id=&lt;YOUR</span> <span class=\"hljs-string\">AWS</span> <span class=\"hljs-string\">ACCESS</span> <span class=\"hljs-string\">KEY&gt;</span>\n<span class=\"hljs-comment\"># Defines AWS secret access key and is required</span>\n<span class=\"hljs-string\">resource.aws.secret.access.key=&lt;YOUR</span> <span class=\"hljs-string\">AWS</span> <span class=\"hljs-string\">SECRET</span> <span class=\"hljs-string\">KEY&gt;</span>\n<span class=\"hljs-comment\"># Defines  AWS Region to use and is required</span>\n<span class=\"hljs-string\">resource.aws.region=&lt;AWS</span> <span class=\"hljs-string\">REGION&gt;</span>\n</code></pre>\n",
  "link": "/dist/zh-cn/docs/dev/user_doc/guide/task/datasync.html",
  "meta": {}
}