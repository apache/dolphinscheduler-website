<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="docker">
  <meta name="description" content="docker">
  <title>docker</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.eeae4ed.css">
</head>
<body>
  <div id="root"><div class="md2html docs-page" data-reactroot=""><header class="header-container header-container-dark"><div class="banner-tips"><div>ğŸ¤” æœ‰å…³äº Apache DolphinScheduler çš„ç–‘é—®ï¼ŒåŠ å…¥ Slack é¢‘é“æ¥è®¨è®ºä»–ä»¬ <a class="link-tips" href="https://s.apache.org/dolphinscheduler-slack">join #dolphinscheduler channel</a>! ğŸŒŸ</div></div><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">En</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-item-selected" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æœ€æ–°ç‰ˆæœ¬latest(3.0.0-beta-2)</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/1.3.9/user_doc/quick-start.html" target="_self">1.3.9</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/release/history-versions.html" target="_self">å†å²ç‰ˆæœ¬</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>å…³äºApache DolphinScheduler</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/About_DolphinScheduler/About_DolphinScheduler.html" target="_self">ç®€ä»‹</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/hardware.html" target="_self">å»ºè®®é…ç½®</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/designplus.html" target="_self">åç§°è§£é‡Š</a></li></ul></li><li class="menu-item menu-item-level-1"><span>å¿«é€Ÿä¸Šæ‰‹</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/quick-start.html" target="_self">å¿«é€Ÿä¸Šæ‰‹</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/docker.html" target="_self">Dockeréƒ¨ç½²(Docker)</a></li></ul></li><li class="menu-item menu-item-level-1"><span>éƒ¨ç½²æŒ‡å—</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/standalone.html" target="_self">å•æœºéƒ¨ç½²(Standalone)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/pseudo-cluster.html" target="_self">ä¼ªé›†ç¾¤éƒ¨ç½²(Pseudo-Cluster)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/cluster.html" target="_self">é›†ç¾¤éƒ¨ç½²(Cluster)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/installation/kubernetes.html" target="_self">Kuberneteséƒ¨ç½²(Kubernetes)</a></li></ul></li><li class="menu-item menu-item-level-1"><span>åŠŸèƒ½ä»‹ç»</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/homepage.html" target="_self">æŒ‡æ ‡æ€»è§ˆ</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>é¡¹ç›®ç®¡ç†<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/project/project-list.html" target="_self">é¡¹ç›®åˆ—è¡¨</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/project/workflow-definition.html" target="_self">å·¥ä½œæµå®šä¹‰</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/project/workflow-instance.html" target="_self">å·¥ä½œæµå®ä¾‹</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/project/task-instance.html" target="_self">ä»»åŠ¡å®ä¾‹</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>ä»»åŠ¡ç±»å‹<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/shell.html" target="_self">Shell</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/sub-process.html" target="_self">SubProcess</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/dependent.html" target="_self">Dependent</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/stored-procedure.html" target="_self">Stored Procedure</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/sql.html" target="_self">SQL</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/spark.html" target="_self">Spark</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/map-reduce.html" target="_self">MapReduce</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/python.html" target="_self">Python</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/flink.html" target="_self">Flink</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/http.html" target="_self">HTTP</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/datax.html" target="_self">DataX</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/pigeon.html" target="_self">Pigeon</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/conditions.html" target="_self">Conditions</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/task/switch.html" target="_self">Switch</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>å‚æ•°<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/parameter/built-in.html" target="_self">å†…ç½®å‚æ•°</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/parameter/global.html" target="_self">å…¨å±€å‚æ•°</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/parameter/local.html" target="_self">æœ¬åœ°å‚æ•°</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/parameter/context.html" target="_self">å‚æ•°ä¼ é€’</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/parameter/priority.html" target="_self">å‚æ•°ä¼˜å…ˆçº§</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>æ•°æ®æºä¸­å¿ƒ<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/datasource/introduction.html" target="_self">ç®€ä»‹</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/datasource/mysql.html" target="_self">MySQL</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/datasource/postgresql.html" target="_self">PostgreSQL</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/datasource/hive.html" target="_self">HIVE</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/datasource/spark.html" target="_self">Spark</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>å‘Šè­¦<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/alert/alert_plugin_user_guide.html" target="_self">å‘Šè­¦ç»„ä»¶å‘å¯¼ </a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/2.0.1/user_doc/guide/alert/enterprise-wechat.html" target="_self">ä¼ä¸šå¾®ä¿¡</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/resource.html" target="_self">èµ„æºä¸­å¿ƒ</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/monitor.html" target="_self">ç›‘æ§ä¸­å¿ƒ</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/security.html" target="_self">å®‰å…¨ä¸­å¿ƒ</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/open-api.html" target="_self">APIè°ƒç”¨</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/flink-call.html" target="_self">Flinkè°ƒç”¨</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/upgrade.html" target="_self">å‡çº§</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/expansion-reduction.html" target="_self">æ‰©/ç¼©å®¹</a></li></ul></li><li class="menu-item menu-item-level-1"><span>é«˜çº§æŒ‡å—</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/design.html" target="_self">æ¶æ„è®¾è®¡</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/metadata.html" target="_self">å…ƒæ•°æ®æ–‡æ¡£</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/configuration.html" target="_self">é…ç½®æ–‡ä»¶</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/task-structure.html" target="_self">ä»»åŠ¡ç»“æ„</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/architecture/load-balance.html" target="_self">è´Ÿè½½å‡è¡¡</a></li></ul></li><li class="menu-item menu-item-level-1"><span>å¯è§‚æµ‹æ€§</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/2.0.1/user_doc/guide/observability/skywalking-agent.html" target="_self">SkyWalking-Agent</a></li></ul></li><li class="menu-item menu-item-level-1"><span>FAQ</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/release/faq.html" target="_self">FAQ</a></li></ul></li><li class="menu-item menu-item-level-1"><span>å†å²ç‰ˆæœ¬</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/release/history-versions.html" target="_self">å†å²ç‰ˆæœ¬</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>å¿«é€Ÿè¯•ç”¨ Docker éƒ¨ç½²</h1>
<h2>å…ˆå†³æ¡ä»¶</h2>
<ul>
<li><a href="https://docs.docker.com/engine/install/">Docker</a> 1.13.1+</li>
<li><a href="https://docs.docker.com/compose/">Docker Compose</a> 1.11.0+</li>
</ul>
<h2>å¦‚ä½•ä½¿ç”¨ Docker é•œåƒ</h2>
<p>æœ‰ 3 ç§æ–¹å¼å¯ä»¥å¿«é€Ÿè¯•ç”¨ DolphinScheduler</p>
<h3>ä¸€ã€ä»¥ docker-compose çš„æ–¹å¼å¯åŠ¨ DolphinScheduler (æ¨è)</h3>
<p>è¿™ç§æ–¹å¼éœ€è¦å…ˆå®‰è£… <a href="https://docs.docker.com/compose/">docker-compose</a>, docker-compose çš„å®‰è£…ç½‘ä¸Šå·²ç»æœ‰éå¸¸å¤šçš„èµ„æ–™ï¼Œè¯·è‡ªè¡Œå®‰è£…å³å¯</p>
<p>å¯¹äº Windows 7-10ï¼Œä½ å¯ä»¥å®‰è£… <a href="https://github.com/docker/toolbox/releases">Docker Toolbox</a>ã€‚å¯¹äº Windows 10 64-bitï¼Œä½ å¯ä»¥å®‰è£… <a href="https://docs.docker.com/docker-for-windows/install/">Docker Desktop</a>ï¼Œå¹¶ä¸”æ³¨æ„<a href="https://docs.docker.com/docker-for-windows/install/#system-requirements">ç³»ç»Ÿè¦æ±‚</a></p>
<h4>0ã€è¯·é…ç½®å†…å­˜ä¸å°‘äº 4GB</h4>
<p>å¯¹äº Mac ç”¨æˆ·ï¼Œç‚¹å‡» <code>Docker Desktop -&gt; Preferences -&gt; Resources -&gt; Memory</code></p>
<p>å¯¹äº Windows Docker Toolbox ç”¨æˆ·ï¼Œæœ‰ä¸¤é¡¹éœ€è¦é…ç½®ï¼š</p>
<ul>
<li><strong>å†…å­˜</strong>ï¼šæ‰“å¼€ Oracle VirtualBox Managerï¼Œå¦‚æœä½ åŒå‡» Docker Quickstart Terminal å¹¶æˆåŠŸè¿è¡Œ Docker Toolboxï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸º <code>default</code> çš„è™šæ‹Ÿæœº. ç‚¹å‡» <code>è®¾ç½® -&gt; ç³»ç»Ÿ -&gt; ä¸»æ¿ -&gt; å†…å­˜å¤§å°</code></li>
<li><strong>ç«¯å£è½¬å‘</strong>ï¼šç‚¹å‡» <code>è®¾ç½® -&gt; ç½‘ç»œ -&gt; é«˜çº§ -&gt; ç«¯å£è½¬å‘ -&gt; æ·»åŠ </code>. <code>åç§°</code>ï¼Œ<code>ä¸»æœºç«¯å£</code> å’Œ <code>å­ç³»ç»Ÿç«¯å£</code> éƒ½å¡«å†™ <code>12345</code>ï¼Œä¸å¡« <code>ä¸»æœºIP</code> å’Œ <code>å­ç³»ç»ŸIP</code></li>
</ul>
<p>å¯¹äº Windows Docker Desktop ç”¨æˆ·</p>
<ul>
<li><strong>Hyper-V æ¨¡å¼</strong>ï¼šç‚¹å‡» <code>Docker Desktop -&gt; Settings -&gt; Resources -&gt; Memory</code></li>
<li><strong>WSL 2 æ¨¡å¼</strong>ï¼šå‚è€ƒ <a href="https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config#configure-global-options-with-wslconfig">WSL 2 utility VM</a></li>
</ul>
<h4>1ã€ä¸‹è½½æºç åŒ…</h4>
<p>è¯·ä¸‹è½½æºç åŒ… apache-dolphinscheduler-2.0.1-src.tar.gzï¼Œä¸‹è½½åœ°å€: <a href="/zh-cn/download/download.html">ä¸‹è½½</a></p>
<h4>2ã€æ‹‰å–é•œåƒå¹¶å¯åŠ¨æœåŠ¡</h4>
<blockquote>
<p>å¯¹äº Mac å’Œ Linux ç”¨æˆ·ï¼Œæ‰“å¼€ <strong>Terminal</strong>
å¯¹äº Windows Docker Toolbox ç”¨æˆ·ï¼Œæ‰“å¼€ <strong>Docker Quickstart Terminal</strong>
å¯¹äº Windows Docker Desktop ç”¨æˆ·ï¼Œæ‰“å¼€ <strong>Windows PowerShell</strong></p>
</blockquote>
<pre><code>$ tar -zxvf apache-dolphinscheduler-2.0.1-src.tar.gz
$ cd apache-dolphinscheduler-2.0.1-src/docker/docker-swarm
$ docker pull dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
$ docker tag apache/dolphinscheduler:2.0.1 apache/dolphinscheduler:latest
$ docker-compose up -d
</code></pre>
<blockquote>
<p>PowerShell åº”è¯¥ä½¿ç”¨ <code>cd apache-dolphinscheduler-2.0.1-src\docker\docker-swarm</code></p>
</blockquote>
<p><strong>PostgreSQL</strong> (ç”¨æˆ· <code>root</code>, å¯†ç  <code>root</code>, æ•°æ®åº“ <code>dolphinscheduler</code>) å’Œ <strong>ZooKeeper</strong> æœåŠ¡å°†ä¼šé»˜è®¤å¯åŠ¨</p>
<h4>3ã€ç™»å½•ç³»ç»Ÿ</h4>
<p>è®¿é—®å‰ç«¯é¡µé¢ï¼š<a href="http://localhost:12345/dolphinscheduler%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E9%9C%80%E8%A6%81%E8%AF%B7%E4%BF%AE%E6%94%B9%E6%88%90%E5%AF%B9%E5%BA%94%E7%9A%84">http://localhost:12345/dolphinschedulerï¼Œå¦‚æœæœ‰éœ€è¦è¯·ä¿®æ”¹æˆå¯¹åº”çš„</a> IP åœ°å€</p>
<p>é»˜è®¤çš„ç”¨æˆ·æ˜¯<code>admin</code>ï¼Œé»˜è®¤çš„å¯†ç æ˜¯<code>dolphinscheduler123</code></p>
<p align="center">
  <img src="/img/login.png" width="60%" />
</p>
<p>è¯·å‚è€ƒç”¨æˆ·æ‰‹å†Œç« èŠ‚çš„<a href="../quick-start.md">å¿«é€Ÿä¸Šæ‰‹</a>æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨DolphinScheduler</p>
<h3>äºŒã€é€šè¿‡æŒ‡å®šå·²å­˜åœ¨çš„ PostgreSQL å’Œ ZooKeeper æœåŠ¡</h3>
<p>è¿™ç§æ–¹å¼éœ€è¦å…ˆå®‰è£… <a href="https://docs.docker.com/engine/install/">docker</a>, docker çš„å®‰è£…ç½‘ä¸Šå·²ç»æœ‰éå¸¸å¤šçš„èµ„æ–™ï¼Œè¯·è‡ªè¡Œå®‰è£…å³å¯</p>
<h4>1ã€åŸºç¡€è½¯ä»¶å®‰è£… (è¯·è‡ªè¡Œå®‰è£…)</h4>
<ul>
<li><a href="https://www.postgresql.org/download/">PostgreSQL</a> (8.2.15+)</li>
<li><a href="https://zookeeper.apache.org/releases.html">ZooKeeper</a> (3.4.6+)</li>
<li><a href="https://docs.docker.com/engine/install/">Docker</a> (1.13.1+)</li>
</ul>
<h4>2ã€è¯·ç™»å½• PostgreSQL æ•°æ®åº“ï¼Œåˆ›å»ºåä¸º <code>dolphinscheduler</code> æ•°æ®åº“</h4>
<h4>3ã€åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¯¼å…¥ <code>sql/dolphinscheduler_postgre.sql</code> è¿›è¡Œåˆ›å»ºè¡¨åŠåŸºç¡€æ•°æ®å¯¼å…¥</h4>
<h4>4ã€ä¸‹è½½ DolphinScheduler é•œåƒ</h4>
<p>æˆ‘ä»¬å·²å°†é¢å‘ç”¨æˆ·çš„ DolphinScheduler é•œåƒä¸Šä¼ è‡³ docker ä»“åº“ï¼Œç”¨æˆ·æ— éœ€åœ¨æœ¬åœ°æ„å»ºé•œåƒï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä» docker ä»“åº“ pull é•œåƒï¼š</p>
<pre><code>docker pull dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
</code></pre>
<h4>5ã€è¿è¡Œä¸€ä¸ª DolphinScheduler å®ä¾‹</h4>
<pre><code>$ docker run -d --name dolphinscheduler \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-p 12345:12345 \
apache/dolphinscheduler:2.0.1 all
</code></pre>
<p>æ³¨ï¼šæ•°æ®åº“ç”¨æˆ· test å’Œå¯†ç  test éœ€è¦æ›¿æ¢ä¸ºå®é™…çš„ PostgreSQL ç”¨æˆ·å’Œå¯†ç ï¼Œ192.168.x.x éœ€è¦æ›¿æ¢ä¸º PostgreSQL å’Œ ZooKeeper çš„ä¸»æœº IP</p>
<h4>6ã€ç™»å½•ç³»ç»Ÿ</h4>
<p>åŒä¸Š</p>
<h3>ä¸‰ã€è¿è¡Œ DolphinScheduler ä¸­çš„ç‹¬ç«‹æœåŠ¡</h3>
<p>åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š</p>
<pre><code>    MasterServer         ----- masteræœåŠ¡
    WorkerServer         ----- workeræœåŠ¡
    LoggerServer         ----- loggeræœåŠ¡
    ApiApplicationServer ----- apiæœåŠ¡
    AlertServer          ----- alertæœåŠ¡
</code></pre>
<p>å¦‚æœä½ åªæ˜¯æƒ³è¿è¡Œ dolphinscheduler ä¸­çš„éƒ¨åˆ†æœåŠ¡</p>
<p>ä½ å¯ä»¥å¤Ÿé€šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œdolphinschedulerä¸­çš„éƒ¨åˆ†æœåŠ¡</p>
<ul>
<li>å¯åŠ¨ä¸€ä¸ª <strong>master server</strong>, å¦‚ä¸‹:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-master \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
apache/dolphinscheduler:2.0.1 master-server
</code></pre>
<ul>
<li>å¯åŠ¨ä¸€ä¸ª <strong>worker server</strong> (åŒ…æ‹¬ <strong>logger server</strong>), å¦‚ä¸‹:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-worker \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
apache/dolphinscheduler:2.0.1 worker-server
</code></pre>
<ul>
<li>å¯åŠ¨ä¸€ä¸ª <strong>api server</strong>, å¦‚ä¸‹:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-api \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-p 12345:12345 \
apache/dolphinscheduler:2.0.1 api-server
</code></pre>
<ul>
<li>å¯åŠ¨ä¸€ä¸ª <strong>alert server</strong>, å¦‚ä¸‹:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-alert \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
apache/dolphinscheduler:2.0.1 alert-server
</code></pre>
<p><strong>æ³¨æ„</strong>: å½“ä½ è¿è¡Œdolphinschedulerä¸­çš„éƒ¨åˆ†æœåŠ¡æ—¶ï¼Œä½ å¿…é¡»æŒ‡å®šè¿™äº›ç¯å¢ƒå˜é‡ <code>DATABASE_HOST</code>, <code>DATABASE_PORT</code>, <code>DATABASE_DATABASE</code>, <code>DATABASE_USERNAME</code>, <code>DATABASE_PASSWORD</code>, <code>ZOOKEEPER_QUORUM</code>ã€‚</p>
<h2>ç¯å¢ƒå˜é‡</h2>
<p>Docker å®¹å™¨é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼Œ<a href="#appendix-environment-variables">é™„å½•-ç¯å¢ƒå˜é‡</a> åˆ—å‡ºäº† DolphinScheduler çš„å¯é…ç½®ç¯å¢ƒå˜é‡åŠå…¶é»˜è®¤å€¼ <!-- markdown-link-check-disable-line --></p>
<p>ç‰¹åˆ«åœ°ï¼Œåœ¨ Docker Compose å’Œ Docker Swarm ä¸­ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ <code>config.env.sh</code> è¿›è¡Œé…ç½®</p>
<h2>æ”¯æŒçŸ©é˜µ</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>æ”¯æŒ</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>Shell</td>
<td>æ˜¯</td>
<td></td>
</tr>
<tr>
<td>Python2</td>
<td>æ˜¯</td>
<td></td>
</tr>
<tr>
<td>Python3</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Hadoop2</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Hadoop3</td>
<td>å°šæœªç¡®å®š</td>
<td>å°šæœªæµ‹è¯•</td>
</tr>
<tr>
<td>Spark-Local(client)</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Spark-YARN(cluster)</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Spark-Standalone(cluster)</td>
<td>å°šä¸</td>
<td></td>
</tr>
<tr>
<td>Spark-Kubernetes(cluster)</td>
<td>å°šä¸</td>
<td></td>
</tr>
<tr>
<td>Flink-Local(local&gt;=1.11)</td>
<td>å°šä¸</td>
<td>Generic CLI æ¨¡å¼å°šæœªæ”¯æŒ</td>
</tr>
<tr>
<td>Flink-YARN(yarn-cluster)</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Flink-YARN(yarn-session/yarn-per-job/yarn-application&gt;=1.11)</td>
<td>å°šä¸</td>
<td>Generic CLI æ¨¡å¼å°šæœªæ”¯æŒ</td>
</tr>
<tr>
<td>Flink-Standalone(default)</td>
<td>å°šä¸</td>
<td></td>
</tr>
<tr>
<td>Flink-Standalone(remote&gt;=1.11)</td>
<td>å°šä¸</td>
<td>Generic CLI æ¨¡å¼å°šæœªæ”¯æŒ</td>
</tr>
<tr>
<td>Flink-Kubernetes(default)</td>
<td>å°šä¸</td>
<td></td>
</tr>
<tr>
<td>Flink-Kubernetes(remote&gt;=1.11)</td>
<td>å°šä¸</td>
<td>Generic CLI æ¨¡å¼å°šæœªæ”¯æŒ</td>
</tr>
<tr>
<td>Flink-NativeKubernetes(kubernetes-session/application&gt;=1.11)</td>
<td>å°šä¸</td>
<td>Generic CLI æ¨¡å¼å°šæœªæ”¯æŒ</td>
</tr>
<tr>
<td>MapReduce</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Kerberos</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>HTTP</td>
<td>æ˜¯</td>
<td></td>
</tr>
<tr>
<td>DataX</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>Sqoop</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-MySQL</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-PostgreSQL</td>
<td>æ˜¯</td>
<td></td>
</tr>
<tr>
<td>SQL-Hive</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-Spark</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-ClickHouse</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-Oracle</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-SQLServer</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
<tr>
<td>SQL-DB2</td>
<td>é—´æ¥æ”¯æŒ</td>
<td>è¯¦è§ FAQ</td>
</tr>
</tbody>
</table>
<h2>FAQ</h2>
<h3>å¦‚ä½•é€šè¿‡ docker-compose ç®¡ç† DolphinSchedulerï¼Ÿ</h3>
<p>å¯åŠ¨ã€é‡å¯ã€åœæ­¢æˆ–åˆ—å‡ºæ‰€æœ‰å®¹å™¨:</p>
<pre><code>docker-compose start
docker-compose restart
docker-compose stop
docker-compose ps
</code></pre>
<p>åœæ­¢æ‰€æœ‰å®¹å™¨å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œ:</p>
<pre><code>docker-compose down
</code></pre>
<p>åœæ­¢æ‰€æœ‰å®¹å™¨å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œå’Œå­˜å‚¨å·:</p>
<pre><code>docker-compose down -v
</code></pre>
<h3>å¦‚ä½•æŸ¥çœ‹ä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—ï¼Ÿ</h3>
<p>åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„å®¹å™¨:</p>
<pre><code>docker ps
docker ps --format &quot;{{.Names}}&quot; # åªæ‰“å°åå­—
</code></pre>
<p>æŸ¥çœ‹åä¸º docker-swarm_dolphinscheduler-api_1 çš„å®¹å™¨çš„æ—¥å¿—:</p>
<pre><code>docker logs docker-swarm_dolphinscheduler-api_1
docker logs -f docker-swarm_dolphinscheduler-api_1 # è·Ÿéšæ—¥å¿—è¾“å‡º
docker logs --tail 10 docker-swarm_dolphinscheduler-api_1 # æ˜¾ç¤ºå€’æ•°10è¡Œæ—¥å¿—
</code></pre>
<h3>å¦‚ä½•é€šè¿‡ docker-compose æ‰©ç¼©å®¹ master å’Œ workerï¼Ÿ</h3>
<p>æ‰©ç¼©å®¹ master è‡³ 2 ä¸ªå®ä¾‹:</p>
<pre><code>docker-compose up -d --scale dolphinscheduler-master=2 dolphinscheduler-master
</code></pre>
<p>æ‰©ç¼©å®¹ worker è‡³ 3 ä¸ªå®ä¾‹:</p>
<pre><code>docker-compose up -d --scale dolphinscheduler-worker=3 dolphinscheduler-worker
</code></pre>
<h3>å¦‚ä½•åœ¨ Docker Swarm ä¸Šéƒ¨ç½² DolphinSchedulerï¼Ÿ</h3>
<p>å‡è®¾ Docker Swarm é›†ç¾¤å·²ç»éƒ¨ç½²ï¼ˆå¦‚æœè¿˜æ²¡æœ‰åˆ›å»º Docker Swarm é›†ç¾¤ï¼Œè¯·å‚è€ƒ <a href="https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/">create-swarm</a>ï¼‰</p>
<p>å¯åŠ¨åä¸º dolphinscheduler çš„ stack:</p>
<pre><code>docker stack deploy -c docker-stack.yml dolphinscheduler
</code></pre>
<p>åˆ—å‡ºåä¸º dolphinscheduler çš„ stack çš„æ‰€æœ‰æœåŠ¡:</p>
<pre><code>docker stack services dolphinscheduler
</code></pre>
<p>åœæ­¢å¹¶ç§»é™¤åä¸º dolphinscheduler çš„ stack:</p>
<pre><code>docker stack rm dolphinscheduler
</code></pre>
<p>ç§»é™¤åä¸º dolphinscheduler çš„ stack çš„æ‰€æœ‰å­˜å‚¨å·:</p>
<pre><code>docker volume rm -f $(docker volume ls --format &quot;{{.Name}}&quot; | grep -e &quot;^dolphinscheduler&quot;)
</code></pre>
<h3>å¦‚ä½•åœ¨ Docker Swarm ä¸Šæ‰©ç¼©å®¹ master å’Œ workerï¼Ÿ</h3>
<p>æ‰©ç¼©å®¹åä¸º dolphinscheduler çš„ stack çš„ master è‡³ 2 ä¸ªå®ä¾‹:</p>
<pre><code>docker service scale dolphinscheduler_dolphinscheduler-master=2
</code></pre>
<p>æ‰©ç¼©å®¹åä¸º dolphinscheduler çš„ stack çš„ worker è‡³ 3 ä¸ªå®ä¾‹:</p>
<pre><code>docker service scale dolphinscheduler_dolphinscheduler-worker=3
</code></pre>
<h3>å¦‚ä½•æ„å»ºä¸€ä¸ª Docker é•œåƒï¼Ÿ</h3>
<h4>ä»æºç æ„å»º (éœ€è¦ Maven 3.3+ &amp; JDK 1.8+)</h4>
<p>ç±» Unix ç³»ç»Ÿï¼Œåœ¨ Terminal ä¸­æ‰§è¡Œ:</p>
<pre><code class="language-bash">$ bash ./docker/build/hooks/build
</code></pre>
<p>Windows ç³»ç»Ÿï¼Œåœ¨ cmd æˆ– PowerShell ä¸­æ‰§è¡Œ:</p>
<pre><code class="language-bat"><span class="hljs-function">C:\<span class="hljs-title">dolphinscheduler</span>-<span class="hljs-title">src</span>&gt;.\<span class="hljs-title">docker</span>\<span class="hljs-title">build</span>\<span class="hljs-title">hooks</span>\<span class="hljs-title">build.bat</span>
</span></code></pre>
<p>å¦‚æœä½ ä¸ç†è§£ <code>./docker/build/hooks/build</code> <code>./docker/build/hooks/build.bat</code> è¿™äº›è„šæœ¬ï¼Œè¯·é˜…è¯»é‡Œé¢çš„å†…å®¹</p>
<h4>ä»äºŒè¿›åˆ¶åŒ…æ„å»º (ä¸éœ€è¦ Maven 3.3+ &amp; JDK 1.8+)</h4>
<p>è¯·ä¸‹è½½äºŒè¿›åˆ¶åŒ… apache-dolphinscheduler-2.0.1-bin.tar.gzï¼Œä¸‹è½½åœ°å€: <a href="/zh-cn/download/download.html">ä¸‹è½½</a>. ç„¶åå°† apache-dolphinscheduler-2.0.1-bin.tar.gz æ”¾åˆ° <code>apache-dolphinscheduler-2.0.1-src/docker/build</code> ç›®å½•é‡Œï¼Œåœ¨ Terminal æˆ– PowerShell ä¸­æ‰§è¡Œ:</p>
<pre><code>$ cd apache-dolphinscheduler-2.0.1-src/docker/build
$ docker build --build-arg VERSION=2.0.1 -t apache/dolphinscheduler:2.0.1 .
</code></pre>
<blockquote>
<p>PowerShell åº”è¯¥ä½¿ç”¨ <code>cd apache-dolphinscheduler-2.0.1-src/docker/build</code></p>
</blockquote>
<h4>æ„å»ºå¤šå¹³å°æ¶æ„é•œåƒ</h4>
<p>ç›®å‰æ”¯æŒæ„å»º <code>linux/amd64</code> å’Œ <code>linux/arm64</code> å¹³å°æ¶æ„çš„é•œåƒï¼Œè¦æ±‚ï¼š</p>
<ol>
<li>æ”¯æŒ <a href="https://docs.docker.com/engine/reference/commandline/buildx/">docker buildx</a></li>
<li>å…·æœ‰ <a href="https://hub.docker.com/r/apache/dolphinscheduler">https://hub.docker.com/r/apache/dolphinscheduler</a> çš„ push æƒé™ï¼ˆ<strong>åŠ¡å¿…è°¨æ…</strong>: æ„å»ºå‘½ä»¤é»˜è®¤ä¼šè‡ªåŠ¨å°†å¤šå¹³å°æ¶æ„é•œåƒæ¨é€åˆ° apache/dolphinscheduler çš„ docker hubï¼‰</li>
</ol>
<p>æ‰§è¡Œ:</p>
<pre><code class="language-bash">$ docker login <span class="hljs-comment"># ç™»å½•, ç”¨äºæ¨é€ apache/dolphinscheduler</span>
$ bash ./docker/build/hooks/build x
</code></pre>
<h3>å¦‚ä½•ä¸º Docker æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Ÿ</h3>
<p>å¦‚æœä½ æƒ³åœ¨ç¼–è¯‘çš„æ—¶å€™æˆ–è€…è¿è¡Œçš„æ—¶å€™é™„åŠ ä¸€äº›å…¶å®ƒçš„æ“ä½œåŠæ–°å¢ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä½ å¯ä»¥åœ¨<code>/root/start-init-conf.sh</code>æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼ŒåŒæ—¶å¦‚æœæ¶‰åŠåˆ°é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ï¼Œè¯·åœ¨<code>/opt/dolphinscheduler/conf/*.tpl</code>ä¸­ä¿®æ”¹ç›¸åº”çš„é…ç½®æ–‡ä»¶</p>
<p>ä¾‹å¦‚ï¼Œåœ¨<code>/root/start-init-conf.sh</code>æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡<code>SECURITY_AUTHENTICATION_TYPE</code>ï¼š</p>
<pre><code>export SECURITY_AUTHENTICATION_TYPE=PASSWORD
</code></pre>
<p>å½“æ·»åŠ ä»¥ä¸Šç¯å¢ƒå˜é‡åï¼Œä½ åº”è¯¥åœ¨ç›¸åº”çš„æ¨¡æ¿æ–‡ä»¶<code>application-api.properties.tpl</code>ä¸­æ·»åŠ è¿™ä¸ªç¯å¢ƒå˜é‡é…ç½®:</p>
<pre><code>security.authentication.type=${SECURITY_AUTHENTICATION_TYPE}
</code></pre>
<p><code>/root/start-init-conf.sh</code>å°†æ ¹æ®æ¨¡æ¿æ–‡ä»¶åŠ¨æ€çš„ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;generate dolphinscheduler config&quot;</span>
ls <span class="hljs-variable">${DOLPHINSCHEDULER_HOME}</span>/conf/ | grep <span class="hljs-string">&quot;.tpl&quot;</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;cat &lt;&lt; EOF
<span class="hljs-subst">$(cat ${DOLPHINSCHEDULER_HOME}/conf/${line})</span>
EOF
&quot;</span> &gt; <span class="hljs-variable">${DOLPHINSCHEDULER_HOME}</span>/conf/<span class="hljs-variable">${line%.*}</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3>å¦‚ä½•ç”¨ MySQL æ›¿ä»£ PostgreSQL ä½œä¸º DolphinScheduler çš„æ•°æ®åº“ï¼Ÿ</h3>
<blockquote>
<p>ç”±äºå•†ä¸šè®¸å¯è¯çš„åŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ MySQL çš„é©±åŠ¨åŒ….</p>
<p>å¦‚æœä½ è¦ä½¿ç”¨ MySQL, ä½ å¯ä»¥åŸºäºå®˜æ–¹é•œåƒ <code>apache/dolphinscheduler</code> è¿›è¡Œæ„å»º.</p>
</blockquote>
<ol>
<li>
<p>ä¸‹è½½ MySQL é©±åŠ¨åŒ… <a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.16/mysql-connector-java-8.0.16.jar">mysql-connector-java-8.0.16.jar</a></p>
</li>
<li>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Dockerfile</code>ï¼Œç”¨äºæ·»åŠ  MySQL çš„é©±åŠ¨åŒ…:</p>
</li>
</ol>
<pre><code>FROM dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
COPY mysql-connector-java-8.0.16.jar /opt/dolphinscheduler/lib
</code></pre>
<ol start="3">
<li>æ„å»ºä¸€ä¸ªåŒ…å« MySQL é©±åŠ¨åŒ…çš„æ–°é•œåƒ:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:mysql-driver .
</code></pre>
<ol start="4">
<li>ä¿®æ”¹ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„æ‰€æœ‰ image å­—æ®µä¸º <code>apache/dolphinscheduler:mysql-driver</code></li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>æ³¨é‡Š <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„ <code>dolphinscheduler-postgresql</code> å—</p>
</li>
<li>
<p>åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>dolphinscheduler-mysql</code> æœåŠ¡ï¼ˆ<strong>å¯é€‰</strong>ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ MySQL æ•°æ®åº“ï¼‰</p>
</li>
<li>
<p>ä¿®æ”¹ <code>config.env.sh</code> æ–‡ä»¶ä¸­çš„ DATABASE ç¯å¢ƒå˜é‡</p>
</li>
</ol>
<pre><code>DATABASE_TYPE=mysql
DATABASE_DRIVER=com.mysql.jdbc.Driver
DATABASE_HOST=dolphinscheduler-mysql
DATABASE_PORT=3306
DATABASE_USERNAME=root
DATABASE_PASSWORD=root
DATABASE_DATABASE=dolphinscheduler
DATABASE_PARAMS=useUnicode=true&amp;characterEncoding=UTF-8
</code></pre>
<blockquote>
<p>å¦‚æœä½ å·²ç»æ·»åŠ äº† <code>dolphinscheduler-mysql</code> æœåŠ¡ï¼Œè®¾ç½® <code>DATABASE_HOST</code> ä¸º <code>dolphinscheduler-mysql</code> å³å¯</p>
</blockquote>
<ol start="8">
<li>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</li>
</ol>
<h3>å¦‚ä½•åœ¨æ•°æ®æºä¸­å¿ƒæ”¯æŒ MySQL æ•°æ®æºï¼Ÿ</h3>
<blockquote>
<p>ç”±äºå•†ä¸šè®¸å¯è¯çš„åŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ MySQL çš„é©±åŠ¨åŒ….</p>
<p>å¦‚æœä½ è¦æ·»åŠ  MySQL æ•°æ®æº, ä½ å¯ä»¥åŸºäºå®˜æ–¹é•œåƒ <code>apache/dolphinscheduler</code> è¿›è¡Œæ„å»º.</p>
</blockquote>
<ol>
<li>
<p>ä¸‹è½½ MySQL é©±åŠ¨åŒ… <a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.16/mysql-connector-java-8.0.16.jar">mysql-connector-java-8.0.16.jar</a></p>
</li>
<li>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Dockerfile</code>ï¼Œç”¨äºæ·»åŠ  MySQL é©±åŠ¨åŒ…:</p>
</li>
</ol>
<pre><code>FROM dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
COPY mysql-connector-java-8.0.16.jar /opt/dolphinscheduler/lib
</code></pre>
<ol start="3">
<li>æ„å»ºä¸€ä¸ªåŒ…å« MySQL é©±åŠ¨åŒ…çš„æ–°é•œåƒ:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:mysql-driver .
</code></pre>
<ol start="4">
<li>å°† <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„æ‰€æœ‰ <code>image</code> å­—æ®µä¿®æ”¹ä¸º <code>apache/dolphinscheduler:mysql-driver</code></li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>åœ¨æ•°æ®æºä¸­å¿ƒæ·»åŠ ä¸€ä¸ª MySQL æ•°æ®æº</p>
</li>
</ol>
<h3>å¦‚ä½•åœ¨æ•°æ®æºä¸­å¿ƒæ”¯æŒ Oracle æ•°æ®æºï¼Ÿ</h3>
<blockquote>
<p>ç”±äºå•†ä¸šè®¸å¯è¯çš„åŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ Oracle çš„é©±åŠ¨åŒ….</p>
<p>å¦‚æœä½ è¦æ·»åŠ  Oracle æ•°æ®æº, ä½ å¯ä»¥åŸºäºå®˜æ–¹é•œåƒ <code>apache/dolphinscheduler</code> è¿›è¡Œæ„å»º.</p>
</blockquote>
<ol>
<li>
<p>ä¸‹è½½ Oracle é©±åŠ¨åŒ… <a href="https://repo1.maven.org/maven2/com/oracle/database/jdbc/ojdbc8/">ojdbc8.jar</a> (such as <code>ojdbc8-19.9.0.0.jar</code>)</p>
</li>
<li>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Dockerfile</code>ï¼Œç”¨äºæ·»åŠ  Oracle é©±åŠ¨åŒ…:</p>
</li>
</ol>
<pre><code>FROM dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
COPY ojdbc8-19.9.0.0.jar /opt/dolphinscheduler/lib
</code></pre>
<ol start="3">
<li>æ„å»ºä¸€ä¸ªåŒ…å« Oracle é©±åŠ¨åŒ…çš„æ–°é•œåƒ:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:oracle-driver .
</code></pre>
<ol start="4">
<li>å°† <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„æ‰€æœ‰ <code>image</code> å­—æ®µä¿®æ”¹ä¸º <code>apache/dolphinscheduler:oracle-driver</code></li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>åœ¨æ•°æ®æºä¸­å¿ƒæ·»åŠ ä¸€ä¸ª Oracle æ•°æ®æº</p>
</li>
</ol>
<h3>å¦‚ä½•æ”¯æŒ Python 2 pip ä»¥åŠè‡ªå®šä¹‰ requirements.txtï¼Ÿ</h3>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Dockerfile</code>ï¼Œç”¨äºå®‰è£… pip:</li>
</ol>
<pre><code>FROM dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
COPY requirements.txt /tmp
RUN apt-get update &amp;&amp; \
    apt-get install -y --no-install-recommends python-pip &amp;&amp; \
    pip install --no-cache-dir -r /tmp/requirements.txt &amp;&amp; \
    rm -rf /var/lib/apt/lists/*
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…é»˜è®¤çš„ <strong>pip 18.1</strong>. å¦‚æœä½ æƒ³å‡çº§ pip, åªéœ€æ·»åŠ ä¸€è¡Œ</p>
<pre><code>    pip install --no-cache-dir -U pip &amp;&amp; \
</code></pre>
<ol start="2">
<li>æ„å»ºä¸€ä¸ªåŒ…å« pip çš„æ–°é•œåƒ:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:pip .
</code></pre>
<ol start="3">
<li>å°† <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„æ‰€æœ‰ <code>image</code> å­—æ®µä¿®æ”¹ä¸º <code>apache/dolphinscheduler:pip</code></li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<ol start="4">
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>åœ¨ä¸€ä¸ªæ–° Python ä»»åŠ¡ä¸‹éªŒè¯ pip</p>
</li>
</ol>
<h3>å¦‚ä½•æ”¯æŒ Python 3ï¼Ÿ</h3>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Dockerfile</code>ï¼Œç”¨äºå®‰è£… Python 3:</li>
</ol>
<pre><code>FROM dolphinscheduler.docker.scarf.sh/apache/dolphinscheduler:2.0.1
RUN apt-get update &amp;&amp; \
    apt-get install -y --no-install-recommends python3 &amp;&amp; \
    rm -rf /var/lib/apt/lists/*
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…é»˜è®¤çš„ <strong>Python 3.7.3</strong>. å¦‚æœä½ ä¹Ÿæƒ³å®‰è£… <strong>pip3</strong>, å°† <code>python3</code> æ›¿æ¢ä¸º <code>python3-pip</code> å³å¯</p>
<pre><code>    apt-get install -y --no-install-recommends python3-pip &amp;&amp; \
</code></pre>
<ol start="2">
<li>æ„å»ºä¸€ä¸ªåŒ…å« Python 3 çš„æ–°é•œåƒ:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:python3 .
</code></pre>
<ol start="3">
<li>å°† <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„æ‰€æœ‰ <code>image</code> å­—æ®µä¿®æ”¹ä¸º <code>apache/dolphinscheduler:python3</code></li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<ol start="4">
<li>
<p>ä¿®æ”¹ <code>config.env.sh</code> æ–‡ä»¶ä¸­çš„ <code>PYTHON_HOME</code> ä¸º <code>/usr/bin/python3</code></p>
</li>
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>åœ¨ä¸€ä¸ªæ–° Python ä»»åŠ¡ä¸‹éªŒè¯ Python 3</p>
</li>
</ol>
<h3>å¦‚ä½•æ”¯æŒ Hadoop, Spark, Flink, Hive æˆ– DataXï¼Ÿ</h3>
<p>ä»¥ Spark 2.4.7 ä¸ºä¾‹:</p>
<ol>
<li>
<p>ä¸‹è½½ Spark 2.4.7 å‘å¸ƒçš„äºŒè¿›åˆ¶åŒ… <code>spark-2.4.7-bin-hadoop2.7.tgz</code></p>
</li>
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>å¤åˆ¶ Spark 2.4.7 äºŒè¿›åˆ¶åŒ…åˆ° Docker å®¹å™¨ä¸­</p>
</li>
</ol>
<pre><code class="language-bash">docker cp spark-2.4.7-bin-hadoop2.7.tgz docker-swarm_dolphinscheduler-worker_1:/opt/soft
</code></pre>
<p>å› ä¸ºå­˜å‚¨å· <code>dolphinscheduler-shared-local</code> è¢«æŒ‚è½½åˆ° <code>/opt/soft</code>, å› æ­¤ <code>/opt/soft</code> ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¸ä¼šä¸¢å¤±</p>
<ol start="4">
<li>ç™»å½•åˆ°å®¹å™¨å¹¶ç¡®ä¿ <code>SPARK_HOME2</code> å­˜åœ¨</li>
</ol>
<pre><code class="language-bash">docker <span class="hljs-built_in">exec</span> -it docker-swarm_dolphinscheduler-worker_1 bash
<span class="hljs-built_in">cd</span> /opt/soft
tar zxf spark-2.4.7-bin-hadoop2.7.tgz
rm -f spark-2.4.7-bin-hadoop2.7.tgz
ln -s spark-2.4.7-bin-hadoop2.7 spark2 <span class="hljs-comment"># æˆ–è€… mv</span>
<span class="hljs-variable">$SPARK_HOME2</span>/bin/spark-submit --version
</code></pre>
<p>å¦‚æœä¸€åˆ‡æ‰§è¡Œæ­£å¸¸ï¼Œæœ€åä¸€æ¡å‘½ä»¤å°†ä¼šæ‰“å° Spark ç‰ˆæœ¬ä¿¡æ¯</p>
<ol start="5">
<li>åœ¨ä¸€ä¸ª Shell ä»»åŠ¡ä¸‹éªŒè¯ Spark</li>
</ol>
<pre><code>$SPARK_HOME2/bin/spark-submit --class org.apache.spark.examples.SparkPi $SPARK_HOME2/examples/jars/spark-examples_2.11-2.4.7.jar
</code></pre>
<p>æ£€æŸ¥ä»»åŠ¡æ—¥å¿—æ˜¯å¦åŒ…å«è¾“å‡º <code>Pi is roughly 3.146015</code></p>
<ol start="6">
<li>åœ¨ä¸€ä¸ª Spark ä»»åŠ¡ä¸‹éªŒè¯ Spark</li>
</ol>
<p>æ–‡ä»¶ <code>spark-examples_2.11-2.4.7.jar</code> éœ€è¦å…ˆè¢«ä¸Šä¼ åˆ°èµ„æºä¸­å¿ƒï¼Œç„¶ååˆ›å»ºä¸€ä¸ª Spark ä»»åŠ¡å¹¶è®¾ç½®:</p>
<ul>
<li>Sparkç‰ˆæœ¬: <code>SPARK2</code></li>
<li>ä¸»å‡½æ•°çš„Class: <code>org.apache.spark.examples.SparkPi</code></li>
<li>ä¸»ç¨‹åºåŒ…: <code>spark-examples_2.11-2.4.7.jar</code></li>
<li>éƒ¨ç½²æ–¹å¼: <code>local</code></li>
</ul>
<p>åŒæ ·åœ°, æ£€æŸ¥ä»»åŠ¡æ—¥å¿—æ˜¯å¦åŒ…å«è¾“å‡º <code>Pi is roughly 3.146015</code></p>
<ol start="7">
<li>éªŒè¯ Spark on YARN</li>
</ol>
<p>Spark on YARN (éƒ¨ç½²æ–¹å¼ä¸º <code>cluster</code> æˆ– <code>client</code>) éœ€è¦ Hadoop æ”¯æŒ. ç±»ä¼¼äº Spark æ”¯æŒ, æ”¯æŒ Hadoop çš„æ“ä½œå‡ ä¹å’Œå‰é¢çš„æ­¥éª¤ç›¸åŒ</p>
<p>ç¡®ä¿ <code>$HADOOP_HOME</code> å’Œ <code>$HADOOP_CONF_DIR</code> å­˜åœ¨</p>
<h3>å¦‚ä½•æ”¯æŒ Spark 3ï¼Ÿ</h3>
<p>äº‹å®ä¸Šï¼Œä½¿ç”¨ <code>spark-submit</code> æäº¤åº”ç”¨çš„æ–¹å¼æ˜¯ç›¸åŒçš„, æ— è®ºæ˜¯ Spark 1, 2 æˆ– 3. æ¢å¥è¯è¯´ï¼Œ<code>SPARK_HOME2</code> çš„è¯­ä¹‰æ˜¯ç¬¬äºŒä¸ª <code>SPARK_HOME</code>, è€Œé <code>SPARK2</code> çš„ <code>HOME</code>, å› æ­¤åªéœ€è®¾ç½® <code>SPARK_HOME2=/path/to/spark3</code> å³å¯</p>
<p>ä»¥ Spark 3.1.1 ä¸ºä¾‹:</p>
<ol>
<li>
<p>ä¸‹è½½ Spark 3.1.1 å‘å¸ƒçš„äºŒè¿›åˆ¶åŒ… <code>spark-3.1.1-bin-hadoop2.7.tgz</code></p>
</li>
<li>
<p>è¿è¡Œ dolphinscheduler (è¯¦è§<strong>å¦‚ä½•ä½¿ç”¨dockeré•œåƒ</strong>)</p>
</li>
<li>
<p>å¤åˆ¶ Spark 3.1.1 äºŒè¿›åˆ¶åŒ…åˆ° Docker å®¹å™¨ä¸­</p>
</li>
</ol>
<pre><code class="language-bash">docker cp spark-3.1.1-bin-hadoop2.7.tgz docker-swarm_dolphinscheduler-worker_1:/opt/soft
</code></pre>
<ol start="4">
<li>ç™»å½•åˆ°å®¹å™¨å¹¶ç¡®ä¿ <code>SPARK_HOME2</code> å­˜åœ¨</li>
</ol>
<pre><code class="language-bash">docker <span class="hljs-built_in">exec</span> -it docker-swarm_dolphinscheduler-worker_1 bash
<span class="hljs-built_in">cd</span> /opt/soft
tar zxf spark-3.1.1-bin-hadoop2.7.tgz
rm -f spark-3.1.1-bin-hadoop2.7.tgz
ln -s spark-3.1.1-bin-hadoop2.7 spark2 <span class="hljs-comment"># æˆ–è€… mv</span>
<span class="hljs-variable">$SPARK_HOME2</span>/bin/spark-submit --version
</code></pre>
<p>å¦‚æœä¸€åˆ‡æ‰§è¡Œæ­£å¸¸ï¼Œæœ€åä¸€æ¡å‘½ä»¤å°†ä¼šæ‰“å° Spark ç‰ˆæœ¬ä¿¡æ¯</p>
<ol start="5">
<li>åœ¨ä¸€ä¸ª Shell ä»»åŠ¡ä¸‹éªŒè¯ Spark</li>
</ol>
<pre><code>$SPARK_HOME2/bin/spark-submit --class org.apache.spark.examples.SparkPi $SPARK_HOME2/examples/jars/spark-examples_2.12-3.1.1.jar
</code></pre>
<p>æ£€æŸ¥ä»»åŠ¡æ—¥å¿—æ˜¯å¦åŒ…å«è¾“å‡º <code>Pi is roughly 3.146015</code></p>
<h3>å¦‚ä½•åœ¨ Masterã€Worker å’Œ Api æœåŠ¡ä¹‹é—´æ”¯æŒå…±äº«å­˜å‚¨ï¼Ÿ</h3>
<blockquote>
<p><strong>æ³¨æ„</strong>: å¦‚æœæ˜¯åœ¨å•æœºä¸Šé€šè¿‡ docker-compose éƒ¨ç½²ï¼Œåˆ™æ­¥éª¤ 1 å’Œ 2 å¯ä»¥ç›´æ¥è·³è¿‡ï¼Œå¹¶ä¸”æ‰§è¡Œå‘½ä»¤å¦‚ <code>docker cp hadoop-3.2.2.tar.gz docker-swarm_dolphinscheduler-worker_1:/opt/soft</code> å°† Hadoop æ”¾åˆ°å®¹å™¨ä¸­çš„å…±äº«ç›®å½• /opt/soft ä¸‹</p>
</blockquote>
<p>ä¾‹å¦‚, Masterã€Worker å’Œ Api æœåŠ¡å¯èƒ½åŒæ—¶ä½¿ç”¨ Hadoop</p>
<ol>
<li>ä¿®æ”¹ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„ <code>dolphinscheduler-shared-local</code> å­˜å‚¨å·ï¼Œä»¥æ”¯æŒ nfs</li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<pre><code class="language-yaml"><span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">dolphinscheduler-shared-local:</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">&quot;nfs&quot;</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">&quot;addr=10.40.0.199,nolock,soft,rw&quot;</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">&quot;:/path/to/shared/dir&quot;</span>
</code></pre>
<ol start="2">
<li>
<p>å°† Hadoop æ”¾åˆ° nfs</p>
</li>
<li>
<p>ç¡®ä¿ <code>$HADOOP_HOME</code> å’Œ <code>$HADOOP_CONF_DIR</code> æ­£ç¡®</p>
</li>
</ol>
<h3>å¦‚ä½•æ”¯æŒæœ¬åœ°æ–‡ä»¶å­˜å‚¨è€Œé HDFS å’Œ S3ï¼Ÿ</h3>
<blockquote>
<p><strong>æ³¨æ„</strong>: å¦‚æœæ˜¯åœ¨å•æœºä¸Šé€šè¿‡ docker-compose éƒ¨ç½²ï¼Œåˆ™æ­¥éª¤ 2 å¯ä»¥ç›´æ¥è·³è¿‡</p>
</blockquote>
<ol>
<li>ä¿®æ”¹ <code>config.env.sh</code> æ–‡ä»¶ä¸­ä¸‹é¢çš„ç¯å¢ƒå˜é‡:</li>
</ol>
<pre><code>RESOURCE_STORAGE_TYPE=HDFS
FS_DEFAULT_FS=file:///
</code></pre>
<ol start="2">
<li>ä¿®æ”¹ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­çš„ <code>dolphinscheduler-resource-local</code> å­˜å‚¨å·ï¼Œä»¥æ”¯æŒ nfs</li>
</ol>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ Docker Swarm ä¸Šéƒ¨ç½² dolphinschedulerï¼Œä½ éœ€è¦ä¿®æ”¹ <code>docker-stack.yml</code></p>
</blockquote>
<pre><code class="language-yaml"><span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">dolphinscheduler-resource-local:</span>
    <span class="hljs-attr">driver_opts:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">&quot;nfs&quot;</span>
      <span class="hljs-attr">o:</span> <span class="hljs-string">&quot;addr=10.40.0.199,nolock,soft,rw&quot;</span>
      <span class="hljs-attr">device:</span> <span class="hljs-string">&quot;:/path/to/resource/dir&quot;</span>
</code></pre>
<h3>å¦‚ä½•æ”¯æŒ S3 èµ„æºå­˜å‚¨ï¼Œä¾‹å¦‚ MinIOï¼Ÿ</h3>
<p>ä»¥ MinIO ä¸ºä¾‹: ä¿®æ”¹ <code>config.env.sh</code> æ–‡ä»¶ä¸­ä¸‹é¢çš„ç¯å¢ƒå˜é‡</p>
<pre><code>RESOURCE_STORAGE_TYPE=S3
RESOURCE_UPLOAD_PATH=/dolphinscheduler
FS_DEFAULT_FS=s3a://BUCKET_NAME
FS_S3A_ENDPOINT=http://MINIO_IP:9000
FS_S3A_ACCESS_KEY=MINIO_ACCESS_KEY
FS_S3A_SECRET_KEY=MINIO_SECRET_KEY
</code></pre>
<p><code>BUCKET_NAME</code>, <code>MINIO_IP</code>, <code>MINIO_ACCESS_KEY</code> å’Œ <code>MINIO_SECRET_KEY</code> éœ€è¦è¢«ä¿®æ”¹ä¸ºå®é™…å€¼</p>
<blockquote>
<p><strong>æ³¨æ„</strong>: <code>MINIO_IP</code> åªèƒ½ä½¿ç”¨ IP è€ŒéåŸŸå, å› ä¸º DolphinScheduler å°šä¸æ”¯æŒ S3 è·¯å¾„é£æ ¼è®¿é—® (S3 path style access)</p>
</blockquote>
<h3>å¦‚ä½•é…ç½® SkyWalkingï¼Ÿ</h3>
<p>ä¿®æ”¹ <code>config.env.sh</code> æ–‡ä»¶ä¸­çš„ SKYWALKING ç¯å¢ƒå˜é‡</p>
<pre><code>SKYWALKING_ENABLE=true
SW_AGENT_COLLECTOR_BACKEND_SERVICES=127.0.0.1:11800
SW_GRPC_LOG_SERVER_HOST=127.0.0.1
SW_GRPC_LOG_SERVER_PORT=11800
</code></pre>
<h2>é™„å½•-ç¯å¢ƒå˜é‡</h2>
<h3>æ•°æ®åº“</h3>
<p><strong><code>DATABASE_TYPE</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>TYPE</code>ï¼Œ é»˜è®¤å€¼ <code>postgresql</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_DRIVER</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>DRIVER</code>ï¼Œ é»˜è®¤å€¼ <code>org.postgresql.Driver</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_HOST</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>HOST</code>ï¼Œ é»˜è®¤å€¼ <code>127.0.0.1</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_PORT</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>PORT</code>ï¼Œ é»˜è®¤å€¼ <code>5432</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_USERNAME</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>USERNAME</code>ï¼Œ é»˜è®¤å€¼ <code>root</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_PASSWORD</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>PASSWORD</code>ï¼Œ é»˜è®¤å€¼ <code>root</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_DATABASE</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>DATABASE</code>ï¼Œ é»˜è®¤å€¼ <code>dolphinscheduler</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>DATABASE_PARAMS</code></strong></p>
<p>é…ç½®<code>database</code>çš„<code>PARAMS</code>ï¼Œ é»˜è®¤å€¼ <code>characterEncoding=utf8</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<h3>ZooKeeper</h3>
<p><strong><code>ZOOKEEPER_QUORUM</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>Zookeeper</code>åœ°å€, é»˜è®¤å€¼ <code>127.0.0.1:2181</code>ã€‚</p>
<p><strong>æ³¨æ„</strong>: å½“è¿è¡Œ<code>dolphinscheduler</code>ä¸­<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>è¿™äº›æœåŠ¡æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿äºä½ æ›´å¥½çš„æ­å»ºåˆ†å¸ƒå¼æœåŠ¡ã€‚</p>
<p><strong><code>ZOOKEEPER_ROOT</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>åœ¨<code>zookeeper</code>ä¸­æ•°æ®å­˜å‚¨çš„æ ¹ç›®å½•ï¼Œé»˜è®¤å€¼ <code>/dolphinscheduler</code>ã€‚</p>
<h3>é€šç”¨</h3>
<p><strong><code>DOLPHINSCHEDULER_OPTS</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>jvm options</code>ï¼Œé€‚ç”¨äº<code>master-server</code>ã€<code>worker-server</code>ã€<code>api-server</code>ã€<code>alert-server</code>ã€<code>logger-server</code>ï¼Œé»˜è®¤å€¼ <code>&quot;&quot;</code>ã€</p>
<p><strong><code>DATA_BASEDIR_PATH</code></strong></p>
<p>ç”¨æˆ·æ•°æ®ç›®å½•, ç”¨æˆ·è‡ªå·±é…ç½®, è¯·ç¡®ä¿è¿™ä¸ªç›®å½•å­˜åœ¨å¹¶ä¸”ç”¨æˆ·è¯»å†™æƒé™ï¼Œ é»˜è®¤å€¼ <code>/tmp/dolphinscheduler</code>ã€‚</p>
<p><strong><code>RESOURCE_STORAGE_TYPE</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„èµ„æºå­˜å‚¨ç±»å‹ï¼Œå¯é€‰é¡¹ä¸º <code>HDFS</code>ã€<code>S3</code>ã€<code>NONE</code>ï¼Œé»˜è®¤å€¼ <code>HDFS</code>ã€‚</p>
<p><strong><code>RESOURCE_UPLOAD_PATH</code></strong></p>
<p>é…ç½®<code>HDFS/S3</code>ä¸Šçš„èµ„æºå­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤å€¼ <code>/dolphinscheduler</code>ã€‚</p>
<p><strong><code>FS_DEFAULT_FS</code></strong></p>
<p>é…ç½®èµ„æºå­˜å‚¨çš„æ–‡ä»¶ç³»ç»Ÿåè®®ï¼Œå¦‚ <code>file:///</code>, <code>hdfs://mycluster:8020</code> or <code>s3a://dolphinscheduler</code>ï¼Œé»˜è®¤å€¼ <code>file:///</code>ã€‚</p>
<p><strong><code>FS_S3A_ENDPOINT</code></strong></p>
<p>å½“<code>RESOURCE_STORAGE_TYPE=S3</code>æ—¶ï¼Œéœ€è¦é…ç½®<code>S3</code>çš„è®¿é—®è·¯å¾„ï¼Œé»˜è®¤å€¼ <code>s3.xxx.amazonaws.com</code>ã€‚</p>
<p><strong><code>FS_S3A_ACCESS_KEY</code></strong></p>
<p>å½“<code>RESOURCE_STORAGE_TYPE=S3</code>æ—¶ï¼Œéœ€è¦é…ç½®<code>S3</code>çš„<code>s3 access key</code>ï¼Œé»˜è®¤å€¼ <code>xxxxxxx</code>ã€‚</p>
<p><strong><code>FS_S3A_SECRET_KEY</code></strong></p>
<p>å½“<code>RESOURCE_STORAGE_TYPE=S3</code>æ—¶ï¼Œéœ€è¦é…ç½®<code>S3</code>çš„<code>s3 secret key</code>ï¼Œé»˜è®¤å€¼ <code>xxxxxxx</code>ã€‚</p>
<p><strong><code>HADOOP_SECURITY_AUTHENTICATION_STARTUP_STATE</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>æ˜¯å¦å¯ç”¨kerberosï¼Œé»˜è®¤å€¼ <code>false</code>ã€‚</p>
<p><strong><code>JAVA_SECURITY_KRB5_CONF_PATH</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„java.security.krb5.confè·¯å¾„ï¼Œé»˜è®¤å€¼ <code>/opt/krb5.conf</code>ã€‚</p>
<p><strong><code>LOGIN_USER_KEYTAB_USERNAME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>ç™»å½•ç”¨æˆ·çš„keytabç”¨æˆ·åï¼Œé»˜è®¤å€¼ <code>hdfs@HADOOP.COM</code>ã€‚</p>
<p><strong><code>LOGIN_USER_KEYTAB_PATH</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>ç™»å½•ç”¨æˆ·çš„keytabè·¯å¾„ï¼Œé»˜è®¤å€¼ <code>/opt/hdfs.keytab</code>ã€‚</p>
<p><strong><code>KERBEROS_EXPIRE_TIME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„kerberosè¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºå°æ—¶ï¼Œé»˜è®¤å€¼ <code>2</code>ã€‚</p>
<p><strong><code>HDFS_ROOT_USER</code></strong></p>
<p>å½“<code>RESOURCE_STORAGE_TYPE=HDFS</code>æ—¶ï¼Œé…ç½®<code>dolphinscheduler</code>çš„hdfsçš„rootç”¨æˆ·åï¼Œé»˜è®¤å€¼ <code>hdfs</code>ã€‚</p>
<p><strong><code>RESOURCE_MANAGER_HTTPADDRESS_PORT</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„resource manager httpaddress ç«¯å£ï¼Œé»˜è®¤å€¼ <code>8088</code>ã€‚</p>
<p><strong><code>YARN_RESOURCEMANAGER_HA_RM_IDS</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„yarn resourcemanager ha rm idsï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>YARN_APPLICATION_STATUS_ADDRESS</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„yarn application statusåœ°å€ï¼Œé»˜è®¤å€¼ <code>http://ds1:%s/ws/v1/cluster/apps/%s</code>ã€‚</p>
<p><strong><code>SKYWALKING_ENABLE</code></strong></p>
<p>é…ç½®<code>skywalking</code>æ˜¯å¦å¯ç”¨. é»˜è®¤å€¼ <code>false</code>ã€‚</p>
<p><strong><code>SW_AGENT_COLLECTOR_BACKEND_SERVICES</code></strong></p>
<p>é…ç½®<code>skywalking</code>çš„collectoråç«¯åœ°å€. é»˜è®¤å€¼ <code>127.0.0.1:11800</code>ã€‚</p>
<p><strong><code>SW_GRPC_LOG_SERVER_HOST</code></strong></p>
<p>é…ç½®<code>skywalking</code>çš„grpcæœåŠ¡ä¸»æœºæˆ–IP. é»˜è®¤å€¼ <code>127.0.0.1</code>ã€‚</p>
<p><strong><code>SW_GRPC_LOG_SERVER_PORT</code></strong></p>
<p>é…ç½®<code>skywalking</code>çš„grpcæœåŠ¡ç«¯å£. é»˜è®¤å€¼ <code>11800</code>ã€‚</p>
<p><strong><code>HADOOP_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>HADOOP_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/hadoop</code>ã€‚</p>
<p><strong><code>HADOOP_CONF_DIR</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>HADOOP_CONF_DIR</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/hadoop/etc/hadoop</code>ã€‚</p>
<p><strong><code>SPARK_HOME1</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>SPARK_HOME1</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/spark1</code>ã€‚</p>
<p><strong><code>SPARK_HOME2</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>SPARK_HOME2</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/spark2</code>ã€‚</p>
<p><strong><code>PYTHON_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>PYTHON_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/usr/bin/python</code>ã€‚</p>
<p><strong><code>JAVA_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>JAVA_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/usr/local/openjdk-8</code>ã€‚</p>
<p><strong><code>HIVE_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>HIVE_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/hive</code>ã€‚</p>
<p><strong><code>FLINK_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>FLINK_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/flink</code>ã€‚</p>
<p><strong><code>DATAX_HOME</code></strong></p>
<p>é…ç½®<code>dolphinscheduler</code>çš„<code>DATAX_HOME</code>ï¼Œé»˜è®¤å€¼ <code>/opt/soft/datax</code>ã€‚</p>
<h3>Master Server</h3>
<p><strong><code>MASTER_SERVER_OPTS</code></strong></p>
<p>é…ç½®<code>master-server</code>çš„<code>jvm options</code>ï¼Œé»˜è®¤å€¼ <code>-Xms1g -Xmx1g -Xmn512m</code>ã€‚</p>
<p><strong><code>MASTER_EXEC_THREADS</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„æ‰§è¡Œçº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤å€¼ <code>100</code>ã€‚</p>
<p><strong><code>MASTER_EXEC_TASK_NUM</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„æ‰§è¡Œä»»åŠ¡æ•°é‡ï¼Œé»˜è®¤å€¼ <code>20</code>ã€‚</p>
<p><strong><code>MASTER_DISPATCH_TASK_NUM</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„æ´¾å‘ä»»åŠ¡æ•°é‡ï¼Œé»˜è®¤å€¼ <code>3</code>ã€‚</p>
<p><strong><code>MASTER_HOST_SELECTOR</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­æ´¾å‘ä»»åŠ¡æ—¶worker hostçš„é€‰æ‹©å™¨ï¼Œå¯é€‰å€¼ä¸º<code>Random</code>, <code>RoundRobin</code>å’Œ<code>LowerWeight</code>ï¼Œé»˜è®¤å€¼ <code>LowerWeight</code>ã€‚</p>
<p><strong><code>MASTER_HEARTBEAT_INTERVAL</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„å¿ƒè·³äº¤äº’æ—¶é—´ï¼Œé»˜è®¤å€¼ <code>10</code>ã€‚</p>
<p><strong><code>MASTER_TASK_COMMIT_RETRYTIMES</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„ä»»åŠ¡æäº¤é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤å€¼ <code>5</code>ã€‚</p>
<p><strong><code>MASTER_TASK_COMMIT_INTERVAL</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„ä»»åŠ¡æäº¤äº¤äº’æ—¶é—´ï¼Œé»˜è®¤å€¼ <code>1</code>ã€‚</p>
<p><strong><code>MASTER_MAX_CPULOAD_AVG</code></strong></p>
<p>é…ç½®<code>master-server</code>ä¸­çš„CPUä¸­çš„<code>load average</code>å€¼ï¼Œé»˜è®¤å€¼ <code>-1</code>ã€‚</p>
<p><strong><code>MASTER_RESERVED_MEMORY</code></strong></p>
<p>é…ç½®<code>master-server</code>çš„ä¿ç•™å†…å­˜ï¼Œå•ä½ä¸ºGï¼Œé»˜è®¤å€¼ <code>0.3</code>ã€‚</p>
<h3>Worker Server</h3>
<p><strong><code>WORKER_SERVER_OPTS</code></strong></p>
<p>é…ç½®<code>worker-server</code>çš„<code>jvm options</code>ï¼Œé»˜è®¤å€¼ <code>-Xms1g -Xmx1g -Xmn512m</code>ã€‚</p>
<p><strong><code>WORKER_EXEC_THREADS</code></strong></p>
<p>é…ç½®<code>worker-server</code>ä¸­çš„æ‰§è¡Œçº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤å€¼ <code>100</code>ã€‚</p>
<p><strong><code>WORKER_HEARTBEAT_INTERVAL</code></strong></p>
<p>é…ç½®<code>worker-server</code>ä¸­çš„å¿ƒè·³äº¤äº’æ—¶é—´ï¼Œé»˜è®¤å€¼ <code>10</code>ã€‚</p>
<p><strong><code>WORKER_MAX_CPULOAD_AVG</code></strong></p>
<p>é…ç½®<code>worker-server</code>ä¸­çš„CPUä¸­çš„æœ€å¤§<code>load average</code>å€¼ï¼Œé»˜è®¤å€¼ <code>-1</code>ã€‚</p>
<p><strong><code>WORKER_RESERVED_MEMORY</code></strong></p>
<p>é…ç½®<code>worker-server</code>çš„ä¿ç•™å†…å­˜ï¼Œå•ä½ä¸ºGï¼Œé»˜è®¤å€¼ <code>0.3</code>ã€‚</p>
<p><strong><code>WORKER_GROUPS</code></strong></p>
<p>é…ç½®<code>worker-server</code>çš„åˆ†ç»„ï¼Œé»˜è®¤å€¼ <code>default</code>ã€‚</p>
<h3>Alert Server</h3>
<p><strong><code>ALERT_SERVER_OPTS</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„<code>jvm options</code>ï¼Œé»˜è®¤å€¼ <code>-Xms512m -Xmx512m -Xmn256m</code>ã€‚</p>
<p><strong><code>XLS_FILE_PATH</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„<code>XLS</code>æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤å€¼ <code>/tmp/xls</code>ã€‚</p>
<p><strong><code>MAIL_SERVER_HOST</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡åœ°å€ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>MAIL_SERVER_PORT</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ç«¯å£ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>MAIL_SENDER</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶å‘é€äººï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>MAIL_USER=</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ç”¨æˆ·åï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>MAIL_PASSWD</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ç”¨æˆ·å¯†ç ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>MAIL_SMTP_STARTTLS_ENABLE</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡æ˜¯å¦å¯ç”¨TLSï¼Œé»˜è®¤å€¼ <code>true</code>ã€‚</p>
<p><strong><code>MAIL_SMTP_SSL_ENABLE</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡æ˜¯å¦å¯ç”¨SSLï¼Œé»˜è®¤å€¼ <code>false</code>ã€‚</p>
<p><strong><code>MAIL_SMTP_SSL_TRUST</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡SSLçš„ä¿¡ä»»åœ°å€ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>ENTERPRISE_WECHAT_ENABLE</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡æ˜¯å¦å¯ç”¨ä¼ä¸šå¾®ä¿¡ï¼Œé»˜è®¤å€¼ <code>false</code>ã€‚</p>
<p><strong><code>ENTERPRISE_WECHAT_CORP_ID</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ä¼ä¸šå¾®ä¿¡<code>ID</code>ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>ENTERPRISE_WECHAT_SECRET</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ä¼ä¸šå¾®ä¿¡<code>SECRET</code>ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>ENTERPRISE_WECHAT_AGENT_ID</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ä¼ä¸šå¾®ä¿¡<code>AGENT_ID</code>ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<p><strong><code>ENTERPRISE_WECHAT_USERS</code></strong></p>
<p>é…ç½®<code>alert-server</code>çš„é‚®ä»¶æœåŠ¡ä¼ä¸šå¾®ä¿¡<code>USERS</code>ï¼Œé»˜è®¤å€¼ <code>ç©º</code>ã€‚</p>
<h3>Api Server</h3>
<p><strong><code>API_SERVER_OPTS</code></strong></p>
<p>é…ç½®<code>api-server</code>çš„<code>jvm options</code>ï¼Œé»˜è®¤å€¼ <code>-Xms512m -Xmx512m -Xmn256m</code>ã€‚</p>
<h3>Logger Server</h3>
<p><strong><code>LOGGER_SERVER_OPTS</code></strong></p>
<p>é…ç½®<code>logger-server</code>çš„<code>jvm options</code>ï¼Œé»˜è®¤å€¼ <code>-Xms512m -Xmx512m -Xmn256m</code>ã€‚</p>
</div></section><footer class="footer-container"><div class="footer-body"><div><h3>è”ç³»æˆ‘ä»¬</h3><h4>æœ‰é—®é¢˜éœ€è¦åé¦ˆï¼Ÿè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ã€‚</h4></div><div class="contact-container"><ul><li><a href="/zh-cn/community/development/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>é‚®ä»¶åˆ—è¡¨</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li><li><a href="https://stackoverflow.com/questions/tagged/apache-dolphinscheduler"><img class="img-base" src="/img/stackoverflow.png"/><img class="img-change" src="/img/stackoverflow-selected.png"/><p>Stack Overflow</p></a></li><li><a href="https://s.apache.org/dolphinscheduler-slack"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li></ul></div><div class="cols-container"><div class="docu-container"><h4>æ–‡æ¡£</h4><ul><li><a href="/zh-cn/development/architecture-design.html"><p>æ¦‚è§ˆ</p></a></li><li><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html"><p>å¿«é€Ÿå¼€å§‹</p></a></li><li><a href="/zh-cn/development/development-environment-setup.html"><p>å¼€å‘è€…æŒ‡å—</p></a></li></ul></div><div></div><div class="asf-container"><h4>ASF</h4><ul><li><a href="http://www.apache.org"><p>åŸºé‡‘ä¼š</p></a></li><li><a href="http://www.apache.org/licenses/"><p>è¯ä¹¦</p></a></li><li><a href="http://www.apache.org/events/current-event"><p>äº‹ä»¶</p></a></li><li><a href="http://www.apache.org/foundation/sponsorship.html"><p>èµåŠ©</p></a></li><li><a href="http://www.apache.org/foundation/thanks.html"><p>è‡´è°¢</p></a></li></ul></div></div><div class="copyright"><span>Copyright Â© 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="/asset/js/react/react-with-addons.min.js"></script>
  <script src="/asset/js/react/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.3e36ada.js"></script>
  <script src="/build/docs.md.000d526.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d6bc736fd9885d9a5dc938425ac062ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>