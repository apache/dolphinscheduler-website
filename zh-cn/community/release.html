<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="release">
  <meta name="description" content="release">
  <title>release</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.23870e5.css">
</head>
<body>
  <div id="root"><div class="md2html community-page" data-reactroot=""><header class="header-container header-container-dark"><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">En</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html" target="_self">文档</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">下载</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">开发者</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-selected" role="menuitem"><a href="/zh-cn/community/team.html" target="_self">社区</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/user/index.html" target="_self">用户</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/index.html" target="_self">首页</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/docs/latest/user_doc/guide/quick-start.html" target="_self">文档</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html" target="_self">最新版本latest(2.0.5)</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/1.3.9/user_doc/quick-start.html" target="_self">1.3.9</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/release/history-versions.html" target="_self">历史版本</a></div><div class="mobile-sub-menu-item"><a href="/python/index.html" target="_self">PyDolphinScheduler</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/dev/user_doc/about/introduction.html" target="_self">dev</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/download/download.html" target="_self">下载</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/blog/index.html" target="_self">博客</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/development/development-environment-setup.html" target="_self">开发者</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/community/team.html" target="_self">社区</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/user/index.html" target="_self">用户</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>团队</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/team.html" target="_self">团队介绍</a></li></ul></li><li class="menu-item menu-item-level-1"><span>安全</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/security.html" target="_self">安全介绍</a></li></ul></li><li class="menu-item menu-item-level-1"><span>发版指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/release-prepare.html" target="_self">发版准备</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/release.html" target="_self">发版指南</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/release-post.html" target="_self">发版后续</a></li></ul></li><li class="menu-item menu-item-level-1"><span>贡献指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/become-a-committer.html" target="_self">如何成为DolphinScheduler Committer</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/subscribe.html" target="_self">订阅/取消订阅邮件列表</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/contribute.html" target="_self">参与贡献</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/code-conduct.html" target="_self">行为准则</a></li></ul></li><li class="menu-item menu-item-level-1"><span>参与社区</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/join/review.html" target="_self">Review Issue or Pull Requests</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/join/e2e-guide.html" target="_self">E2E Contribution Guide</a></li></ul></li><li class="menu-item menu-item-level-1"><span>提交者指南</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/submit-code.html" target="_self">提交代码</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/DS-License.html" target="_self">License须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/document.html" target="_self">文档须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/issue.html" target="_self">Issue须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/pull-request.html" target="_self">Pull Request须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/commit-message.html" target="_self">Commit Message须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/microbench.html" target="_self">微基准测试须知</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/development/unit-test.html" target="_self">单元测试编写指南</a></li></ul></li><li class="menu-item menu-item-level-1"><span>DSIP</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/community/DSIP.html" target="_self">DSIP</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>发版指南</h1>
<h2>GPG设置</h2>
<h3>安装GPG</h3>
<p>在<a href="https://www.gnupg.org/download/index.html">GnuPG官网</a>下载安装包。
GnuPG的1.x版本和2.x版本的命令有细微差别，下列说明以<code>GnuPG-2.1.23</code>版本为例。</p>
<p>安装完成后，执行以下命令查看版本号。</p>
<pre><code class="language-shell">gpg --version
</code></pre>
<h3>创建key</h3>
<p>安装完成后，执行以下命令创建key。</p>
<p><code>GnuPG-2.x</code>可使用：</p>
<pre><code class="language-shell">gpg --full-gen-key
</code></pre>
<p><code>GnuPG-1.x</code>可使用：</p>
<pre><code class="language-shell">gpg --gen-key
</code></pre>
<p>根据提示完成key：</p>
<p><strong>注意：请使用Apache mail生成GPG的Key。</strong></p>
<pre><code class="language-shell">gpg (GnuPG) 2.0.12; Copyright (C) 2009 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
  (1) RSA and RSA (default)
  (2) DSA and Elgamal
  (3) DSA (sign only)
  (4) RSA (sign only)
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 4096
Requested keysize is 4096 bits
Please specify how long the key should be valid.
        0 = key does not expire
     &lt;n&gt;  = key expires in n days
     &lt;n&gt;w = key expires in n weeks
     &lt;n&gt;m = key expires in n months
     &lt;n&gt;y = key expires in n years
Key is valid for? (0)
Key does not expire at all
Is this correct? (y/N) y

GnuPG needs to construct a user ID to identify your key.

Real name: ${输入用户名}
Email address: ${输入邮件地址}
Comment: ${输入注释}
You selected this USER-ID:
   &quot;${输入的用户名} (${输入的注释}) &lt;${输入的邮件地址}&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key. # 输入apache登录密码
</code></pre>
<p>注意：如果遇到以下错误：</p>
<pre><code>gpg: cancelled by user
gpg: Key generation canceled.
</code></pre>
<p>需要使用自己的用户登录服务器，而不是root切到自己的账户</p>
<h3>查看生成的key</h3>
<pre><code class="language-shell">gpg --list-keys
</code></pre>
<p>执行结果：</p>
<pre><code class="language-shell">pub   4096R/85E11560 2019-11-15
uid                  ${用户名} (${注释}) &lt;{邮件地址}&gt;
sub   4096R/A63BC462 2019-11-15
</code></pre>
<p>其中85E11560为公钥ID。</p>
<h3>将公钥同步到服务器</h3>
<p>命令如下：</p>
<pre><code class="language-shell">gpg --keyserver hkp://pool.sks-keyservers.net --send-key 85E11560
</code></pre>
<p><code>pool.sks-keyservers.net</code>为随意挑选的<a href="https://sks-keyservers.net/status/">公钥服务器</a>，每个服务器之间是自动同步的，选任意一个即可。</p>
<p>注意：如果同步到公钥服务器，可以在服务器上查到新建的公钥
<a href="http://keyserver.ubuntu.com:11371/pks/lookup?search=$%7B%E7%94%A8%E6%88%B7%E5%90%8D%7D&amp;fingerprint=on&amp;op=index">http://keyserver.ubuntu.com:11371/pks/lookup?search=${用户名}&amp;fingerprint=on&amp;op=index</a>
备用公钥服务器 gpg --keyserver hkp://keyserver.ubuntu.com --send-key ${公钥ID}</p>
<h2>发布Apache Maven中央仓库</h2>
<h3>设置settings.xml文件</h3>
<p>将以下模板添加到 <code>~/.m2/settings.xml</code>中，所有密码需要加密后再填入。
加密设置可参考<a href="http://maven.apache.org/guides/mini/guide-encryption.html">这里</a>。</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">servers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>apache.snapshots.https<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span> <span class="hljs-comment">&lt;!-- APACHE LDAP 用户名 --&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span> <span class="hljs-comment">&lt;!-- APACHE LDAP 加密后的密码 --&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>apache.releases.https<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span> <span class="hljs-comment">&lt;!-- APACHE LDAP 用户名 --&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span> <span class="hljs-comment">&lt;!-- APACHE LDAP 加密后的密码 --&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">servers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<h3>更新版本说明</h3>
<pre><code>https://github.com/apache/dolphinscheduler/releases
</code></pre>
<h3>创建发布分支</h3>
<p>从github下载的DolphinScheduler源代码到<code>~/dolphinscheduler/</code>目录，假设即将发布的版本为<code>${RELEASE.VERSION}</code>
git clone -b ${RELEASE.VERSION}-release <a href="https://github.com/apache/dolphinscheduler.git">https://github.com/apache/dolphinscheduler.git</a></p>
<p>创建<code>${RELEASE.VERSION}-release</code>分支，接下来的操作都在该分支进行(如果在github官网上手动执行发版分支创建，下面操作可以忽略)。</p>
<pre><code class="language-shell">cd ~/dolphinscheduler/
git pull
git checkout -b ${RELEASE.VERSION}-release
git push origin ${RELEASE.VERSION}-release
</code></pre>
<h3>发布预校验</h3>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 保证 python profile 的 gpg 可以正常运行</span>
export GPG_TTY=$(tty)
<span class="hljs-meta">
#</span><span class="bash"> 运行发版校验</span>
mvn release:prepare -Prelease,python -Darguments=&quot;-DskipTests&quot; -DautoVersionSubmodules=true -DdryRun=true -Dusername=${Github用户名}
</code></pre>
<p>-Prelease,python: 选择release和python的profile，这个profile会打包所有源码、jar文件以及可执行二进制包，以及Python的二进制包。</p>
<p>-DautoVersionSubmodules=true：作用是发布过程中版本号只需要输入一次，不必为每个子模块都输入一次。</p>
<p>-DdryRun=true：演练，即不产生版本号提交，不生成新的tag。</p>
<h3>准备发布</h3>
<p>首先清理发布预校验本地信息。</p>
<pre><code class="language-shell">mvn release:clean
</code></pre>
<p>然后准备执行发布。</p>
<pre><code class="language-shell">mvn release:prepare -Prelease,python -Darguments=&quot;-DskipTests&quot; -DautoVersionSubmodules=true -DpushChanges=false -Dusername=${Github用户名}
</code></pre>
<p>和上一步演练的命令基本相同，去掉了-DdryRun=true参数。</p>
<p>-DpushChanges=false：不要将修改后的版本号和tag自动提交至GitHub。
如果遇到以下错误，请配置git邮箱为自己的apache邮箱和apache账号名</p>
<pre><code class="language-shell">[ERROR] *** Please tell me who you are.
[ERROR]
[ERROR] Run
[ERROR]
[ERROR]   git config --global user.email &quot;you@example.com&quot;
[ERROR]   git config --global user.name &quot;Your Name&quot;
</code></pre>
<p>将本地文件检查无误后，提交至github。</p>
<pre><code class="language-shell">git push
git push origin --tags
</code></pre>
<h3>部署发布</h3>
<pre><code class="language-shell">mvn release:perform -Prelease,python -Darguments=&quot;-DskipTests&quot; -DautoVersionSubmodules=true -Dusername=${Github用户名}
</code></pre>
<p>执行完该命令后，待发布版本会自动上传到Apache的临时筹备仓库(staging repository)。
访问https://repository.apache.org/#stagingRepositories, 使用Apache的LDAP账户登录后，就会看到上传的版本，<code>Repository</code>列的内容即为${STAGING.REPOSITORY}。
点击<code>Close</code>来告诉Nexus这个构建已经完成，只有这样该版本才是可用的。
如果电子签名等出现问题，<code>Close</code>会失败，可以通过<code>Activity</code>查看失败信息。</p>
<h2>发布Apache SVN仓库</h2>
<h3>检出dolphinscheduler发布目录</h3>
<p>如无本地工作目录，则先创建本地工作目录。</p>
<pre><code class="language-shell">mkdir -p ~/ds_svn/dev/
cd ~/ds_svn/dev/
</code></pre>
<p>创建完毕后，从Apache SVN检出dolphinscheduler发布目录。</p>
<pre><code class="language-shell">svn --username=${APACHE LDAP 用户名} co https://dist.apache.org/repos/dist/dev/dolphinscheduler
cd ~/ds_svn/dev/dolphinscheduler
</code></pre>
<h3>添加gpg公钥</h3>
<p>仅第一次部署的账号需要添加，只要<code>KEYS</code>中包含已经部署过的账户的公钥即可。</p>
<pre><code class="language-shell">gpg -a --export ${GPG用户名} &gt;&gt; KEYS
</code></pre>
<h3>将待发布的内容添加至SVN目录</h3>
<p>创建版本号目录。</p>
<pre><code class="language-shell">mkdir -p ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}
cd ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}
</code></pre>
<p>将源码包和二进制包添加至SVN工作目录。</p>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 主程序源码包和二进制包</span>
cp -f ~/dolphinscheduler/dolphinscheduler-dist/target/*.tar.gz ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}
cp -f ~/dolphinscheduler/dolphinscheduler-dist/target/*.tar.gz.asc ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}
<span class="hljs-meta">
#</span><span class="bash"> Python API 源码和二进制包</span>
mkdir -p ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}/python
cp -f ~/dolphinscheduler/dolphinscheduler-dist/target/python/* ~/ds_svn/dev/dolphinscheduler/${RELEASE.VERSION}/python
</code></pre>
<h3>生成文件签名</h3>
<pre><code class="language-shell">shasum -a 512 apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz &gt;&gt; apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz.sha512
shasum -b -a 512 apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz &gt;&gt; apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz.sha512
shasum -a 512 python/apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz &gt;&gt; python/apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz.sha512
shasum -b -a 512 python/apache_dolphinscheduler-${RELEASE.VERSION}-py3-none-any.whl &gt;&gt; python/apache_dolphinscheduler-${RELEASE.VERSION}-py3-none-any.whl.sha512
</code></pre>
<h3>提交Apache SVN</h3>
<pre><code class="language-shell">cd ~/ds_svn/dev/dolphinscheduler
svn add *
svn --username=${APACHE LDAP 用户名} commit -m &quot;release ${RELEASE.VERSION}&quot;
</code></pre>
<h2>检查发布结果</h2>
<h3>检查sha512哈希</h3>
<pre><code class="language-shell">shasum -c apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz.sha512
shasum -c apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz.sha512
shasum -c python/apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz.sha512
shasum -c python/apache_dolphinscheduler-${RELEASE.VERSION}-py3-none-any.whl.sha512
</code></pre>
<h3>检查gpg签名</h3>
<p>首先导入发布人公钥。从svn仓库导入KEYS到本地环境。（发布版本的人不需要再导入，帮助做验证的人需要导入，用户名填发版人的即可）</p>
<pre><code class="language-shell">curl https://dist.apache.org/repos/dist/dev/dolphinscheduler/KEYS &gt;&gt; KEYS
gpg --import KEYS
gpg --edit-key &quot;${发布人的gpg用户名}&quot;
<span class="hljs-meta">  &gt;</span><span class="bash"> trust</span>

Please decide how far you trust this user to correctly verify other users&#x27; keys
(by looking at passports, checking fingerprints from different sources, etc.)

  1 = I don&#x27;t know or won&#x27;t say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 5
<span class="hljs-meta">
  &gt;</span><span class="bash"> save</span>
</code></pre>
<p>然后进行gpg签名检查。</p>
<pre><code class="language-shell">gpg --verify apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz.asc apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz
gpg --verify apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz.asc apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz
gpg --verify python/apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz.asc python/apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz
gpg --verify python/apache_dolphinscheduler-${RELEASE.VERSION}-py3-none-any.whl.asc python/apache_dolphinscheduler-${RELEASE.VERSION}-py3-none-any.whl
</code></pre>
<h3>检查发布文件内容</h3>
<h4>检查源码包的文件内容</h4>
<p>解压缩<code>apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz</code>以及Python文件夹下的<code>apache-dolphinscheduler-${RELEASE.VERSION}.tar.gz</code>，进行如下检查:</p>
<ul>
<li>检查源码包是否包含由于包含不必要文件，致使tarball过于庞大</li>
<li>存在<code>LICENSE</code>和<code>NOTICE</code>文件</li>
<li>只存在文本文件，不存在二进制文件</li>
<li>所有文件的开头都有ASF许可证</li>
<li>能够正确编译，单元测试可以通过 (mvn install)</li>
<li>版本内容与GitHub上tag的内容相符 (diff -r a verify_dir tag_dir)</li>
<li>检查是否有多余文件或文件夹，例如空文件夹等</li>
</ul>
<h4>检查二进制包的文件内容</h4>
<p>解压缩<code>apache-dolphinscheduler-${RELEASE.VERSION}-src.tar.gz</code>和<code>apache-dolphinscheduler-${RELEASE.VERSION}-bin.tar.gz</code>
进行如下检查:</p>
<ul>
<li>存在<code>LICENSE</code>和<code>NOTICE</code>文件</li>
<li>所有文本文件开头都有ASF许可证</li>
<li>检查第三方依赖许可证：
<ul>
<li>第三方依赖的许可证兼容</li>
<li>所有第三方依赖的许可证都在<code>LICENSE</code>文件中声明</li>
<li>依赖许可证的完整版全部在<code>license</code>目录</li>
<li>如果依赖的是Apache许可证并且存在<code>NOTICE</code>文件，那么这些<code>NOTICE</code>文件也需要加入到版本的<code>NOTICE</code>文件中</li>
</ul>
</li>
</ul>
<h2>发起投票</h2>
<h3>投票阶段</h3>
<ol>
<li>
<p>DolphinScheduler社区投票，发起投票邮件到<code>dev@dolphinscheduler.apache.org</code>。PMC需要先按照文档检查版本的正确性，然后再进行投票。
经过至少72小时并统计到至少3个<code>+1 并且没有-1 PMC member</code>票后，即可进入下一阶段。</p>
</li>
<li>
<p>宣布投票结果,发起投票结果邮件到<code>dev@dolphinscheduler.apache.org</code>。</p>
</li>
</ol>
<h3>投票模板</h3>
<ol>
<li>DolphinScheduler社区投票模板</li>
</ol>
<p>标题：</p>
<pre><code>[VOTE] Release Apache DolphinScheduler ${RELEASE.VERSION}
</code></pre>
<p>正文：</p>
<pre><code>Hello DolphinScheduler Community,

This is a call for vote to release Apache DolphinScheduler version ${RELEASE.VERSION}

Release notes:
https://dist.apache.org/repos/dist/dev/dolphinscheduler/${RELEASE.VERSION}/ReleaseNotes.md

The release candidates:
https://dist.apache.org/repos/dist/dev/dolphinscheduler/${RELEASE.VERSION}/

Maven 2 staging repository:
https://repository.apache.org/content/repositories/${STAGING.REPOSITORY}/org/apache/dolphinscheduler/

Git tag for the release:
https://github.com/apache/dolphinscheduler/tree/${RELEASE.VERSION}

Release Commit ID:
https://github.com/apache/dolphinscheduler/commit/xxxxxxxxxxxxxxxxxxxxxxx

Keys to verify the Release Candidate:
https://dist.apache.org/repos/dist/dev/dolphinscheduler/KEYS

Look at here for how to verify this release candidate:
https://github.com/apache/dolphinscheduler/blob/1.2.0-release/README.md

The vote will be open for at least 72 hours or until necessary number of votes are reached.

Please vote accordingly:

[ ] +1 approve

[ ] +0 no opinion

[ ] -1 disapprove with the reason

Checklist for reference:

[ ] Download links are valid.

[ ] Checksums and PGP signatures are valid.

[ ] Source code artifacts have correct names matching the current release.

[ ] LICENSE and NOTICE files are correct for each DolphinScheduler repo.

[ ] All files have license headers if necessary.

[ ] No compiled archives bundled in source archive.

</code></pre>
<p>2.宣布投票结果模板</p>
<p>正文：</p>
<pre><code>The vote to release Apache DolphinScheduler ${RELEASE.VERSION} has passed.Here is the vote result,

4 PMC member +1 votes:

xxx 
xxx
xxx
xxx

1 community +1 vote:
xxx

Thanks everyone for taking time to check this release and help us.
</code></pre>
<h2>完成发布</h2>
<p>1.将源码和二进制包从svn的dev目录移动到release目录</p>
<pre><code class="language-shell">svn mv https://dist.apache.org/repos/dist/dev/dolphinscheduler/${RELEASE.VERSION} https://dist.apache.org/repos/dist/release/dolphinscheduler/
</code></pre>
<p>2.在Apache Staging仓库找到DolphinScheduler并点击<code>Release</code></p>
<p>3.发送公告邮件通知社区</p>
<p>当完成了上述的发版流程后，需要发送一封公告邮件给社区。你需要将邮件发送到 <code>dev@dolphinscheduler.apache.org</code> 并抄送到 <code>announce@apache.org</code>。</p>
<p>通知邮件模板如下：</p>
<p>标题：</p>
<pre><code>[ANNOUNCE] Release Apache DolphinScheduler ${RELEASE.VERSION}
</code></pre>
<p>正文：</p>
<pre><code>Hi all,

We are glad to announce the release of Apache DolphinScheduler ${RELEASE.VERSION}. Once again I would like to express my thanks to your help.

Dolphin Scheduler is a distributed and easy-to-extend visual workflow scheduler system,
dedicated to solving the complex task dependencies in data processing, making the scheduler system out of the box for data processing.


Download Links: https://dolphinscheduler.apache.org/en-us/download/download.html

Release Notes: https://dist.apache.org/repos/dist/dev/dolphinscheduler/${RELEASE.VERSION}/ReleaseNotes.md

Website: https://dolphinscheduler.apache.org/

DolphinScheduler Resources:
- Issue: https://github.com/apache/dolphinscheduler/issues/
- Mailing list: dev@dolphinscheduler.apache.org
- Documents: https://github.com/apache/dolphinscheduler/blob/${RELEASE.VERSION}/README.md

</code></pre>
</div></section><footer class="footer-container"><div class="footer-body"><div><h3>联系我们</h3><h4>有问题需要反馈？请通过以下方式联系我们。</h4></div><div class="contact-container"><ul><li><a href="/zh-cn/community/development/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>邮件列表</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li><li><a href="https://stackoverflow.com/questions/tagged/apache-dolphinscheduler"><img class="img-base" src="/img/stackoverflow.png"/><img class="img-change" src="/img/stackoverflow-selected.png"/><p>Stack Overflow</p></a></li><li><a href="https://join.slack.com/t/asf-dolphinscheduler/shared_invite/zt-omtdhuio-_JISsxYhiVsltmC5h38yfw"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li></ul></div><div class="cols-container"><div class="docu-container"><h4>文档</h4><ul><li><a href="/zh-cn/development/architecture-design.html"><p>概览</p></a></li><li><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html"><p>快速开始</p></a></li><li><a href="/zh-cn/development/development-environment-setup.html"><p>开发者指南</p></a></li></ul></div><div></div><div class="asf-container"><h4>ASF</h4><ul><li><a href="http://www.apache.org"><p>基金会</p></a></li><li><a href="http://www.apache.org/licenses/"><p>证书</p></a></li><li><a href="http://www.apache.org/events/current-event"><p>事件</p></a></li><li><a href="http://www.apache.org/foundation/sponsorship.html"><p>赞助</p></a></li><li><a href="http://www.apache.org/foundation/thanks.html"><p>致谢</p></a></li></ul></div></div><div class="copyright"><span>Copyright © 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="//cdn.jsdelivr.net/npm/react@15.6.2/dist/react-with-addons.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/react-dom@15.6.2/dist/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.90dcf97.js"></script>
  <script src="/build/community.md.4b2dc90.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4e7b4b400dd31fa015018a435c64d06f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>