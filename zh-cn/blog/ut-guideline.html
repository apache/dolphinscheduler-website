<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="ut-guideline">
  <meta name="description" content="ut-guideline">
  <title>ut-guideline</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.eeae4ed.css">
  <link rel="stylesheet" href="/build/blog.md.055b3f1.css">
</head>
<body>
  <div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-dark"><div class="banner-tips"><div>ğŸ¤” æœ‰å…³äº Apache DolphinScheduler çš„ç–‘é—®ï¼ŒåŠ å…¥ Slack é¢‘é“æ¥è®¨è®ºä»–ä»¬ <a class="link-tips" href="https://s.apache.org/dolphinscheduler-slack">join #dolphinscheduler channel</a>! ğŸŒŸ</div></div><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">En</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-selected" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æœ€æ–°ç‰ˆæœ¬latest(3.0.0-beta-2)</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/1.3.9/user_doc/quick-start.html" target="_self">1.3.9</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/release/history-versions.html" target="_self">å†å²ç‰ˆæœ¬</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="blog-content markdown-body"><h1>Unit Test Guideline</h1>
<blockquote>
<p>éƒ¨åˆ†å†…å®¹å‚è€ƒè‡ªã€ŠUnit Testing Principles, Practices, and Patternsã€‹</p>
</blockquote>
<h2>1. å•å…ƒæµ‹è¯•æ¶æ„</h2>
<h3>1.1 å¦‚ä½•æ„å»ºå•å…ƒæµ‹è¯•ï¼Ÿ</h3>
<blockquote>
<p>æœ¬èŠ‚å°†å±•ç¤ºå¦‚ä½•é€šè¿‡ 3A åŸåˆ™æ¥æ„å»ºå•å…ƒæµ‹è¯•ï¼Œåº”å½“é¿å…å“ªäº›ç¼ºé™·ï¼Œä»¥åŠå¦‚ä½•ä½¿æµ‹è¯•æ›´å…·æœ‰å¯è¯»æ€§ã€‚</p>
</blockquote>
<h4>1.1.1 3A åŸåˆ™</h4>
<p>3A åŸåˆ™ç®€å•æ˜“æ‡‚ï¼Œå®ƒä¸ºå¥—ä»¶ä¸­çš„æ‰€æœ‰æµ‹è¯•æä¾›äº†ç»Ÿä¸€çš„ç»“æ„ï¼Œè¿™ç§ç»Ÿä¸€çš„ç»“æ„æ˜¯å…¶æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ï¼šä¸€æ—¦ä¹ æƒ¯äº†è¿™ç§æ¨¡å¼ï¼Œå°±å¯ä»¥æ›´è½»æ¾åœ°é˜…è¯»å’Œç†è§£æµ‹è¯•ï¼Œè¿™åè¿‡æ¥åˆé™ä½äº†æ•´ä¸ªæµ‹è¯•å¥—ä»¶çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<ul>
<li>Arrangeï¼šåˆå§‹åŒ–æµ‹è¯•æ•°æ®ã€‚</li>
<li>Actï¼šè°ƒç”¨è¢«æµ‹æ–¹æ³•ï¼Œä¼ å…¥ä¾èµ–å‚æ•°å¹¶è·å–è¿”å›å€¼ã€‚</li>
<li>Assertï¼šæ–­è¨€ï¼Œå¯¹è¿”å›å€¼åšå‡ºæ–­è¨€ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Calculator</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">long</span> a, <span class="hljs-keyword">long</span> b)</span> </span>{
        <span class="hljs-keyword">return</span> a + b;
    }
}
</code></pre>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sum</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// Arrange</span>
        <span class="hljs-keyword">long</span> a = <span class="hljs-number">1L</span>, b = <span class="hljs-number">2L</span>;
        Calculator calculator = <span class="hljs-keyword">new</span> Calculator();
        <span class="hljs-comment">// Act</span>
        <span class="hljs-keyword">long</span> actual = calculator.sum(a, b);
        <span class="hljs-comment">// Assert</span>
        <span class="hljs-keyword">long</span> expected = <span class="hljs-number">3L</span>;
        assertEquals(expected, actual);
    }
}
</code></pre>
<p>ä» <code>arrange</code> æˆ– <code>assert</code> å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•éƒ½æ˜¯å¯è¡Œçš„ã€‚å½“é‡‡ç”¨ TDDï¼ˆTest-Driven Developmentï¼Œæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰æ€æƒ³è¿›è¡Œå¼€å‘æ—¶ï¼Œç”±äºæ˜¯åœ¨å¼€å‘ç‰¹æ€§ä¹‹å‰ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå› æ­¤å¯¹ç‰¹æ€§çš„ç»†èŠ‚å¹¶æ²¡æœ‰å®Œå…¨äº†è§£ï¼Œæ­¤æ—¶åº”å½“é¦–å…ˆç†æ¸…æœŸæœ›ä»ä¸­å¾—åˆ°çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Œè¿›è€Œå†æ€è€ƒå¦‚ä½•æ»¡è¶³è¿™äº›æœŸæœ›ï¼Œæ­¤æ—¶æ›´åŠ æ¨èä» <code>assert</code> å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•ã€‚å½“ç„¶ï¼Œå¦‚æœå¹¶æ²¡æœ‰éµå¾ª TDD æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¼–å†™å•å…ƒæµ‹è¯•ä¹‹å‰ä¸šåŠ¡ä»£ç å·²ç»å®ç°ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æ›´æ¨èä» <code>arrange</code> å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
<h4>1.1.2 é¿å…å¤šé‡ Arrage, Act, Assert åµŒå¥—</h4>
<p><img src="/img/unit-test/ut-nested-3a.png" alt="nested-3a"></p>
<p>å¤šé‡ Arrange, Act, Assert æ„å‘³ç€è¯¥æµ‹è¯•æ­£åœ¨éªŒè¯å¤šä¸ªè¡Œä¸ºå•å…ƒï¼Œé‚£ä¹ˆå®ƒå°±ä¸å†æ˜¯å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯é›†æˆæµ‹è¯•äº†ã€‚æ­¤æ—¶åº”å½“å°†è¿™ç§æµ‹è¯•åˆ†è§£æˆå¤šä¸ªæµ‹è¯•ï¼Œä½¿å•å…ƒæµ‹è¯•æ›´åŠ ç®€å•ã€å¿«é€Ÿä¸”æ˜“äºç†è§£ã€‚</p>
<h4>1.1.3 é¿å…ä½¿ç”¨ <code>if</code> æ¡ä»¶è¯­å¥</h4>
<p>æ— è®ºæ˜¯å•å…ƒæµ‹è¯•è¿˜æ˜¯é›†æˆæµ‹è¯•ï¼Œéƒ½åº”è¯¥æ˜¯ä¸€ä¸ªæ²¡æœ‰åˆ†æ”¯çš„ã€ç®€å•çš„æ­¥éª¤åºåˆ—ï¼Œè€Œ <code>if</code> è¯­å¥è¡¨æ˜åœ¨ä¸€æ¬¡æµ‹è¯•ä¸­éªŒè¯äº†å¤šç§æƒ…å†µï¼Œå› æ­¤ï¼ŒåŒæ ·åº”è¯¥å°†è¿™ç§æµ‹è¯•åˆ†è§£æˆå¤šä¸ªæµ‹è¯•ã€‚</p>
<h4>1.1.4 åˆ é™¤ arrange, act, assert çš„æ³¨é‡Š</h4>
<p>åŒºåˆ† arrangeã€actã€assert ä¸‰éƒ¨åˆ†å¯ä»¥æé«˜å¯è¯»æ€§ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è¿›è¡ŒåŒºåˆ†ï¼š</p>
<ol>
<li>
<p>åœ¨æ¯éƒ¨åˆ†çš„å¼€å§‹æ·»åŠ æ³¨é‡Šæ¥è¡¨æ˜æ˜¯å“ªä¸€éƒ¨åˆ†ã€‚</p>
<pre><code class="language-java"><span class="hljs-comment">// arrange</span>
Calculator calculator = <span class="hljs-keyword">new</span> Calculator();
<span class="hljs-comment">// act</span>
<span class="hljs-keyword">long</span> actual = calculator.sum(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>);
<span class="hljs-comment">// assert</span>
assertEquals(<span class="hljs-number">3L</span>, actual);
</code></pre>
</li>
<li>
<p>åœ¨å„éƒ¨åˆ†ä¹‹é—´æ·»åŠ ç©ºè¡Œã€‚</p>
</li>
</ol>
<h3>1.2 å•å…ƒæµ‹è¯•å‘½å</h3>
<p>é¦–å…ˆï¼Œå•å…ƒæµ‹è¯•çš„åç§°æ˜¯å¦å…·æœ‰è¡¨è¾¾æ€§æ˜¯å¾ˆé‡è¦çš„ï¼Œåˆé€‚çš„åç§°å¯ä»¥è®©äººä»¬å¿«é€Ÿç†è§£è¿™ä¸ªæµ‹è¯•çš„ç›®çš„å’Œç»“æœã€‚</p>
<p>æ¨èä½¿ç”¨ä¸‹åˆ—å‘½åæ–¹å¼ï¼š</p>
<pre><code>[MethodUnderTest]_[Scenario]_[ExpectedResult]
</code></pre>
<ul>
<li><code>MethodUnderTest</code>ï¼šè¢«æµ‹è¯•æ–¹æ³•åã€‚</li>
<li><code>Scenario</code>ï¼šæµ‹è¯•æ–¹æ³•çš„æ¡ä»¶ã€‚</li>
<li><code>ExpectedResult</code>ï¼šåœ¨ä¸Šè¿°æ¡ä»¶ä¸‹æ‰€æœŸæœ›çš„ç»“æœã€‚</li>
</ul>
<p>å¦‚æµ‹è¯• <code>isAdult()</code> æ–¹æ³•ï¼š</p>
<pre><code class="language-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isAdult</span><span class="hljs-params">(<span class="hljs-keyword">int</span> age)</span> </span>{
    <span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">0</span> || age &gt; <span class="hljs-number">120</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;The age is illegal&quot;</span>);
    }
    <span class="hljs-keyword">return</span> age &gt;= <span class="hljs-number">18</span>;
}
</code></pre>
<p><code>isAdult</code> æµ‹è¯•æ–¹æ³•å‘½åï¼š</p>
<pre><code>isAdult_MoreThan18_ReturnTrue	// å¤§äº 18 å² =&gt; æ˜¯æˆå¹´äºº
isAdult_LessThan0_ThrowIllegalArgumentException	// å°äº 0 å² =&gt; éæ³•è¾“å…¥
</code></pre>
<p>æ­¤å¤–ï¼Œè¿˜éœ€æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>ä¸è¦éµå¾ªä¸¥æ ¼çš„å‘½åæ–¹å¼ã€‚å› ä¸ºæœ‰æ—¶å¾ˆéš¾åœ¨æ–¹æ³•åä¸­æè¿°å¤æ‚çš„æƒ…å†µã€‚</li>
<li>ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚ è¿™æ ·åšæœ‰åŠ©äºæé«˜å¯è¯»æ€§ã€‚</li>
</ol>
<h2>2. å•å…ƒæµ‹è¯•é£æ ¼</h2>
<p>ä¸‰ç§å•å…ƒæµ‹è¯•é£æ ¼ï¼š</p>
<ul>
<li><code>output-based style</code>ï¼ŒåŸºäºè¾“å‡ºç»“æœçš„æµ‹è¯•é£æ ¼</li>
<li><code>state-based style</code>ï¼ŒåŸºäºçŠ¶æ€çš„æµ‹è¯•é£æ ¼</li>
<li><code>communication-based style</code>ï¼ŒåŸºäºé€šä¿¡çš„æµ‹è¯•é£æ ¼</li>
</ul>
<h3>2.1 output-based style</h3>
<p>è¯¥æµ‹è¯•é£æ ¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è¾“å…¥å‚æ•°ä¹‹åå¯¹ä¸šåŠ¡ä»£ç çš„è¾“å‡ºç»“æœè¿›è¡ŒéªŒè¯ã€‚è¯¥æµ‹è¯•é£æ ¼åªé€‚ç”¨äºæµ‹è¯•ä¸ä¼šæ”¹å˜å…¨å±€æˆ–å†…éƒ¨çŠ¶æ€çš„ä¸šåŠ¡ä»£ç ï¼Œå› æ­¤åªéœ€éªŒè¯å…¶è¿”å›å€¼å³å¯ã€‚</p>
<p><img src="/img/unit-test/ut-output-based-style.png" alt="output-based-style"></p>
<p>ç¤ºä¾‹ï¼š</p>
<p><code>calculateDiscount()</code> æ–¹æ³•ç”¨äºè®¡ç®—ä¸€ç»„ç‰©å“çš„æŠ˜æ‰£ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriceEngine</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">calculateDiscount</span><span class="hljs-params">(Product[] products)</span> </span>{
        <span class="hljs-keyword">double</span> discount = products.length * <span class="hljs-number">0.01</span>;
        <span class="hljs-keyword">return</span> Math.min(discount, <span class="hljs-number">0.02</span>);
    }
}
</code></pre>
<p><code>output-based</code> é£æ ¼çš„å•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriceEngineTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">calculateDiscount_MinimumDiscount_ReturnMinimumDiscount</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// arrange</span>
		Product product1 = <span class="hljs-keyword">new</span> Product(<span class="hljs-string">&quot;Hand wash&quot;</span>);
        Product product2 = <span class="hljs-keyword">new</span> Product(<span class="hljs-string">&quot;Shampoo&quot;</span>);
        PriceEngine priceEngine = <span class="hljs-keyword">new</span> PriceEngine();
        Product[] products = <span class="hljs-keyword">new</span> Product[]{product1, product2};
        <span class="hljs-comment">// act</span>
        <span class="hljs-keyword">double</span> discount = priceEngine.calculateDiscount(products);
        <span class="hljs-comment">// assert</span>
        Assert.assertEquals(<span class="hljs-number">0.02</span>, discount);
    }
}
</code></pre>
<h3>2.2 state-based style</h3>
<p>è¯¥æµ‹è¯•é£æ ¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æ“ä½œå®ŒæˆåéªŒè¯ç³»ç»Ÿçš„æœ€ç»ˆçŠ¶æ€ã€‚å…¶ä¸­ï¼Œâ€œçŠ¶æ€â€ä¸€è¯å¯ä»¥æŒ‡å•å…ƒæµ‹è¯•æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æŒ‡æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿç­‰å¤–éƒ¨ä¾èµ–ã€‚</p>
<p><img src="/img/unit-test/ut-state-based-style.png" alt="state-based-style"></p>
<p>ç¤ºä¾‹ï¼š</p>
<p><code>addProduct()</code> æ–¹æ³•ç”¨äºå‘è®¢å•ä¸­æ·»åŠ ä¸€ä¸ªç‰©å“ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span> </span>{
    <span class="hljs-keyword">public</span> List&lt;Product&gt; products = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addProduct</span><span class="hljs-params">(Product product)</span> </span>{
        products.add(product);
    }
}
</code></pre>
<p><code>state-based</code> é£æ ¼çš„å•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OrderTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addProduct_AddAProduct</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// arrange</span>
        Product product = <span class="hljs-keyword">new</span> Product(<span class="hljs-string">&quot;Hand wash&quot;</span>);
        Order order = <span class="hljs-keyword">new</span> Order();
        <span class="hljs-comment">// act</span>
        order.addProduct(product);
        <span class="hljs-comment">// assert</span>
        Assert.assertEquals(<span class="hljs-number">1</span>, order.products.size());
        Assert.assertEquals(product, order.products.get(<span class="hljs-number">0</span>));
    }
}
</code></pre>
<blockquote>
<p>ä¸ <code>output-based style</code> ä¸åŒï¼Œ<code>addProduct()</code> æ–¹æ³•çš„ç»“æœä¼šå¯¼è‡´è®¢å•çŠ¶æ€çš„æ›´æ”¹ã€‚</p>
</blockquote>
<h3>2.3 communication-based style</h3>
<p>è¯¥æµ‹è¯•é£æ ¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿ç”¨ mock éªŒè¯å¾…æµ‹éƒ¨åˆ†æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®è°ƒç”¨å…¶ä»–æ¨¡å—ã€‚</p>
<p><img src="/img/unit-test/ut-communication-based-style.png" alt="ut-communication-based-style"></p>
<p>ç¤ºä¾‹ï¼š</p>
<p><code>greetUser()</code> æ–¹æ³•ç”¨äºå‘é€é—®å€™é‚®ä»¶ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmailSender</span> </span>{
    
    <span class="hljs-keyword">private</span> SendService service;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">EmailSender</span><span class="hljs-params">(SendService service)</span> </span>{
		<span class="hljs-keyword">this</span>.service = service;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">greetUser</span><span class="hljs-params">(String email)</span> </span>{
        String message = <span class="hljs-string">&quot;Hello!&quot;</span>;
        <span class="hljs-keyword">return</span> service.send(email, message);
    }
}
</code></pre>
<p><code>communication-based</code> é£æ ¼çš„å•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmailSenderTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">greetUser</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// arrange</span>
        SendService service = Mockito.mock(SendService.class);
        EmailSender sender = <span class="hljs-keyword">new</span> EmailSender(service);
        String email = <span class="hljs-string">&quot;user@email.com&quot;</span>;
        when(service.send(email, Mockito.anyString())).thenReturn(<span class="hljs-keyword">true</span>);
        <span class="hljs-comment">// act</span>
        <span class="hljs-keyword">boolean</span> actual = sender.greetUser(email);
        <span class="hljs-comment">// assert</span>
        Assert.assertEquals(<span class="hljs-keyword">true</span>, actual);
    }
}
</code></pre>
<h3>2.4 å¯¹æ¯”</h3>
<p>ä¸€ä¸ªå¥½çš„å•å…ƒæµ‹è¯•é€šå¸¸åŸºäºä»¥ä¸‹å››ç§å±æ€§è¿›è¡Œè€ƒé‡ï¼š</p>
<ul>
<li>
<p>é˜²æ­¢å›å½’</p>
</li>
<li>
<p>é‡æ„æˆæœ¬</p>
</li>
<li>
<p>å¿«é€Ÿåé¦ˆ</p>
</li>
<li>
<p>å¯ç»´æŠ¤æ€§</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">output-based style</th>
<th style="text-align:center">state-based style</th>
<th style="text-align:center">communication-based style</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">é‡æ„æˆæœ¬</td>
<td style="text-align:center">ä½</td>
<td style="text-align:center">ä¸­</td>
<td style="text-align:center">ä¸­</td>
</tr>
<tr>
<td style="text-align:center">ç»´æŠ¤æˆæœ¬</td>
<td style="text-align:center">ä½</td>
<td style="text-align:center">ä¸­</td>
<td style="text-align:center">é«˜</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ä¸‰ç§é£æ ¼åœ¨é˜²æ­¢å›å½’å’Œå¿«é€Ÿåé¦ˆæ–¹é¢è¡¨ç°ç›¸åŒã€‚</p>
</blockquote>
<p>ç»è¿‡å¯¹æ¯”ï¼Œ<code>output-based</code> é£æ ¼æ˜¯æœ€åˆé€‚çš„ã€‚åŸºäºè¯¥é£æ ¼çš„å•å…ƒæµ‹è¯•å¾ˆå°‘ä¸å®ç°ç»†èŠ‚è€¦åˆåœ¨ä¸€èµ·ï¼Œå› æ­¤é‡æ„æˆæœ¬è¾ƒå°ã€‚åŒæ—¶ç”±äºè¯¥é£æ ¼æ‰€å…·æœ‰çš„ç®€æ´ã€ä¸ä¾èµ–äºå¤–éƒ¨ç¯å¢ƒç­‰ç‰¹æ€§ï¼Œå› æ­¤æ›´å…·æœ‰å¯ç»´æŠ¤æ€§ã€‚</p>
<p><code>state-based</code> å’Œ <code>communication-based</code> é£æ ¼çš„å•å…ƒæµ‹è¯•ä¸å®ç°ç»†èŠ‚çš„è€¦åˆåº¦æ›´é«˜ï¼Œå› æ­¤æ›´éš¾ä»¥é‡æ„ã€‚å¹¶ä¸”å®ƒä»¬ä»£ç é‡å¾€å¾€æ›´å¤§ï¼Œä»è€Œå¯¼è‡´æ›´é«˜çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>ç»¼ä¸Šï¼Œæ›´æ¨èåŸºäº <code>output-based</code> é£æ ¼ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
<h2>3. åä¾‹</h2>
<h3>3.1 ä¸è¦ä¸ºäº†æµ‹è¯•è€Œæ›´æ”¹ private çŠ¶æ€</h3>
<p>åŸåˆ™ä¸Šåº”å½“åªé’ˆå¯¹ public API è¿›è¡Œæµ‹è¯•ã€‚é€šå¸¸ private æ–¹æ³•åªå®Œæˆå¾ˆå°ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå®ƒæ˜¯çŸ­å°ç²¾æ‚çš„ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡åå°„ç­‰æŠ€æœ¯å®ç°å¯¹ private æ–¹æ³•çš„æµ‹è¯•ï¼Œä½†æ˜¯è¿™å°†ä¼šä½¿æµ‹è¯•å˜çš„ç¹çè€Œä¸”æ›´éš¾ç»´æŠ¤ï¼Œå› æ­¤å¤§å¤šæ—¶å€™æ— éœ€å•ç‹¬æµ‹è¯•  private æ–¹æ³•ã€‚</p>
<p>è‹¥ private æ–¹æ³•ç¡®å®éœ€è¦è¿›è¡Œç›´æ¥æµ‹è¯•ï¼Œä¹Ÿä¸è¦ä¸ºäº†æµ‹è¯•è€Œæ›´æ”¹ private çŠ¶æ€ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼å®ç°ï¼š</p>
<ol>
<li>
<p>è®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œé€šè¿‡æµ‹è¯• public API é—´æ¥æµ‹è¯• private æ–¹æ³•ã€‚</p>
</li>
<li>
<p>å°† private æ–¹æ³•é‡æ„æˆå·¥å…·ç±»çš„ public æ–¹æ³•ã€‚</p>
<blockquote>
<p>è¿™ä¹ˆåšæ˜¯ä¸ºäº†æ”¹å–„è®¾è®¡ï¼Œè€Œä¸æ˜¯å¸®åŠ©æµ‹è¯•ã€‚</p>
</blockquote>
</li>
</ol>
<p>ä»¥ç¬¬äºŒç§æ–¹å¼ä¸ºä¾‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span> </span>{
    <span class="hljs-keyword">private</span> Customer customer;
    <span class="hljs-keyword">private</span> List&lt;Product&gt; products;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">generateDescription</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Customer name: &quot;</span> + customer.getName() + <span class="hljs-string">&quot;, total price: &quot;</span> + getPrice();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getPrice</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">double</span> basePrice;	<span class="hljs-comment">// åŸºäº products è®¡ç®—</span>
        <span class="hljs-keyword">double</span> discounts;	<span class="hljs-comment">// åŸºäº customer è®¡ç®—</span>
        <span class="hljs-keyword">double</span> taxes;	<span class="hljs-comment">// åŸºäº products è®¡ç®—</span>
        <span class="hljs-comment">// do some calculation</span>
        <span class="hljs-keyword">return</span> basePrice - discounts + taxes;
    }
}
</code></pre>
<p>å…¶ä¸­ï¼Œå…¬æœ‰çš„ <code>generateDescription()</code> æ–¹æ³•éå¸¸ç®€å•ï¼Œåªæ˜¯è¿”å›ä¸€ä¸ªè®¢å•çš„ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒæ‰€è°ƒç”¨çš„ç§æœ‰çš„ <code>getPrice()</code> æ–¹æ³•å´éå¸¸å¤æ‚ã€‚<code>getPrice()</code> æ–¹æ³•åŒ…å«äº†é‡è¦çš„ä¸šåŠ¡é€»è¾‘ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå…¨é¢æµ‹è¯•ã€‚</p>
<p>ä¸ºäº†æµ‹è¯• <code>getPrice()</code> æ–¹æ³•ï¼Œåº”å½“å°†å…¶é‡æ„åˆ°å•ç‹¬ä¸€ä¸ªç±»ä¸­ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span> </span>{
    <span class="hljs-keyword">private</span> Customer customer;
    <span class="hljs-keyword">private</span> List&lt;Product&gt; products;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">generateDescription</span><span class="hljs-params">()</span> </span>{
        PriceCalculator calc = <span class="hljs-keyword">new</span> PriceCalculator();
		<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Customer name: &quot;</span> + customer.getName() +
            <span class="hljs-string">&quot;, total price: &quot;</span> + calc.getPrice(customer, products);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PriceCalculator</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getPrice</span><span class="hljs-params">(Customer customer, List&lt;Product&gt; products)</span> </span>{
        <span class="hljs-keyword">double</span> basePrice;	<span class="hljs-comment">// åŸºäº products è®¡ç®—</span>
        <span class="hljs-keyword">double</span> discounts;	<span class="hljs-comment">// åŸºäº customer è®¡ç®—</span>
        <span class="hljs-keyword">double</span> taxes;	<span class="hljs-comment">// åŸºäº products è®¡ç®—</span>
        <span class="hljs-comment">// do some calculation</span>
        <span class="hljs-keyword">return</span> basePrice - discounts + taxes;
    }
}
</code></pre>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥ä¸ä¾èµ–äº <code>Order</code> ç±»å®ç° <code>PriceCalculator</code> ç±»çš„æµ‹è¯•äº†ã€‚å¦å¤–ï¼Œç”±äº <code>getPrice()</code> æ–¹æ³•å¹¶æ²¡æœ‰æ”¹å˜ä»»ä½•çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥åŸºäº <code>output-based</code> é£æ ¼ç¼–å†™è¯¥æ–¹æ³•çš„å•å…ƒæµ‹è¯•ã€‚</p>
<h3>3.2 æµ‹è¯•ä¸­ä¸è¦æ¶‰åŠä¸šåŠ¡ä»£ç é€»è¾‘</h3>
<blockquote>
<p>è¿™ç§æƒ…å†µé€šå¸¸å‘ç”Ÿåœ¨æ¶‰åŠå¤æ‚ç®—æ³•çš„æµ‹è¯•ä¸­ã€‚</p>
</blockquote>
<p>ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜è¿™ç§æƒ…å†µï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sum</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// arrange</span>
        <span class="hljs-keyword">long</span> a = <span class="hljs-number">1L</span>, b = <span class="hljs-number">2L</span>;
        Calculator calculator = <span class="hljs-keyword">new</span> Calculator();
        <span class="hljs-comment">// act</span>
        <span class="hljs-keyword">long</span> actual = calculator.sum(a, b);
        <span class="hljs-comment">// assert</span>
        <span class="hljs-keyword">long</span> expected = a + b;	<span class="hljs-comment">// åä¾‹</span>
        <span class="hljs-keyword">long</span> expected = <span class="hljs-number">3L</span>;	<span class="hljs-comment">// æ­£ä¾‹</span>
        assertEquals(expected, actual);
    }
}
</code></pre>
<p>åœ¨ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œåº”å½“å°†å¾…æµ‹æ–¹æ³•çœ‹æˆä¸€ä¸ªé»‘ç›’ã€‚</p>
<h3>3.3 ä»£ç æ±¡æŸ“</h3>
<p>ä»£ç æ±¡æŸ“æ˜¯æŒ‡æ·»åŠ ä»…ç”¨äºæµ‹è¯•çš„ç”Ÿäº§ä»£ç ã€‚å®ƒå°†æµ‹è¯•ä»£ç å’Œä¸šåŠ¡ä»£ç æ··åˆåœ¨ä¸€èµ·ï¼Œå¢åŠ äº†ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Logger</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> isTestEnvironment;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Logger</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> isTestEnvironment)</span> </span>{
        <span class="hljs-keyword">this</span>.isTestEnvironment = isTestEnvironment;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String text)</span> </span>{
        <span class="hljs-keyword">if</span> (!isTestEnvironment) {
            <span class="hljs-comment">// log the text</span>
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Controller</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">someMethod</span><span class="hljs-params">(Logger logger)</span> </span>{
        logger.log(<span class="hljs-string">&quot;someMethod is called&quot;</span>);
    }
}
</code></pre>
<p>åœ¨ <code>Logger</code> ä¸­ï¼Œå‚æ•° <code>isTestEnvironment</code> å˜é‡è¡¨æ˜å½“å‰æ˜¯å¦è¿è¡Œåœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚é€šè¿‡è¯¥å˜é‡å¯ä»¥åœ¨æµ‹è¯•ä¸­çµæ´»çš„æ§åˆ¶æ—¥å¿—æ‰“å°ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> someMethod_LogText_logNothing {
        Logger logger = <span class="hljs-keyword">new</span> Logger(<span class="hljs-keyword">true</span>);	<span class="hljs-comment">// è®¾ç½®ä¸º trueï¼Œè¡¨æ˜å½“å‰å¤„äºæµ‹è¯•ç¯å¢ƒ</span>
        Controller controller = <span class="hljs-keyword">new</span> Controller();
        
        controller.someMethod(logger);
        
        <span class="hljs-comment">// assert it won&#x27;t log nothing</span>
    }
}
</code></pre>
<p>ç¤ºä¾‹ä¸­ï¼Œé¦–å…ˆåˆ›å»ºäº† <code>Logger</code> ç±»ï¼Œå¹¶ä¼ å…¥å‚æ•°è¡¨æ˜å½“å‰å¤„äºæµ‹è¯•ç¯å¢ƒã€‚ä½†æ˜¯å¦‚æœ <code>Logger</code> ç±»çš„æ„é€ æ–¹æ³•æˆ–å‚æ•°ä¸€æ—¦è·Ÿéšä¸šåŠ¡å˜åŒ–è€Œå‘ç”Ÿå˜åŠ¨ï¼Œæ‰€æœ‰æ¶‰åŠ <code>Logger</code> ç±»çš„å•å…ƒæµ‹è¯•éƒ½éœ€è¦ä¿®æ”¹ï¼Œä»è€Œå¢åŠ äº†ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>å¯ä»¥é€šè¿‡æ¥å£åˆ’åˆ†ä¸ºä¸¤ç±» Logger æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Logger</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String text)</span></span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoggerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Logger</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String text)</span> </span>{
        <span class="hljs-comment">// log the text</span>
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FakeLoggerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Logger</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String text)</span> </span>{
        <span class="hljs-comment">// do nothing</span>
    }
}
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨æµ‹è¯•æ—¶åªéœ€åˆ›å»ºä¸€ä¸ª <code>FakeLoggerImpl</code> å¯¹è±¡å³å¯ï¼Œå³ä½¿æ‰“å°æ—¥å¿—çš„é€»è¾‘å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿæ— éœ€ä¿®æ”¹æµ‹è¯•ä»£ç ã€‚</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControllerTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> someMethod_LogText_logNothing {
        Logger logger = <span class="hljs-keyword">new</span> FakeLoggerImpl();	<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äºå•å…ƒæµ‹è¯•çš„ Logger å¯¹è±¡</span>
        Controller controller = <span class="hljs-keyword">new</span> Controller();
        
        controller.someMethod(logger);
        
        <span class="hljs-comment">// assert it won&#x27;t log nothing</span>
    }
}
</code></pre>
</section><footer class="footer-container"><div class="footer-body"><div><h3>è”ç³»æˆ‘ä»¬</h3><h4>æœ‰é—®é¢˜éœ€è¦åé¦ˆï¼Ÿè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ã€‚</h4></div><div class="contact-container"><ul><li><a href="/zh-cn/community/development/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>é‚®ä»¶åˆ—è¡¨</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li><li><a href="https://stackoverflow.com/questions/tagged/apache-dolphinscheduler"><img class="img-base" src="/img/stackoverflow.png"/><img class="img-change" src="/img/stackoverflow-selected.png"/><p>Stack Overflow</p></a></li><li><a href="https://s.apache.org/dolphinscheduler-slack"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li></ul></div><div class="cols-container"><div class="docu-container"><h4>æ–‡æ¡£</h4><ul><li><a href="/zh-cn/development/architecture-design.html"><p>æ¦‚è§ˆ</p></a></li><li><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html"><p>å¿«é€Ÿå¼€å§‹</p></a></li><li><a href="/zh-cn/development/development-environment-setup.html"><p>å¼€å‘è€…æŒ‡å—</p></a></li></ul></div><div></div><div class="asf-container"><h4>ASF</h4><ul><li><a href="http://www.apache.org"><p>åŸºé‡‘ä¼š</p></a></li><li><a href="http://www.apache.org/licenses/"><p>è¯ä¹¦</p></a></li><li><a href="http://www.apache.org/events/current-event"><p>äº‹ä»¶</p></a></li><li><a href="http://www.apache.org/foundation/sponsorship.html"><p>èµåŠ©</p></a></li><li><a href="http://www.apache.org/foundation/thanks.html"><p>è‡´è°¢</p></a></li></ul></div></div><div class="copyright"><span>Copyright Â© 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="/asset/js/react/react-with-addons.min.js"></script>
  <script src="/asset/js/react/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.a476297.js"></script>
  <script src="/build/blog.md.f25cabd.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d6bc736fd9885d9a5dc938425ac062ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>