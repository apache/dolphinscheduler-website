<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="dolphinscheduler_json">
  <meta name="description" content="dolphinscheduler_json">
  <title>dolphinscheduler_json</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.eeae4ed.css">
  <link rel="stylesheet" href="/build/blog.md.055b3f1.css">
</head>
<body>
  <div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-dark"><div class="banner-tips"><div>ğŸ¤” æœ‰å…³äº Apache DolphinScheduler çš„ç–‘é—®ï¼ŒåŠ å…¥ Slack é¢‘é“æ¥è®¨è®ºä»–ä»¬ <a class="link-tips" href="https://s.apache.org/dolphinscheduler-slack">join #dolphinscheduler channel</a>! ğŸŒŸ</div></div><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">En</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-selected" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>Â·Â·Â·</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/index.html" target="_self">é¦–é¡µ</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æ–‡æ¡£</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">æœ€æ–°ç‰ˆæœ¬latest(3.0.0-beta-2)</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/1.3.9/user_doc/quick-start.html" target="_self">1.3.9</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/release/history-versions.html" target="_self">å†å²ç‰ˆæœ¬</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/download/download.html" target="_self">ä¸‹è½½</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/blog/index.html" target="_self">åšå®¢</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/development/development-environment-setup.html" target="_self">å¼€å‘è€…</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/community/team.html" target="_self">ç¤¾åŒº</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/user/index.html" target="_self">ç”¨æˆ·</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="blog-content markdown-body"><h2>dolphinscheduler jsonæ‹†è§£</h2>
<h2>1ã€ä¸ºä»€ä¹ˆæ‹†è§£json</h2>
<p>åœ¨dolphinscheduler 1.3.xåŠä»¥å‰çš„å·¥ä½œæµä¸­çš„ä»»åŠ¡åŠä»»åŠ¡å…³ç³»ä¿å­˜æ—¶æ˜¯ä»¥å¤§jsonçš„æ–¹å¼ä¿å­˜åˆ°æ•°æ®åº“ä¸­process_definitonè¡¨çš„process_definition_jsonå­—æ®µï¼Œå¦‚æœæŸä¸ªå·¥ä½œæµå¾ˆå¤§æ¯”å¦‚æœ‰100æˆ–è€…1000ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªjsonå­—æ®µä¹Ÿå°±éå¸¸å¤§ï¼Œåœ¨ä½¿ç”¨æ—¶éœ€è¦è§£æjsonï¼Œéå¸¸è€—è´¹æ€§èƒ½ï¼Œä¸”ä»»åŠ¡æ²¡æ³•é‡ç”¨ï¼›åŸºäºå¤§jsonï¼Œåœ¨å·¥ä½œæµç‰ˆæœ¬åŠä»»åŠ¡ç‰ˆæœ¬ä¸Šä¹Ÿæ²¡æœ‰å¥½çš„å®ç°æ–¹æ¡ˆï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®å¤§é‡å†—ä½™ã€‚</p>
<p>æ•…ç¤¾åŒºè®¡åˆ’å¯åŠ¨jsonæ‹†è§£é¡¹ç›®ï¼Œå®ç°çš„éœ€æ±‚ç›®æ ‡ï¼š</p>
<ul>
<li>å¤§jsonå®Œå…¨æ‹†åˆ†</li>
<li>æ–°å¢å·¥ä½œæµåŠä»»åŠ¡ç‰ˆæœ¬</li>
<li>å¼•å…¥å…¨å±€å”¯ä¸€é”®(code)</li>
</ul>
<h2>2ã€å¦‚ä½•è®¾è®¡æ‹†è§£åçš„è¡¨</h2>
<h3>1ã€1.3.6ç‰ˆæœ¬å·¥ä½œæµ</h3>
<p>1ã€æ¯”å¦‚åœ¨å½“å‰1.3.6ç‰ˆæœ¬åˆ›å»ºä¸ªa--&gt;bçš„å·¥ä½œæµ</p>
<p><img src="/img/dolphinscheduler_json_20210601/image-20210524102618970.png" alt="image-20210524102618970"></p>
<p>ä»¥ä¸‹æ˜¯processDefiniton save æ¥å£åœ¨controllerå…¥å£æ‰“å°çš„å…¥å‚æ—¥å¿—</p>
<pre><code>create  process definition, project name: hadoop, process definition name: ab, process_definition_json: {&quot;globalParams&quot;:[],&quot;tasks&quot;:[{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-77643&quot;,&quot;name&quot;:&quot;a&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[{&quot;prop&quot;:&quot;yesterday&quot;,&quot;direct&quot;:&quot;IN&quot;,&quot;type&quot;:&quot;VARCHAR&quot;,&quot;value&quot;:&quot;${system.biz.date}&quot;}],&quot;rawScript&quot;:&quot;echo ${yesterday}&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[]},{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-99814&quot;,&quot;name&quot;:&quot;b&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[{&quot;prop&quot;:&quot;today&quot;,&quot;direct&quot;:&quot;IN&quot;,&quot;type&quot;:&quot;VARCHAR&quot;,&quot;value&quot;:&quot;${system.biz.curdate}&quot;}],&quot;rawScript&quot;:&quot;echo ${today}&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[&quot;a&quot;]}],&quot;tenantId&quot;:1,&quot;timeout&quot;:0}, desc:  locations:{&quot;tasks-77643&quot;:{&quot;name&quot;:&quot;a&quot;,&quot;targetarr&quot;:&quot;&quot;,&quot;nodenumber&quot;:&quot;1&quot;,&quot;x&quot;:251,&quot;y&quot;:166},&quot;tasks-99814&quot;:{&quot;name&quot;:&quot;b&quot;,&quot;targetarr&quot;:&quot;tasks-77643&quot;,&quot;nodenumber&quot;:&quot;0&quot;,&quot;x&quot;:533,&quot;y&quot;:161}}, connects:[{&quot;endPointSourceId&quot;:&quot;tasks-77643&quot;,&quot;endPointTargetId&quot;:&quot;tasks-99814&quot;}]
</code></pre>
<p>2ã€ä¾èµ–èŠ‚ç‚¹çš„å·¥ä½œæµï¼Œdepæ˜¯ä¾èµ–èŠ‚ç‚¹</p>
<p><img src="/img/dolphinscheduler_json_20210601/image-20210524104503423.png" alt="image-20210524104503423"></p>
<p>ä»¥ä¸‹æ˜¯processDefiniton save æ¥å£åœ¨controllerå…¥å£æ‰“å°çš„å…¥å‚æ—¥å¿—</p>
<pre><code> create  process definition, project name: hadoop, process definition name: dep_c, process_definition_json: {&quot;globalParams&quot;:[],&quot;tasks&quot;:[{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-69503&quot;,&quot;name&quot;:&quot;c&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[],&quot;rawScript&quot;:&quot;echo 11&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[&quot;dep&quot;]},{&quot;type&quot;:&quot;DEPENDENT&quot;,&quot;id&quot;:&quot;tasks-22756&quot;,&quot;name&quot;:&quot;dep&quot;,&quot;params&quot;:{},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{&quot;relation&quot;:&quot;AND&quot;,&quot;dependTaskList&quot;:[{&quot;relation&quot;:&quot;AND&quot;,&quot;dependItemList&quot;:[{&quot;projectId&quot;:1,&quot;definitionId&quot;:1,&quot;depTasks&quot;:&quot;b&quot;,&quot;cycle&quot;:&quot;day&quot;,&quot;dateValue&quot;:&quot;today&quot;}]}]},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[]}],&quot;tenantId&quot;:1,&quot;timeout&quot;:0}, desc:  locations:{&quot;tasks-69503&quot;:{&quot;name&quot;:&quot;c&quot;,&quot;targetarr&quot;:&quot;tasks-22756&quot;,&quot;nodenumber&quot;:&quot;0&quot;,&quot;x&quot;:597,&quot;y&quot;:166},&quot;tasks-22756&quot;:{&quot;name&quot;:&quot;dep&quot;,&quot;targetarr&quot;:&quot;&quot;,&quot;nodenumber&quot;:&quot;1&quot;,&quot;x&quot;:308,&quot;y&quot;:164}}, connects:[{&quot;endPointSourceId&quot;:&quot;tasks-22756&quot;,&quot;endPointTargetId&quot;:&quot;tasks-69503&quot;}]
</code></pre>
<p>3ã€æ¡ä»¶åˆ¤æ–­çš„å·¥ä½œæµ</p>
<p><img src="/img/dolphinscheduler_json_20210601/image-20210524104218236.png" alt="image-20210524104218236"></p>
<p>ä»¥ä¸‹æ˜¯processDefiniton save æ¥å£åœ¨controllerå…¥å£æ‰“å°çš„å…¥å‚æ—¥å¿—</p>
<pre><code>create  process definition, project name: hadoop, process definition name: condition_test, process_definition_json: {&quot;globalParams&quot;:[],&quot;tasks&quot;:[{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-68456&quot;,&quot;name&quot;:&quot;d&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[],&quot;rawScript&quot;:&quot;echo 11&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[]},{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-58183&quot;,&quot;name&quot;:&quot;e&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[],&quot;rawScript&quot;:&quot;echo 22&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[&quot;cond&quot;]},{&quot;type&quot;:&quot;SHELL&quot;,&quot;id&quot;:&quot;tasks-43996&quot;,&quot;name&quot;:&quot;f&quot;,&quot;params&quot;:{&quot;resourceList&quot;:[],&quot;localParams&quot;:[],&quot;rawScript&quot;:&quot;echo 33&quot;},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;&quot;],&quot;failedNode&quot;:[&quot;&quot;]},&quot;dependence&quot;:{},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[&quot;cond&quot;]},{&quot;type&quot;:&quot;CONDITIONS&quot;,&quot;id&quot;:&quot;tasks-38972&quot;,&quot;name&quot;:&quot;cond&quot;,&quot;params&quot;:{},&quot;description&quot;:&quot;&quot;,&quot;timeout&quot;:{&quot;strategy&quot;:&quot;&quot;,&quot;interval&quot;:null,&quot;enable&quot;:false},&quot;runFlag&quot;:&quot;NORMAL&quot;,&quot;conditionResult&quot;:{&quot;successNode&quot;:[&quot;e&quot;],&quot;failedNode&quot;:[&quot;f&quot;]},&quot;dependence&quot;:{&quot;relation&quot;:&quot;AND&quot;,&quot;dependTaskList&quot;:[{&quot;relation&quot;:&quot;AND&quot;,&quot;dependItemList&quot;:[{&quot;depTasks&quot;:&quot;d&quot;,&quot;status&quot;:&quot;SUCCESS&quot;}]}]},&quot;maxRetryTimes&quot;:&quot;0&quot;,&quot;retryInterval&quot;:&quot;1&quot;,&quot;taskInstancePriority&quot;:&quot;MEDIUM&quot;,&quot;workerGroup&quot;:&quot;default&quot;,&quot;preTasks&quot;:[&quot;d&quot;]}],&quot;tenantId&quot;:1,&quot;timeout&quot;:0}, desc:  locations:{&quot;tasks-68456&quot;:{&quot;name&quot;:&quot;d&quot;,&quot;targetarr&quot;:&quot;&quot;,&quot;nodenumber&quot;:&quot;1&quot;,&quot;x&quot;:168,&quot;y&quot;:158},&quot;tasks-58183&quot;:{&quot;name&quot;:&quot;e&quot;,&quot;targetarr&quot;:&quot;tasks-38972&quot;,&quot;nodenumber&quot;:&quot;0&quot;,&quot;x&quot;:573,&quot;y&quot;:82},&quot;tasks-43996&quot;:{&quot;name&quot;:&quot;f&quot;,&quot;targetarr&quot;:&quot;tasks-38972&quot;,&quot;nodenumber&quot;:&quot;0&quot;,&quot;x&quot;:591,&quot;y&quot;:288},&quot;tasks-38972&quot;:{&quot;name&quot;:&quot;cond&quot;,&quot;targetarr&quot;:&quot;tasks-68456&quot;,&quot;nodenumber&quot;:&quot;2&quot;,&quot;x&quot;:382,&quot;y&quot;:175}}, connects:[{&quot;endPointSourceId&quot;:&quot;tasks-68456&quot;,&quot;endPointTargetId&quot;:&quot;tasks-38972&quot;},{&quot;endPointSourceId&quot;:&quot;tasks-38972&quot;,&quot;endPointTargetId&quot;:&quot;tasks-58183&quot;},{&quot;endPointSourceId&quot;:&quot;tasks-38972&quot;,&quot;endPointTargetId&quot;:&quot;tasks-43996&quot;}]
</code></pre>
<p>ä»ä»¥ä¸Šä¸‰ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“controllerçš„å…¥å£å‚æ•°çš„æ¯ä¸ªå‚æ•°éƒ½å¯ä»¥åœ¨t_ds_process_definitionè¡¨ä¸­æ‰¾åˆ°å¯¹åº”ï¼Œæ•…è¡¨ä¸­æ•°æ®å¦‚ä¸‹å›¾</p>
<p><img src="/img/dolphinscheduler_json_20210601/image-20210524104838911.png" alt="image-20210524104838911"></p>
<h3>2ã€æ‹†è§£åçš„è¡¨è®¾è®¡æ€è·¯</h3>
<p>å·¥ä½œæµåªæ˜¯dagçš„å±•ç°å½¢å¼ï¼Œä»»åŠ¡é€šè¿‡å·¥ä½œæµè¿›è¡Œç»„ç»‡ï¼Œç»„ç»‡çš„åŒæ—¶å­˜åœ¨äº†ä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–ã€‚å°±å¥½æ¯”ä¸€ä¸ªç”»æ¿ï¼Œç”»æ¿ä¸Šæœ‰äº›å›¾æ¡ˆï¼Œå·¥ä½œæµå°±æ˜¯ç”»æ¿ï¼Œå›¾æ¡ˆå°±æ˜¯ä»»åŠ¡ï¼Œå›¾æ¡ˆä¹‹é—´çš„å…³ç³»å°±æ˜¯ä¾èµ–ã€‚è€Œè°ƒåº¦çš„æ ¸å¿ƒæ˜¯è°ƒåº¦ä»»åŠ¡ï¼Œä¾èµ–åªæ˜¯è¡¨è¿°è°ƒåº¦çš„å…ˆåé¡ºåºã€‚å½“å‰å®šæ—¶è¿˜æ˜¯å¯¹æ•´ä¸ªå·¥ä½œæµè¿›è¡Œçš„å®šæ—¶ï¼Œæ‹†è§£åå°±æ–¹ä¾¿å¯¹å•ç‹¬ä»»åŠ¡è¿›è¡Œè°ƒåº¦ã€‚æ­£æ˜¯åŸºäºè¿™ä¸ªæ€æƒ³è®¾è®¡äº†æ‹†è§£çš„æ€è·¯ï¼Œæ‰€ä»¥è¿™å°±éœ€è¦ä¸‰å¼ è¡¨ï¼Œå·¥ä½œæµå®šä¹‰è¡¨ã€ä»»åŠ¡å®šä¹‰è¡¨ã€ä»»åŠ¡å…³ç³»è¡¨ã€‚</p>
<ul>
<li>å·¥ä½œæµå®šä¹‰è¡¨ï¼šæè¿°å·¥ä½œæµçš„åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚å…¨å±€å‚æ•°ã€dagä¸­èŠ‚ç‚¹çš„ä½ç½®ä¿¡æ¯</li>
<li>ä»»åŠ¡å®šä¹‰è¡¨ï¼šæè¿°ä»»åŠ¡çš„è¯¦æƒ…ä¿¡æ¯ï¼Œæ¯”å¦‚ä»»åŠ¡ç±»åˆ«ã€ä»»åŠ¡å®¹é”™ä¿¡æ¯ã€ä¼˜å…ˆçº§ç­‰</li>
<li>ä»»åŠ¡å…³ç³»è¡¨ï¼šæè¿°ä»»åŠ¡çš„å…³ç³»ä¿¡æ¯ï¼Œæ¯”å¦‚å½“å‰èŠ‚ç‚¹ã€å‰ç½®èŠ‚ç‚¹ç­‰</li>
</ul>
<p>åŸºäºè¿™ä¸ªè®¾è®¡æ€æƒ³å†æ‰©å±•åˆ°ç‰ˆæœ¬ï¼Œæ— éæ˜¯å¯¹äºè¿™ä¸‰å¼ è¡¨ï¼Œæ¯å¼ è¡¨æ–°å¢ä¸ªä¿å­˜ç‰ˆæœ¬çš„æ—¥å¿—è¡¨ã€‚</p>
<h4>å·¥ä½œæµå®šä¹‰è¡¨</h4>
<p>ç°åœ¨çœ‹æ¡ˆä¾‹ä¸­saveæ¥å£æ—¥å¿—ï¼Œç°æœ‰å­—æ®µ(projectã€process_definition_nameã€descã€locationsã€connects)ï¼Œå¯¹äºjsonä¸­é™¤äº†taskä¹‹å¤–çš„è¿˜å‰©ä¸‹</p>
<pre><code class="language-json">{<span class="hljs-attr">&quot;globalParams&quot;</span>:[],<span class="hljs-attr">&quot;tenantId&quot;</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">&quot;timeout&quot;</span>:<span class="hljs-number">0</span>}
</code></pre>
<p>æ‰€ä»¥å¯çŸ¥å·¥ä½œæµå®šä¹‰è¡¨ï¼š</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_ds_process_definition` (
  `id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  `code` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;encoding&#x27;</span>,
  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition name&#x27;</span>,
  `version` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition version&#x27;</span>,
  `description` text COMMENT <span class="hljs-string">&#x27;description&#x27;</span>,
  `project_code` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;project code&#x27;</span>,
  `release_state` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition release stateï¼š0:offline,1:online&#x27;</span>,
  `user_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition creator id&#x27;</span>,
  `global_params` text COMMENT <span class="hljs-string">&#x27;global parameters&#x27;</span>,
  `flag` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;0 not available, 1 available&#x27;</span>,
  `locations` text COMMENT <span class="hljs-string">&#x27;Node location information&#x27;</span>,
  `connects` text COMMENT <span class="hljs-string">&#x27;Node connection information&#x27;</span>,
  `warning_group_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;alert group id&#x27;</span>,
  `timeout` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;time out, unit: minute&#x27;</span>,
  `tenant_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;-1&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant id&#x27;</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;create time&#x27;</span>,
  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;update time&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`,`code`),
  <span class="hljs-keyword">UNIQUE</span> KEY `process_unique` (`name`,`project_code`) <span class="hljs-keyword">USING</span> BTREE
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_ds_process_definition_log` (
  `id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  `code` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;encoding&#x27;</span>,
  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition name&#x27;</span>,
  `version` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition version&#x27;</span>,
  `description` text COMMENT <span class="hljs-string">&#x27;description&#x27;</span>,
  `project_code` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;project code&#x27;</span>,
  `release_state` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition release stateï¼š0:offline,1:online&#x27;</span>,
  `user_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;process definition creator id&#x27;</span>,
  `global_params` text COMMENT <span class="hljs-string">&#x27;global parameters&#x27;</span>,
  `flag` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;0 not available, 1 available&#x27;</span>,
  `locations` text COMMENT <span class="hljs-string">&#x27;Node location information&#x27;</span>,
  `connects` text COMMENT <span class="hljs-string">&#x27;Node connection information&#x27;</span>,
  `warning_group_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;alert group id&#x27;</span>,
  `timeout` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;time out,unit: minute&#x27;</span>,
  `tenant_id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;-1&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant id&#x27;</span>,
  `operator` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;operator user id&#x27;</span>,
  `operate_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;operate time&#x27;</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;create time&#x27;</span>,
  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;update time&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;
</code></pre>
<p>ä»è¡¨å­—æ®µå¯ä»¥çœ‹å‡º æ—¥å¿—è¡¨ä»…ä»…æ¯”ä¸»è¡¨å¤šäº†ä¸¤ä¸ªå­—æ®µoperatorã€operate_time</p>
<h4>ä»»åŠ¡å®šä¹‰è¡¨</h4>
<p>æ¡ˆä¾‹ä¸­abå·¥ä½œæµtaskçš„json</p>
<pre><code class="language-json">	&quot;tasks&quot;: [{
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-77643&quot;,
		&quot;name&quot;: &quot;a&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [{
				&quot;prop&quot;: &quot;yesterday&quot;,
				&quot;direct&quot;: &quot;IN&quot;,
				&quot;type&quot;: &quot;VARCHAR&quot;,
				&quot;value&quot;: &quot;${system.biz.date}&quot;
			}],
			&quot;rawScript&quot;: &quot;echo ${yesterday}&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: []
	}, {
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-99814&quot;,
		&quot;name&quot;: &quot;b&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [{
				&quot;prop&quot;: &quot;today&quot;,
				&quot;direct&quot;: &quot;IN&quot;,
				&quot;type&quot;: &quot;VARCHAR&quot;,
				&quot;value&quot;: &quot;${system.biz.curdate}&quot;
			}],
			&quot;rawScript&quot;: &quot;echo ${today}&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: [&quot;a&quot;]
	}]
</code></pre>
<p>dep_cå·¥ä½œæµtaskçš„json</p>
<pre><code class="language-json">	&quot;tasks&quot;: [{
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-69503&quot;,
		&quot;name&quot;: &quot;c&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [],
			&quot;rawScript&quot;: &quot;echo 11&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: [&quot;dep&quot;]
	}, {
		&quot;type&quot;: &quot;DEPENDENT&quot;,
		&quot;id&quot;: &quot;tasks-22756&quot;,
		&quot;name&quot;: &quot;dep&quot;,
		&quot;params&quot;: {},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {
			&quot;relation&quot;: &quot;AND&quot;,
			&quot;dependTaskList&quot;: [{
				&quot;relation&quot;: &quot;AND&quot;,
				&quot;dependItemList&quot;: [{
					&quot;projectId&quot;: 1,
					&quot;definitionId&quot;: 1,
					&quot;depTasks&quot;: &quot;b&quot;,
					&quot;cycle&quot;: &quot;day&quot;,
					&quot;dateValue&quot;: &quot;today&quot;
				}]
			}]
		},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: []
	}]
</code></pre>
<p>condition_testå·¥ä½œæµtaskçš„json</p>
<pre><code class="language-json">	&quot;tasks&quot;: [{
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-68456&quot;,
		&quot;name&quot;: &quot;d&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [],
			&quot;rawScript&quot;: &quot;echo 11&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: []
	}, {
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-58183&quot;,
		&quot;name&quot;: &quot;e&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [],
			&quot;rawScript&quot;: &quot;echo 22&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: [&quot;cond&quot;]
	}, {
		&quot;type&quot;: &quot;SHELL&quot;,
		&quot;id&quot;: &quot;tasks-43996&quot;,
		&quot;name&quot;: &quot;f&quot;,
		&quot;params&quot;: {
			&quot;resourceList&quot;: [],
			&quot;localParams&quot;: [],
			&quot;rawScript&quot;: &quot;echo 33&quot;
		},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;&quot;],
			&quot;failedNode&quot;: [&quot;&quot;]
		},
		&quot;dependence&quot;: {},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: [&quot;cond&quot;]
	}, {
		&quot;type&quot;: &quot;CONDITIONS&quot;,
		&quot;id&quot;: &quot;tasks-38972&quot;,
		&quot;name&quot;: &quot;cond&quot;,
		&quot;params&quot;: {},
		&quot;description&quot;: &quot;&quot;,
		&quot;timeout&quot;: {
			&quot;strategy&quot;: &quot;&quot;,
			&quot;interval&quot;: null,
			&quot;enable&quot;: false
		},
		&quot;runFlag&quot;: &quot;NORMAL&quot;,
		&quot;conditionResult&quot;: {
			&quot;successNode&quot;: [&quot;e&quot;],
			&quot;failedNode&quot;: [&quot;f&quot;]
		},
		&quot;dependence&quot;: {
			&quot;relation&quot;: &quot;AND&quot;,
			&quot;dependTaskList&quot;: [{
				&quot;relation&quot;: &quot;AND&quot;,
				&quot;dependItemList&quot;: [{
					&quot;depTasks&quot;: &quot;d&quot;,
					&quot;status&quot;: &quot;SUCCESS&quot;
				}]
			}]
		},
		&quot;maxRetryTimes&quot;: &quot;0&quot;,
		&quot;retryInterval&quot;: &quot;1&quot;,
		&quot;taskInstancePriority&quot;: &quot;MEDIUM&quot;,
		&quot;workerGroup&quot;: &quot;default&quot;,
		&quot;preTasks&quot;: [&quot;d&quot;]
	}]
</code></pre>
<p>ä»æ¡ˆä¾‹ä¸­å¯ä»¥çŸ¥é“SHELL/DEPENDENT/CONDITIONSç±»å‹çš„èŠ‚ç‚¹çš„jsonæ„æˆï¼ˆå…¶ä»–ä»»åŠ¡ç±»ä¼¼SHELLï¼‰ï¼ŒpreTasksæ ‡è¯†å‰ç½®ä¾èµ–èŠ‚ç‚¹ã€‚conditionResultç»“æ„æ¯”è¾ƒå›ºå®šï¼Œè€Œdependenceç»“æ„å¤æ‚ï¼ŒDEPENDENTå’ŒCONDITIONSç±»å‹ä»»åŠ¡çš„dependenceç»“æ„è¿˜ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸ºäº†ç»Ÿä¸€ï¼Œæˆ‘ä»¬å°†conditionResultå’Œdependenceæ•´ä½“æ”¾åˆ°paramsä¸­ï¼Œparamså¯¹åº”è¡¨å­—æ®µçš„task_paramsã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±ç¡®å®šäº†t_ds_task_definitionè¡¨</p>
<pre><code class="language-mysql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`t_ds_task_definition`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  <span class="hljs-string">`code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;encoding&#x27;</span>,
  <span class="hljs-string">`name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition name&#x27;</span>,
  <span class="hljs-string">`version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition version&#x27;</span>,
  <span class="hljs-string">`description`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;description&#x27;</span>,
  <span class="hljs-string">`project_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;project code&#x27;</span>,
  <span class="hljs-string">`user_id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition creator id&#x27;</span>,
  <span class="hljs-string">`task_type`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task type&#x27;</span>,
  <span class="hljs-string">`task_params`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;job custom parameters&#x27;</span>,
  <span class="hljs-string">`flag`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;0 not available, 1 available&#x27;</span>,
  <span class="hljs-string">`task_priority`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;job priority&#x27;</span>,
  <span class="hljs-string">`worker_group`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;worker grouping&#x27;</span>,
  <span class="hljs-string">`fail_retry_times`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;number of failed retries&#x27;</span>,
  <span class="hljs-string">`fail_retry_interval`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;failed retry interval&#x27;</span>,
  <span class="hljs-string">`timeout_flag`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout flag:0 close, 1 open&#x27;</span>,
  <span class="hljs-string">`timeout_notify_strategy`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout notification policy: 0 warning, 1 fail&#x27;</span>,
  <span class="hljs-string">`timeout`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout length,unit: minute&#x27;</span>,
  <span class="hljs-string">`delay_time`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;delay execution time,unit: minute&#x27;</span>,
  <span class="hljs-string">`resource_ids`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;resource id, separated by comma&#x27;</span>,
  <span class="hljs-string">`create_time`</span> datetime <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;create time&#x27;</span>,
  <span class="hljs-string">`update_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;update time&#x27;</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>,<span class="hljs-string">`code`</span>),
  <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">KEY</span> <span class="hljs-string">`task_unique`</span> (<span class="hljs-string">`name`</span>,<span class="hljs-string">`project_code`</span>) <span class="hljs-keyword">USING</span> BTREE
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`t_ds_task_definition_log`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  <span class="hljs-string">`code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;encoding&#x27;</span>,
  <span class="hljs-string">`name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition name&#x27;</span>,
  <span class="hljs-string">`version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition version&#x27;</span>,
  <span class="hljs-string">`description`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;description&#x27;</span>,
  <span class="hljs-string">`project_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;project code&#x27;</span>,
  <span class="hljs-string">`user_id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task definition creator id&#x27;</span>,
  <span class="hljs-string">`task_type`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;task type&#x27;</span>,
  <span class="hljs-string">`task_params`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;job custom parameters&#x27;</span>,
  <span class="hljs-string">`flag`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;0 not available, 1 available&#x27;</span>,
  <span class="hljs-string">`task_priority`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;job priority&#x27;</span>,
  <span class="hljs-string">`worker_group`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;worker grouping&#x27;</span>,
  <span class="hljs-string">`fail_retry_times`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;number of failed retries&#x27;</span>,
  <span class="hljs-string">`fail_retry_interval`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;failed retry interval&#x27;</span>,
  <span class="hljs-string">`timeout_flag`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout flag:0 close, 1 open&#x27;</span>,
  <span class="hljs-string">`timeout_notify_strategy`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout notification policy: 0 warning, 1 fail&#x27;</span>,
  <span class="hljs-string">`timeout`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;timeout length,unit: minute&#x27;</span>,
  <span class="hljs-string">`delay_time`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;delay execution time,unit: minute&#x27;</span>,
  <span class="hljs-string">`resource_ids`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;resource id, separated by comma&#x27;</span>,
  <span class="hljs-string">`operator`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;operator user id&#x27;</span>,
  <span class="hljs-string">`operate_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;operate time&#x27;</span>,
  <span class="hljs-string">`create_time`</span> datetime <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;create time&#x27;</span>,
  <span class="hljs-string">`update_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;update time&#x27;</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
</code></pre>
<p><strong>æ³¨æ„ï¼šdevç‰ˆæœ¬å’Œ1.3.6ç‰ˆæœ¬åŒºåˆ«ï¼Œdevç‰ˆæœ¬å·²å°†descriptionæ¢æˆdescï¼Œå¹¶ä¸”æ–°å¢äº†delayTime</strong></p>
<pre><code class="language-json">{
	<span class="hljs-attr">&quot;globalParams&quot;</span>: [],
	<span class="hljs-attr">&quot;tasks&quot;</span>: [{
			<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;SHELL&quot;</span>,
			<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;tasks-18200&quot;</span>,
			<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;d&quot;</span>,
			<span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;params&quot;</span>: {
				<span class="hljs-attr">&quot;resourceList&quot;</span>: [],
				<span class="hljs-attr">&quot;localParams&quot;</span>: [],
				<span class="hljs-attr">&quot;rawScript&quot;</span>: <span class="hljs-string">&quot;echo 5&quot;</span>
			},
			<span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;runFlag&quot;</span>: <span class="hljs-string">&quot;NORMAL&quot;</span>,
			<span class="hljs-attr">&quot;conditionResult&quot;</span>: {
				<span class="hljs-attr">&quot;successNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				],
				<span class="hljs-attr">&quot;failedNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				]
			},
			<span class="hljs-attr">&quot;dependence&quot;</span>: {},
			<span class="hljs-attr">&quot;maxRetryTimes&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;retryInterval&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
			<span class="hljs-attr">&quot;delayTime&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;timeout&quot;</span>: {
				<span class="hljs-attr">&quot;strategy&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
				<span class="hljs-attr">&quot;interval&quot;</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">&quot;enable&quot;</span>: <span class="hljs-literal">false</span>
			},
			<span class="hljs-attr">&quot;waitStartTimeout&quot;</span>: {},
			<span class="hljs-attr">&quot;taskInstancePriority&quot;</span>: <span class="hljs-string">&quot;MEDIUM&quot;</span>,
			<span class="hljs-attr">&quot;workerGroup&quot;</span>: <span class="hljs-string">&quot;hadoop&quot;</span>,
			<span class="hljs-attr">&quot;preTasks&quot;</span>: [],
			<span class="hljs-attr">&quot;depList&quot;</span>: <span class="hljs-literal">null</span>
		},
		{
			<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;SHELL&quot;</span>,
			<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;tasks-55225&quot;</span>,
			<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;e&quot;</span>,
			<span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;params&quot;</span>: {
				<span class="hljs-attr">&quot;resourceList&quot;</span>: [],
				<span class="hljs-attr">&quot;localParams&quot;</span>: [],
				<span class="hljs-attr">&quot;rawScript&quot;</span>: <span class="hljs-string">&quot;echo 6&quot;</span>
			},
			<span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;runFlag&quot;</span>: <span class="hljs-string">&quot;NORMAL&quot;</span>,
			<span class="hljs-attr">&quot;conditionResult&quot;</span>: {
				<span class="hljs-attr">&quot;successNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				],
				<span class="hljs-attr">&quot;failedNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				]
			},
			<span class="hljs-attr">&quot;dependence&quot;</span>: {},
			<span class="hljs-attr">&quot;maxRetryTimes&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;retryInterval&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
			<span class="hljs-attr">&quot;delayTime&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;timeout&quot;</span>: {
				<span class="hljs-attr">&quot;strategy&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
				<span class="hljs-attr">&quot;interval&quot;</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">&quot;enable&quot;</span>: <span class="hljs-literal">false</span>
			},
			<span class="hljs-attr">&quot;waitStartTimeout&quot;</span>: {},
			<span class="hljs-attr">&quot;taskInstancePriority&quot;</span>: <span class="hljs-string">&quot;MEDIUM&quot;</span>,
			<span class="hljs-attr">&quot;workerGroup&quot;</span>: <span class="hljs-string">&quot;hadoop&quot;</span>,
			<span class="hljs-attr">&quot;preTasks&quot;</span>: [
				<span class="hljs-string">&quot;def&quot;</span>
			],
			<span class="hljs-attr">&quot;depList&quot;</span>: <span class="hljs-literal">null</span>
		},
		{
			<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;SHELL&quot;</span>,
			<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;tasks-67639&quot;</span>,
			<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;f&quot;</span>,
			<span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;params&quot;</span>: {
				<span class="hljs-attr">&quot;resourceList&quot;</span>: [],
				<span class="hljs-attr">&quot;localParams&quot;</span>: [],
				<span class="hljs-attr">&quot;rawScript&quot;</span>: <span class="hljs-string">&quot;echo 7&quot;</span>
			},
			<span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;runFlag&quot;</span>: <span class="hljs-string">&quot;NORMAL&quot;</span>,
			<span class="hljs-attr">&quot;conditionResult&quot;</span>: {
				<span class="hljs-attr">&quot;successNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				],
				<span class="hljs-attr">&quot;failedNode&quot;</span>: [
					<span class="hljs-string">&quot;&quot;</span>
				]
			},
			<span class="hljs-attr">&quot;dependence&quot;</span>: {},
			<span class="hljs-attr">&quot;maxRetryTimes&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;retryInterval&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
			<span class="hljs-attr">&quot;delayTime&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;timeout&quot;</span>: {
				<span class="hljs-attr">&quot;strategy&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
				<span class="hljs-attr">&quot;interval&quot;</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">&quot;enable&quot;</span>: <span class="hljs-literal">false</span>
			},
			<span class="hljs-attr">&quot;waitStartTimeout&quot;</span>: {},
			<span class="hljs-attr">&quot;taskInstancePriority&quot;</span>: <span class="hljs-string">&quot;MEDIUM&quot;</span>,
			<span class="hljs-attr">&quot;workerGroup&quot;</span>: <span class="hljs-string">&quot;hadoop&quot;</span>,
			<span class="hljs-attr">&quot;preTasks&quot;</span>: [
				<span class="hljs-string">&quot;def&quot;</span>
			],
			<span class="hljs-attr">&quot;depList&quot;</span>: <span class="hljs-literal">null</span>
		},
		{
			<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;CONDITIONS&quot;</span>,
			<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;tasks-67387&quot;</span>,
			<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;def&quot;</span>,
			<span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;params&quot;</span>: {},
			<span class="hljs-attr">&quot;desc&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
			<span class="hljs-attr">&quot;runFlag&quot;</span>: <span class="hljs-string">&quot;NORMAL&quot;</span>,
			<span class="hljs-attr">&quot;conditionResult&quot;</span>: {
				<span class="hljs-attr">&quot;successNode&quot;</span>: [
					<span class="hljs-string">&quot;e&quot;</span>
				],
				<span class="hljs-attr">&quot;failedNode&quot;</span>: [
					<span class="hljs-string">&quot;f&quot;</span>
				]
			},
			<span class="hljs-attr">&quot;dependence&quot;</span>: {
				<span class="hljs-attr">&quot;relation&quot;</span>: <span class="hljs-string">&quot;AND&quot;</span>,
				<span class="hljs-attr">&quot;dependTaskList&quot;</span>: [{
					<span class="hljs-attr">&quot;relation&quot;</span>: <span class="hljs-string">&quot;AND&quot;</span>,
					<span class="hljs-attr">&quot;dependItemList&quot;</span>: [{
							<span class="hljs-attr">&quot;depTasks&quot;</span>: <span class="hljs-string">&quot;d&quot;</span>,
							<span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-string">&quot;SUCCESS&quot;</span>
						},
						{
							<span class="hljs-attr">&quot;depTasks&quot;</span>: <span class="hljs-string">&quot;d&quot;</span>,
							<span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-string">&quot;FAILURE&quot;</span>
						}
					]
				}]
			},
			<span class="hljs-attr">&quot;maxRetryTimes&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;retryInterval&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,
			<span class="hljs-attr">&quot;delayTime&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
			<span class="hljs-attr">&quot;timeout&quot;</span>: {
				<span class="hljs-attr">&quot;strategy&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
				<span class="hljs-attr">&quot;interval&quot;</span>: <span class="hljs-literal">null</span>,
				<span class="hljs-attr">&quot;enable&quot;</span>: <span class="hljs-literal">false</span>
			},
			<span class="hljs-attr">&quot;waitStartTimeout&quot;</span>: {},
			<span class="hljs-attr">&quot;taskInstancePriority&quot;</span>: <span class="hljs-string">&quot;MEDIUM&quot;</span>,
			<span class="hljs-attr">&quot;workerGroup&quot;</span>: <span class="hljs-string">&quot;hadoop&quot;</span>,
			<span class="hljs-attr">&quot;preTasks&quot;</span>: [
				<span class="hljs-string">&quot;d&quot;</span>
			],
			<span class="hljs-attr">&quot;depList&quot;</span>: <span class="hljs-literal">null</span>
		}
	],
	<span class="hljs-attr">&quot;tenantId&quot;</span>: <span class="hljs-number">1</span>,
	<span class="hljs-attr">&quot;timeout&quot;</span>: <span class="hljs-number">0</span>
}
</code></pre>
<h4>ä»»åŠ¡å…³ç³»è¡¨</h4>
<p>preTasksæ ‡è¯†å‰ç½®ä¾èµ–èŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹åœ¨å…³ç³»è¡¨ä¸­ä½¿ç”¨postTaskæ ‡è¯†ã€‚ç”±äºå½“å‰èŠ‚ç‚¹è‚¯å®šå­˜åœ¨è€Œå‰ç½®èŠ‚ç‚¹ä¸ä¸€å®šå­˜åœ¨ï¼Œæ‰€ä»¥postä¸å¯èƒ½ä¸ºç©ºï¼Œè€ŒpreTaskæœ‰å¯èƒ½ä¸ºç©º</p>
<pre><code class="language-mysql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`t_ds_process_task_relation`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  <span class="hljs-string">`name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;relation name&#x27;</span>,
  <span class="hljs-string">`process_definition_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;process version&#x27;</span>,
  <span class="hljs-string">`project_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;project code&#x27;</span>,
  <span class="hljs-string">`process_definition_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;process code&#x27;</span>,
  <span class="hljs-string">`pre_task_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;pre task code&#x27;</span>,
  <span class="hljs-string">`pre_task_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;pre task version&#x27;</span>,
  <span class="hljs-string">`post_task_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;post task code&#x27;</span>,
  <span class="hljs-string">`post_task_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;post task version&#x27;</span>,
  <span class="hljs-string">`condition_type`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;condition type : 0 none, 1 judge 2 delay&#x27;</span>,
  <span class="hljs-string">`condition_params`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;condition params(json)&#x27;</span>,
  <span class="hljs-string">`create_time`</span> datetime <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;create time&#x27;</span>,
  <span class="hljs-string">`update_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;update time&#x27;</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`t_ds_process_task_relation_log`</span> (
  <span class="hljs-string">`id`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> AUTO_INCREMENT <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;self-increasing id&#x27;</span>,
  <span class="hljs-string">`name`</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;relation name&#x27;</span>,
  <span class="hljs-string">`process_definition_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;process version&#x27;</span>,
  <span class="hljs-string">`project_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;project code&#x27;</span>,
  <span class="hljs-string">`process_definition_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;process code&#x27;</span>,
  <span class="hljs-string">`pre_task_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;pre task code&#x27;</span>,
  <span class="hljs-string">`pre_task_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;pre task version&#x27;</span>,
  <span class="hljs-string">`post_task_code`</span> <span class="hljs-built_in">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;post task code&#x27;</span>,
  <span class="hljs-string">`post_task_version`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;post task version&#x27;</span>,
  <span class="hljs-string">`condition_type`</span> <span class="hljs-built_in">tinyint</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;condition type : 0 none, 1 judge 2 delay&#x27;</span>,
  <span class="hljs-string">`condition_params`</span> <span class="hljs-built_in">text</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;condition params(json)&#x27;</span>,
  <span class="hljs-string">`operator`</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;operator user id&#x27;</span>,
  <span class="hljs-string">`operate_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;operate time&#x27;</span>,
  <span class="hljs-string">`create_time`</span> datetime <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;create time&#x27;</span>,
  <span class="hljs-string">`update_time`</span> datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">COMMENT</span> <span class="hljs-string">&#x27;update time&#x27;</span>,
  PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>)
) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
</code></pre>
<p>å¯¹äºä¾èµ–å…³ç³»å¤æ‚çš„åœºæ™¯</p>
<p><img src="/img/dolphinscheduler_json_20210601/image-20210524144950185.png" alt="image-20210524144950185"></p>
<h2>3ã€APIæ¨¡å—å¦‚ä½•æ”¹é€ </h2>
<p><img src="/img/dolphinscheduler_json_20210601/1620304011852-1621754591271.png" alt="æ‹†åˆ†æ–¹æ¡ˆ-1620304011852"></p>
<ul>
<li>[ ] apiæ¨¡å—è¿›è¡Œsaveæ“ä½œæ—¶</li>
</ul>
<ol>
<li>é€šè¿‡é›ªèŠ±ç®—æ³•ç”Ÿæˆ13ä½çš„æ•°å­—ä½œä¸ºprocess_definition_codeï¼Œå·¥ä½œæµå®šä¹‰ä¿å­˜è‡³process_definitionï¼ˆä¸»è¡¨ï¼‰å’Œprocess_definition_logï¼ˆæ—¥å¿—è¡¨ï¼‰ï¼Œè¿™ä¸¤ä¸ªè¡¨ä¿å­˜çš„æ˜¯åŒæ ·çš„æ•°æ®ï¼Œå·¥ä½œæµå®šä¹‰ç‰ˆæœ¬ä¸º1</li>
<li>é€šè¿‡é›ªèŠ±ç®—æ³•ç”Ÿæˆ13ä½çš„æ•°å­—ä½œä¸ºtask_definition_codeï¼Œä»»åŠ¡å®šä¹‰è¡¨ä¿å­˜è‡³task_definitionï¼ˆä¸»è¡¨ï¼‰å’Œtask_definition_logï¼ˆæ—¥å¿—è¡¨ï¼‰ï¼Œä¹Ÿæ˜¯ä¿å­˜åŒæ ·çš„æ•°æ®ï¼Œä»»åŠ¡å®šä¹‰ç‰ˆæœ¬ä¸º1</li>
<li>å·¥ä½œæµä»»åŠ¡å…³ç³»ä¿å­˜åœ¨ process_task_relationï¼ˆä¸»è¡¨ï¼‰å’Œprocess_task_relation_logï¼ˆæ—¥å¿—è¡¨ï¼‰ï¼Œè¯¥è¡¨ä¿å­˜çš„codeå’Œversionæ˜¯å·¥ä½œæµçš„codeå’Œversionï¼Œå› ä¸ºä»»åŠ¡æ˜¯é€šè¿‡å·¥ä½œæµè¿›è¡Œç»„ç»‡ï¼Œä»¥å·¥ä½œæµæ¥ç”»dagã€‚ä¹Ÿæ˜¯é€šè¿‡post_task_codeå’Œpost_task_versionæ ‡è¯†dagçš„å½“å‰èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„å‰ç½®ä¾èµ–é€šè¿‡pre_task_codeå’Œpre_task_versionæ¥æ ‡è¯†ï¼Œå¦‚æœæ²¡æœ‰ä¾èµ–ï¼Œpre_task_codeå’Œpre_task_versionä¸º0</li>
</ol>
<ul>
<li>
<p>[ ] apiæ¨¡å—è¿›è¡Œupdateæ“ä½œæ—¶ï¼Œå·¥ä½œæµå®šä¹‰å’Œä»»åŠ¡å®šä¹‰ç›´æ¥æ›´æ–°ä¸»è¡¨æ•°æ®ï¼Œæ›´æ–°åçš„æ•°æ®insertåˆ°æ—¥å¿—è¡¨ã€‚å…³ç³»è¡¨ä¸»è¡¨å…ˆåˆ é™¤ç„¶åå†æ’å…¥æ–°çš„å…³ç³»ï¼Œå…³ç³»è¡¨æ—¥å¿—è¡¨ç›´æ¥æ’å…¥æ–°çš„å…³ç³»</p>
</li>
<li>
<p>[ ] apiæ¨¡å—è¿›è¡Œdeleteæ“ä½œæ—¶ï¼Œå·¥ä½œæµå®šä¹‰ã€ä»»åŠ¡å®šä¹‰å’Œå…³ç³»è¡¨ç›´æ¥åˆ é™¤ä¸»è¡¨æ•°æ®ï¼Œæ—¥å¿—è¡¨æ•°æ®ä¸å˜åŠ¨</p>
</li>
<li>
<p>[ ] apiæ¨¡å—è¿›è¡Œswitchæ“ä½œæ—¶ï¼Œç›´æ¥å°†æ—¥å¿—è¡¨ä¸­å¯¹åº”versionæ•°æ®è¦†ç›–åˆ°ä¸»è¡¨</p>
</li>
</ul>
<h2>4ã€æ•°æ®äº¤äº’å¦‚ä½•æ”¹é€ </h2>
<p><img src="/img/dolphinscheduler_json_20210601/json.png" alt="json"></p>
<ul>
<li>
<p>[ ] åœ¨jsonæ‹†åˆ†ä¸€æœŸapiæ¨¡å—controllerå±‚æ•´ä½“æœªå˜åŠ¨ï¼Œä¼ å…¥çš„å¤§jsonè¿˜æ˜¯åœ¨serviceå±‚æ˜ å°„ä¸ºProcessDataå¯¹è±¡ã€‚insertæˆ–updateæ“ä½œåœ¨å…¬å…±Serviceæ¨¡å—é€šè¿‡ProcessService.saveProcessDefiniton()å…¥å£å®Œæˆä¿å­˜æ•°æ®åº“æ“ä½œï¼ŒæŒ‰ç…§task_definitionã€process_task_relationã€process_definitionçš„é¡ºåºä¿å­˜ã€‚ä¿å­˜æ—¶ï¼Œå¦‚æœè¯¥ä»»åŠ¡å·²ç»å­˜åœ¨å¹¶ä¸”å…³è”çš„å·¥ä½œæµæœªä¸Šçº¿ï¼Œåˆ™æ›´æ”¹ä»»åŠ¡ï¼›å¦‚æœä»»åŠ¡å…³è”çš„å·¥ä½œæµå·²ä¸Šçº¿ï¼Œåˆ™ä¸å…è®¸æ›´æ”¹ä»»åŠ¡</p>
</li>
<li>
<p>[ ] apiæŸ¥è¯¢æ“ä½œæ—¶ï¼Œå½“å‰è¿˜æ˜¯é€šè¿‡å·¥ä½œæµidæ¥æŸ¥è¯¢ï¼Œåœ¨å…¬å…±Serviceæ¨¡å—é€šè¿‡ProcessService.genTaskNodeList()å…¥å£å®Œæˆæ•°æ®ç»„è£…ï¼Œè¿˜æ˜¯ç»„è£…ä¸ºProcessDataå¯¹è±¡ï¼Œè¿›è€Œç”Ÿæˆjsonè¿”å›</p>
</li>
<li>
<p>[ ] Serveræ¨¡å—ï¼ˆMasterï¼‰ä¹Ÿæ˜¯é€šè¿‡å…¬å…±Serviceæ¨¡å—ProcessService.genTaskNodeList()è·å¾—TaskNodeListç”Ÿæˆè°ƒåº¦dagï¼ŒæŠŠå½“å‰ä»»åŠ¡æ‰€æœ‰ä¿¡æ¯æ”¾åˆ° MasterExecThread.readyToSubmitTaskQueueé˜Ÿåˆ—ï¼Œä»¥ä¾¿ç”ŸæˆtaskInstanceï¼Œdispatchç»™worker</p>
</li>
</ul>
<h2>5ã€å½“å‰jsonè¿˜éœ€åšä»€ä¹ˆ</h2>
<ul>
<li>controllerå¯¹å¤–restAPIæ¥å£æ”¹é€ </li>
<li>uiæ¨¡å—dagæ”¹é€ </li>
<li>uiæ¨¡å—æ–°å¢taskæ“ä½œé¡µé¢</li>
</ul>
<p><strong>processDefinition</strong></p>
<table>
<thead>
<tr>
<th>æ¥å£åç§°</th>
<th>å‚æ•°åç§°</th>
<th style="text-align:center">å‚æ•°è¯´æ˜</th>
<th>æ•°æ®ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>projectName</td>
<td style="text-align:center">é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>name</td>
<td style="text-align:center">æµç¨‹å®šä¹‰åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>description</td>
<td style="text-align:center">æµç¨‹å®šä¹‰æè¿°ä¿¡æ¯</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>globalParams</td>
<td style="text-align:center">å…¨å±€å‚æ•°</td>
<td>string</td>
</tr>
<tr>
<td>save</td>
<td>connects</td>
<td style="text-align:center">æµç¨‹å®šä¹‰èŠ‚ç‚¹å›¾æ ‡è¿æ¥ä¿¡æ¯(jsonæ ¼å¼)</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>locations</td>
<td style="text-align:center">æµç¨‹å®šä¹‰èŠ‚ç‚¹åæ ‡ä½ç½®ä¿¡æ¯(jsonæ ¼å¼)</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td><strong>timeout</strong></td>
<td style="text-align:center"><strong>è¶…æ—¶åˆ†é’Ÿæ•°</strong></td>
<td><strong>int</strong></td>
</tr>
<tr>
<td></td>
<td><strong>tenantId</strong></td>
<td style="text-align:center"><strong>ç§Ÿæˆ·id</strong></td>
<td><strong>int</strong></td>
</tr>
<tr>
<td></td>
<td><strong>taskRelationJson</strong></td>
<td style="text-align:center"><strong>ä»»åŠ¡å…³ç³»(jsonæ ¼å¼)</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td>--</td>
<td>--</td>
<td style="text-align:center">--</td>
<td>--</td>
</tr>
<tr>
<td></td>
<td>projectName</td>
<td style="text-align:center">é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td><strong>code</strong></td>
<td style="text-align:center"><strong>æµç¨‹å®šä¹‰code</strong></td>
<td><strong>long</strong></td>
</tr>
<tr>
<td></td>
<td>name</td>
<td style="text-align:center">æµç¨‹å®šä¹‰åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>description</td>
<td style="text-align:center">æµç¨‹å®šä¹‰æè¿°ä¿¡æ¯</td>
<td>string</td>
</tr>
<tr>
<td>update</td>
<td>releaseState</td>
<td style="text-align:center">å‘å¸ƒæµç¨‹å®šä¹‰,å¯ç”¨å€¼:OFFLINE,ONLINE</td>
<td>ref</td>
</tr>
<tr>
<td></td>
<td>connects</td>
<td style="text-align:center">æµç¨‹å®šä¹‰èŠ‚ç‚¹å›¾æ ‡è¿æ¥ä¿¡æ¯(jsonæ ¼å¼)</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>locations</td>
<td style="text-align:center">æµç¨‹å®šä¹‰èŠ‚ç‚¹åæ ‡ä½ç½®ä¿¡æ¯(jsonæ ¼å¼)</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td><strong>timeout</strong></td>
<td style="text-align:center"><strong>è¶…æ—¶åˆ†é’Ÿæ•°</strong></td>
<td><strong>int</strong></td>
</tr>
<tr>
<td></td>
<td><strong>tenantId</strong></td>
<td style="text-align:center"><strong>ç§Ÿæˆ·id</strong></td>
<td><strong>int</strong></td>
</tr>
<tr>
<td></td>
<td><strong>taskRelationJson</strong></td>
<td style="text-align:center"><strong>ä»»åŠ¡å…³ç³»(jsonæ ¼å¼)</strong></td>
<td><strong>string</strong></td>
</tr>
<tr>
<td></td>
<td>--</td>
<td style="text-align:center">--</td>
<td>--</td>
</tr>
<tr>
<td></td>
<td><strong>code</strong></td>
<td style="text-align:center"><strong>æµç¨‹å®šä¹‰code</strong></td>
<td><strong>long</strong></td>
</tr>
<tr>
<td>switch/deleteCode</td>
<td>projectName</td>
<td style="text-align:center">é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>version</td>
<td style="text-align:center">ç‰ˆæœ¬å·</td>
<td>string</td>
</tr>
</tbody>
</table>
<p>å¤‡æ³¨ï¼štaskRelationJsonæ ¼å¼ï¼š[{&quot;name&quot;:&quot;&quot;,&quot;pre_task_code&quot;:0,&quot;pre_task_version&quot;:0,&quot;post_task_code&quot;:123456789,&quot;post_task_version&quot;:1,&quot;condition_type&quot;:0,&quot;condition_params&quot;:{}},{&quot;name&quot;:&quot;&quot;,&quot;pre_task_code&quot;:123456789,&quot;pre_task_version&quot;:1,&quot;post_task_code&quot;:123451234,&quot;post_task_version&quot;:1,&quot;condition_type&quot;:0,&quot;condition_params&quot;:{}}]</p>
<p>åŒç†å…¶ä»–æ¥å£è¯·æ±‚å‚æ•°processDefinitionIdæ¢æˆcode</p>
<p><strong>schedule</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">æ¥å£åç§°</th>
<th style="text-align:left">å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
<th>æ•°æ®ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left"><strong>code</strong></td>
<td><strong>æµç¨‹å®šä¹‰code</strong></td>
<td><strong>long</strong></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">projectName</td>
<td>é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">failureStrategy</td>
<td>å¤±è´¥ç­–ç•¥,å¯ç”¨å€¼:END,CONTINUE</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center">createSchedule</td>
<td style="text-align:left">processInstancePriority</td>
<td>æµç¨‹å®ä¾‹ä¼˜å…ˆçº§,å¯ç”¨å€¼:HIGHEST,HIGH,MEDIUM,LOW,LOWEST</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">schedule</td>
<td>å®šæ—¶</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">warningGroupId</td>
<td>å‘é€ç»„ID</td>
<td>int</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">warningType</td>
<td>å‘é€ç­–ç•¥,å¯ç”¨å€¼:NONE,SUCCESS,FAILURE,ALL</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">workerGroup</td>
<td>workerGroup</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center">--</td>
<td style="text-align:left">--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left"><strong>code</strong></td>
<td><strong>æµç¨‹å®šä¹‰code</strong></td>
<td><strong>long</strong></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">projectName</td>
<td>é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td style="text-align:center">queryScheduleListPaging</td>
<td style="text-align:left">pageNo</td>
<td>é¡µç å·</td>
<td>int</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">pageSize</td>
<td>é¡µå¤§å°</td>
<td>int</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:left">searchVal</td>
<td>æœç´¢å€¼</td>
<td>string</td>
</tr>
</tbody>
</table>
<p><strong>taskDefinition</strong>(æ–°å¢)</p>
<table>
<thead>
<tr>
<th>æ¥å£åç§°</th>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°è¯´æ˜</th>
<th>æ•°æ®ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>save</td>
<td>projectName</td>
<td>é¡¹ç›®åç§°</td>
<td></td>
</tr>
<tr>
<td></td>
<td>taskDefinitionJson</td>
<td>taskä¿¡æ¯</td>
<td>string</td>
</tr>
<tr>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td></td>
<td>projectName</td>
<td>é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td>update</td>
<td>code</td>
<td>task code</td>
<td>long</td>
</tr>
<tr>
<td></td>
<td>taskDefinitionJson</td>
<td>taskä¿¡æ¯</td>
<td>string</td>
</tr>
<tr>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td></td>
<td>projectName</td>
<td>é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td>switch/deleteCode</td>
<td>task_code</td>
<td>taskCode</td>
<td>long</td>
</tr>
<tr>
<td></td>
<td>version</td>
<td>ç‰ˆæœ¬å·</td>
<td>int</td>
</tr>
<tr>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td>query/delete</td>
<td>projectName</td>
<td>é¡¹ç›®åç§°</td>
<td>string</td>
</tr>
<tr>
<td></td>
<td>task_code</td>
<td>task code</td>
<td>long</td>
</tr>
<tr>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
<tr>
<td>queryTaskListPaging</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>taskDefinitionJsonï¼š[{&quot;name&quot;:&quot;test&quot;,&quot;description&quot;:&quot;&quot;,&quot;task_type&quot;:&quot;SHELL&quot;,&quot;task_params&quot;:[],&quot;flag&quot;:0,&quot;task_priority&quot;:0,&quot;worker_group&quot;:&quot;default&quot;,&quot;fail_retry_times&quot;:0,&quot;fail_retry_interval&quot;:0,&quot;timeout_flag&quot;:0,&quot;timeout_notify_strategy&quot;:0,&quot;timeout&quot;:0,&quot;delay_time&quot;:0,&quot;resource_ids&quot;:&quot;&quot;}]</p>
<p>å¯¹åº”éœ€æ±‚issue</p>
<pre><code>[Feature][JsonSplit-api] api module controller design #5498 
1. [Feature][JsonSplit-api]processDefinition save/update interface  #5499 
2. [Feature][JsonSplit-api]processDefinition switch interface #5501 
3. [Feature][JsonSplit-api]processDefinition delete interface #5502 
4. [Feature][JsonSplit-api]processDefinition copy interface #5503 
5. [Feature][JsonSplit-api]processDefinition export interface #5504 
6. [Feature][JsonSplit-api]processDefinition list-paging interface #5505 
7. [Feature][JsonSplit-api]processDefinition move interface #5506 
8. [Feature][JsonSplit-api]processDefinition queryProcessDefinitionAllByProjectId interface #5507 
9. [Feature][JsonSplit-api]processDefinition select-by-id interface #5508 
10. [Feature][JsonSplit-api]processDefinition view-tree interface #5509 
11. [Feature][JsonSplit-api]schedule create interface #5510 
12. [Feature][JsonSplit-api]schedule list-paging interface #5511 
13. [Feature][JsonSplit-api]schedule update interface #5512 
14. [Feature][JsonSplit-api]taskDefinition save interface #5513 
15. [Feature][JsonSplit-api]taskDefinition update interface #5514 
16. [Feature][JsonSplit-api]taskDefinition switch interface #5515 
17. [Feature][JsonSplit-api]taskDefinition query interface #5516 
18. [Feature][JsonSplit-api]taskDefinition delete interface #5517 
19. [Feature][JsonSplit-api]WorkFlowLineage interface #5518 
20. [Feature][JsonSplit-api]analysis interface #5519 
21. [Feature][JsonSplit-api]executors interface #5520 
22. [Feature][JsonSplit-api]processInstance interface #5521 
23. [Feature][JsonSplit-api]project interface #5522 
</code></pre>
</section><footer class="footer-container"><div class="footer-body"><div><h3>è”ç³»æˆ‘ä»¬</h3><h4>æœ‰é—®é¢˜éœ€è¦åé¦ˆï¼Ÿè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ã€‚</h4></div><div class="contact-container"><ul><li><a href="/zh-cn/community/development/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>é‚®ä»¶åˆ—è¡¨</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li><li><a href="https://stackoverflow.com/questions/tagged/apache-dolphinscheduler"><img class="img-base" src="/img/stackoverflow.png"/><img class="img-change" src="/img/stackoverflow-selected.png"/><p>Stack Overflow</p></a></li><li><a href="https://s.apache.org/dolphinscheduler-slack"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li></ul></div><div class="cols-container"><div class="docu-container"><h4>æ–‡æ¡£</h4><ul><li><a href="/zh-cn/development/architecture-design.html"><p>æ¦‚è§ˆ</p></a></li><li><a href="/zh-cn/docs/latest/user_doc/guide/quick-start.html"><p>å¿«é€Ÿå¼€å§‹</p></a></li><li><a href="/zh-cn/development/development-environment-setup.html"><p>å¼€å‘è€…æŒ‡å—</p></a></li></ul></div><div></div><div class="asf-container"><h4>ASF</h4><ul><li><a href="http://www.apache.org"><p>åŸºé‡‘ä¼š</p></a></li><li><a href="http://www.apache.org/licenses/"><p>è¯ä¹¦</p></a></li><li><a href="http://www.apache.org/events/current-event"><p>äº‹ä»¶</p></a></li><li><a href="http://www.apache.org/foundation/sponsorship.html"><p>èµåŠ©</p></a></li><li><a href="http://www.apache.org/foundation/thanks.html"><p>è‡´è°¢</p></a></li></ul></div></div><div class="copyright"><span>Copyright Â© 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="/asset/js/react/react-with-addons.min.js"></script>
  <script src="/asset/js/react/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.3e36ada.js"></script>
  <script src="/build/blog.md.f25cabd.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d6bc736fd9885d9a5dc938425ac062ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>