<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="The_most_comprehensive_introductory_tutorial_written_in_a_month">
  <meta name="description" content="The_most_comprehensive_introductory_tutorial_written_in_a_month">
  <title>The_most_comprehensive_introductory_tutorial_written_in_a_month</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/blog.md.css">
</head>
<body>
  <div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-dark"><div class="banner-tips"><div>🤔 有关于 Apache DolphinScheduler 的疑问，加入 Slack 频道来讨论他们 <a class="link-tips" href="https://s.apache.org/dolphinscheduler-slack">join #dolphinscheduler channel</a>! 🌟</div></div><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">En</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">文档</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">下载</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item ant-menu-item-selected" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/community/community.html" target="_self">社区</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/user/index.html" target="_self">用户</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/index.html" target="_self">首页</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">文档</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/latest/user_doc/about/introduction.html" target="_self">最新版本latest(3.1.0)</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/3.0.1/user_doc/about/introduction.html" target="_self">3.0.1</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/2.0.7/user_doc/guide/quick-start.html" target="_self">2.0.7</a></div><div class="mobile-sub-menu-item"><a href="/zh-cn/docs/release/history-versions.html" target="_self">历史版本</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/download/download.html" target="_self">下载</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/blog/index.html" target="_self">博客</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/community/community.html" target="_self">社区</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/zh-cn/user/index.html" target="_self">用户</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="blog-content markdown-body"><h1>达人专栏 | 还不会用 Apache Dolphinscheduler？大佬用时一个月写出的最全入门教程</h1>
<div align=center>
<img src="/img/2022-05-23/ch/1.png"/>
</div>
<p>作者 | 欧阳涛 招联金融大数据开发工程师</p>
<p>海豚调度(Apache DolphinScheduler，下文简称DS)是分布式易扩展的可视化DAG工作流任务调度系统，致力于解决数据处理流程中错综复杂的依赖关系，使调度系统在数据处理流程中开箱即用。Apache DolphinScheduler作为Apache的顶级开源项目，与其他开源项目相似的地方在于，其运行以及安装都是从脚本开始的。</p>
<p>脚本的位置都是根目录的script文件夹下的，脚本执行顺序如下:</p>
<p>1、<a href="http://xn--start-all-fy5om8kxq9ew7bj90g1wbiw1f.sh">查看启动的脚本start-all.sh</a>，可以发现启动4个最重要的启动服务，<a href="http://xn--dolphinscheduler-daemon-4422bp0ao029a.sh">分别是dolphinscheduler-daemon.sh</a> start  master-server/worker-server/alert-server/api-server</p>
<p>2、在dolphinscheduler-daemon.sh脚本中会首先执行dolphinscheduler-env.sh脚本，这个脚本作用是引入环境，包括Hadoop、Spark、Flink、Hive环境等。由于DS需要调度这些任务，如果不引入这些环境，即使调度成功，执行也无法成功。</p>
<p>3、紧接着在dolphinscheduler-daemon.sh脚本中循环执行上述4个模块下的bin/start.sh.如下图所示：</p>
<div align=center>
<img src="/img/2022-05-23/ch/2.png"/>
</div>
<p>如下图所示：<a href="http://xn--dolphinscheduler-daemon-cb50ck170c.sh">执行dolphinscheduler-daemon.sh</a> start master-server 时会去 master 模块的src/main/bin <a href="http://xn--start-s06jr40t.sh">执行start.sh</a>，打开start.sh后，可以发现启动了一个MasterServer，其他Worker，Alert以及API模块等同理。</p>
<div align=center>
<img src="/img/2022-05-23/ch/3.png"/>
</div>
<p>至此，从脚本如何运行代码这块就已经结束了，接下来我们将详细介绍一下这4个模块的主要用途。Master主要负责 DAG 任务切分、任务提交监控，并同时监听其它Master和Worker的健康状态等；Worker主要负责任务的执行；Alert是负责警告服务；API负责DS的增删改查业务逻辑，即网页端看到的项目管理、资源管理、安全管理等等。</p>
<p>其实，如果大家接触过其他大数据项目，例如Flink、Hdfs、Hbase等，就会发现这些架构都是类似的，像hdfs是NameNode和WorkNode的架构；Hbase是HMasterServer和HRegionServer的架构；Flink是JobManager和TaskManager的架构等，如果你能够熟练掌握这些框架，想必对于DS的掌握也会更容易的了。</p>
<p>Master，Worker这些都是通过SpringBoot的启动，创建的对象也都是由Spring托管，如果大家平常接触Spring较多的话，那么笔者认为您理解DS一定会比其他的开源项目更容易。</p>
<h2>备注:</h2>
<p>1、运行脚本中还有一个python-gateway-server模块，这个模块是用python代码编写工作流的，并不在本文考虑范围之内，所以就暂时忽略，如果详细了解此模块的话，在社区请教其他同学的了。</p>
<p>2、启动Alert脚本是执行Alert模块下的alert-server的脚本，因为Alert也是个父模块的，笔者不打算讲alert-server。相信在看完Master和Worker的执行流程之后，Alert模块应该不难理解。</p>
<p>3、另外，初次接触DS的同学会发现Alert模块有个alert-api模块，笔者想说的是这alert-api和前面所说的api-server没有一丁点关系，api-server是启动api模块的ApiApplicationServer脚本，负责整个DS的业务逻辑的，而alert-api则是负责告警的spi的插件接口，打开alert-api模块可以发这里面的代码全是接口和定义，没有处理任何逻辑的，所以还是很好区分的了。同理task模块下的task-api与alert-api只是职责相同，处理的是不同功能而已。</p>
<p>4、DS的全都是SpringBoot管理的，如果有同学没搞过SpringBoot或者Spring的话，可以参考下列网址以及网上的其他相关资料等。</p>
<p><a href="https://spring.io/quickstart">https://spring.io/quickstart</a></p>
<p>如果想详细了解警告模块，请参考下方链接以及咨询其他同学。</p>
<p><a href="https://dolphinscheduler.apache.org/zh-cn/blog/Hangzhou_cisco.html">https://dolphinscheduler.apache.org/zh-cn/blog/Hangzhou_cisco.html</a></p>
<p>Apache DolphinScheduler项目官网的地址为:<a href="https://github.com/apache/dolphinscheduler">https://github.com/apache/dolphinscheduler</a></p>
<p>下一章，笔者将介绍DS最重要的两个模块Master和Worker，以及它们如何进行通信的，敬请期待。</p>
</section><footer class="footer-container"><div class="footer-body"><div><h3>联系我们</h3><h4>有问题需要反馈？请通过以下方式联系我们。</h4></div><div class="contact-container"><ul><li><a href="https://s.apache.org/dolphinscheduler-slack"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li><li><a href="/zh-cn/docs/latest/user_doc/contribute/join/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>邮件列表</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li></ul></div><div class="copyright"><span>Copyright © 2019-2022 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="/asset/js/react/react-with-addons.min.js"></script>
  <script src="/asset/js/react/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/blog.md.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d6bc736fd9885d9a5dc938425ac062ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>