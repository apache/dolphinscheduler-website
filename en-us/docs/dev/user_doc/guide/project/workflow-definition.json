{
  "filename": "workflow-definition.md",
  "__html": "<h1>Workflow Definition</h1>\n<h2>Create workflow definition</h2>\n<ul>\n<li>\n<p>Click Project Management -&gt; Workflow -&gt; Workflow Definition, enter the workflow definition page, and click the &quot;Create Workflow&quot; button to enter the <strong>workflow DAG edit</strong> page, as shown in the following figure:</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-dag.png\" alt=\"workflow-dag\"></p>\n</li>\n<li>\n<p>Drag from the toolbar <img src=\"/img/tasks/icons/shell.png\" width=\"15\"/> to the canvas, to add a shell task to the canvas, as shown in the figure below:</p>\n<p><img src=\"/img/tasks/demo/shell.jpg\" alt=\"demo-shell-simple\"></p>\n</li>\n<li>\n<p><strong>Add parameter settings for shell task:</strong></p>\n</li>\n</ul>\n<ol>\n<li>Fill in the &quot;Node Name&quot;, &quot;Description&quot; and &quot;Script&quot; fields;</li>\n<li>Check “Normal” for “Run Flag”. If “Prohibit Execution” is checked, the task will not execute when the workflow runs;</li>\n<li>Select &quot;Task Priority&quot;: when the number of worker threads is insufficient, high priority tasks will execute first in the execution queue, and tasks with the same priority will execute in the order of first in, first out;</li>\n<li>Timeout alarm (optional): check the timeout alarm, timeout failure, and fill in the &quot;timeout period&quot;. When the task execution time exceeds <strong>timeout period</strong>, an alert email will send and the task timeout fails;</li>\n<li>Resources (optional). Resources are files create or upload in the Resource Center -&gt; File Management page. For example, the file name is <code>test.sh</code>, and the command to call the resource in the script is <code>sh test.sh</code>;</li>\n<li>Customize parameters (optional);</li>\n<li>Click the &quot;Confirm Add&quot; button to save the task settings.</li>\n</ol>\n<ul>\n<li>\n<p><strong>Set dependencies between tasks:</strong> Click the plus sign on the right of the task node to connect the task; as shown in the figure below, task Node_B and task Node_C execute in parallel, When task Node_A finished execution, tasks Node_B and Node_C will execute simultaneously.</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-dependent.png\" alt=\"workflow-dependent\"></p>\n</li>\n<li>\n<p><strong>Delete dependencies:</strong> Click the &quot;arrow&quot; icon in the upper right corner <img src=\"/img/arrow.png\" width=\"35\"/>, select the connection line, and click the &quot;Delete&quot; icon in the upper right corner <img src= \"/img/delete.png\" width=\"35\"/>, delete dependencies between tasks.</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-delete.png\" alt=\"workflow-delete\"></p>\n</li>\n<li>\n<p><strong>Save workflow definition:</strong> Click the &quot;Save&quot; button, and the &quot;Set DAG chart name&quot; window pops up, as shown in the figure below. Enter the workflow definition name, workflow definition description, and set global parameters (optional, refer to <a href=\"../parameter/global.md\">global parameters</a>), click the &quot;Add&quot; button to finish workflow definition creation.</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-save.png\" alt=\"workflow-save\"></p>\n</li>\n</ul>\n<blockquote>\n<p>For other types of tasks, please refer to <a href=\"#TaskParamers\">Task Node Type and Parameter Settings</a>. <!-- markdown-link-check-disable-line --></p>\n</blockquote>\n<h2>Workflow Definition Operation Function</h2>\n<p>Click Project Management -&gt; Workflow -&gt; Workflow Definition to enter the workflow definition page, as shown below:</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-list.png\" alt=\"workflow-list\"></p>\n<p>The following are the operation functions of the workflow definition list:</p>\n<ul>\n<li><strong>Edit:</strong> Only &quot;Offline&quot; workflow definitions can be edited. Workflow DAG editing is the same as <a href=\"#creatDag\">Create Workflow Definition</a> <!-- markdown-link-check-disable-line --></li>\n<li><strong>Online:</strong> When the workflow status is &quot;Offline&quot;, used to make workflow online. Only the workflow in the &quot;Online&quot; state can run, but cannot edit</li>\n<li><strong>Offline:</strong> When the workflow status is &quot;Online&quot;, used to make workflow offline. Only the workflow in the &quot;Offline&quot; state can be edited, but cannot run</li>\n<li><strong>Run:</strong> Only workflow in the online state can run. See <a href=\"#run-the-workflow\">2.3.3 Run Workflow</a> for the operation steps.</li>\n<li><strong>Timing:</strong> Timing can only set to online workflows, and the system automatically schedules to run the workflow on time. The status after creating a timing setting is &quot;offline&quot;, and the timing must set online on the timing management page to make effect. See <a href=\"#workflow-timing\">2.3.4 Workflow Timing</a> for timing operation steps</li>\n<li><strong>Timing Management:</strong> The timing management page can edit, online or offline and delete timing</li>\n<li><strong>Delete:</strong> Delete the workflow definition. In the same project, only the workflow definition created by yourself can be deleted, and the workflow definition of other users cannot be deleted. If you need to delete it, please contact the user who created it or the administrator.</li>\n<li><strong>Download:</strong> Download workflow definition to local</li>\n<li><strong>Tree Diagram:</strong> Display the task node type and task status in a tree structure, as shown in the figure below:</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-tree.png\" alt=\"workflow-tree\"></p>\n<h2>Run the Workflow</h2>\n<ul>\n<li>Click Project Management -&gt; Workflow -&gt; Workflow Definition to enter the workflow definition page, as shown in the figure below, click the &quot;Go Online&quot; button <img src=\"/img/online.png\" width=\"35\"/>to make workflow online.</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-online.png\" alt=\"workflow-online\"></p>\n<ul>\n<li>Click the &quot;Run&quot; button to pop up the startup parameter setting window, as shown in the figure below, set the startup parameters, click the &quot;Run&quot; button in the pop-up box, the workflow starts running, and the workflow instance page generates a workflow instance.</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-run.png\" alt=\"workflow-run\"></p>\n<p>Description of workflow operating parameters:</p>\n<ul>\n<li>\n<p>Failure strategy: When a task node fails to execute, other parallel task nodes need to execute this strategy. &quot;Continue&quot; means: after a certain task fails, other task nodes execute normally; &quot;End&quot; means: terminate all tasks execution, and terminate the entire process</p>\n</li>\n<li>\n<p>Notification strategy: When the process is over, send the process execution result notification email according to the process status, options including no send, send if sucess, send of failure, send whatever result</p>\n</li>\n<li>\n<p>Process priority: The priority of process operation, divide into five levels: highest (HIGHEST), high (HIGH), medium (MEDIUM), low (LOW), and lowest (LOWEST). When the number of master threads is insufficient, high priority processes will execute first in the execution queue, and processes with the same priority will execute in the order of first in, first out;</p>\n</li>\n<li>\n<p>Worker group: The process can only be executed in the specified worker machine group. The default is <code>Default</code>, which can execute on any worker</p>\n</li>\n<li>\n<p>Notification group: select notification strategy||timeout alarm||when fault tolerance occurs, process result information or email will send to all members in the notification group</p>\n</li>\n<li>\n<p>Recipient: select notification policy||timeout alarm||when fault tolerance occurs, process result information or alarm email will be sent to the recipient list</p>\n</li>\n<li>\n<p>Cc: select notification policy||timeout alarm||when fault tolerance occurs, the process result information or warning email will be copied to the CC list</p>\n</li>\n<li>\n<p>Startup parameter: Set or overwrite global parameter values when starting a new process instance</p>\n</li>\n<li>\n<p>Complement: includes serial complement and parallel complement and supports manual date input and date selection. Serial complement defines, within the specified time range, executes the complements from the start date to the end date by sequential and N process instances are generated in sequence. Parallel complement defines executing the complement concurrently in the multiple days to generate N process instances within the specified time range. Manual date input defines: manually input the date following the date format <code>yyyy-MM-dd HH:mm:ss</code> and separate dates by a comma. Date selection defines: to select dates via UI.</p>\n<ul>\n<li>Dependent Mode: Trigger the complement of workflow instances that the downstream dependent node depends on the current workflow(It is required that the scheduled status of the workflow instance of the current replenishment is online, and only the downstream supplement directly dependent on the current workflow will be triggered)</li>\n<li>You can select complement time range (When the scheduled configuration is not online, the daily complement will be performed by default according to the selected time range.If the timing configuration is online, it will be complemented according to the selected time range in combination with the timing configuration) when executing a timing workflow definition. For example, need to fill in the data from 1st May to 10th May, as shown in the figure below:</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-date.png\" alt=\"workflow-date\"></p>\n<blockquote>\n<p>Serial mode: the complement execute sequentially from 9th May to 10th May, and the process instance page generates 2 process instances;</p>\n</blockquote>\n<blockquote>\n<p>Parallel mode: The tasks from 9th May to 10th May execute simultaneously, and the process instance page generates 2 process instances;</p>\n</blockquote>\n<ul>\n<li>You can manually enter the complement dates (independent from the timing configuration) to execute the complement data to workflow definitions. The figure below is an example to make complement data from 9th May to 10th May:</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow_date_manual.png\" alt=\"workflow-date\"></p>\n<blockquote>\n<p>Serial mode: the complement execute sequentially from 9th May to 10th May, and the process instance page generates 2 process instances;</p>\n</blockquote>\n<blockquote>\n<p>Parallel mode: The tasks from 9th May to 10th May execute simultaneously, and the process instance page generates 2 process instances;</p>\n</blockquote>\n</li>\n</ul>\n<h2>Run the task alone</h2>\n<ul>\n<li>Right-click the task and click the &quot;Start&quot; button (only online tasks can be clicked to run)</li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-task-run.png\" alt=\"workflow-task-run\"></p>\n<ul>\n<li>The startup parameter setting dialog box is displayed, and the parameter description is the same as <a href=\"#run-the-workflow\">run the workflow</a></li>\n</ul>\n<p><img src=\"/img/new_ui/dev/project/workflow-task-run-config.png\" alt=\"workflow-task-run-config\"></p>\n<h2>Workflow Timing</h2>\n<ul>\n<li>\n<p>Create timing: Click Project Management-&gt;Workflow-&gt;Workflow Definition, enter the workflow definition page, make the workflow online, click the &quot;timing&quot; button <img src=\"/img/timing.png\" width=\"35\"/> , the timing parameter setting dialog box pops up, as shown in the figure below:</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-time01.png\" alt=\"workflow-time01\"></p>\n</li>\n<li>\n<p>Choose the start and end time. In the time range, the workflow runs at regular intervals; If not in the time range, no regular workflow instances generate.</p>\n</li>\n<li>\n<p>Add a timing that execute 5 minutes once, as shown in the following figure:</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-time02.png\" alt=\"workflow-time02\"></p>\n</li>\n<li>\n<p>Failure strategy, notification strategy, process priority, worker group, notification group, recipient, and CC are the same as workflow running parameters.</p>\n</li>\n<li>\n<p>Click the &quot;Create&quot; button to create the timing. Now the timing status is &quot;<strong>Offline</strong>&quot; and the timing needs to be <strong>Online</strong> to make effect.</p>\n</li>\n<li>\n<p>Timing online: Click the &quot;Timing Management&quot; button <img src=\"/img/timeManagement.png\" width=\"35\"/>, enter the timing management page, click the &quot;online&quot; button, the timing status will change to &quot;online&quot;, as shown in the below figure, the workflow makes effect regularly.</p>\n<p><img src=\"/img/new_ui/dev/project/workflow-time03.png\" alt=\"workflow-time03\"></p>\n</li>\n</ul>\n<h2>Import Workflow</h2>\n<p>Click Project Management -&gt; Workflow -&gt; Workflow Definition to enter the workflow definition page, click the &quot;Import Workflow&quot; button to import the local workflow file, the workflow definition list displays the imported workflow and the status is offline.</p>\n",
  "link": "/dist/en-us/docs/dev/user_doc/guide/project/workflow-definition.html",
  "meta": {}
}