<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="architecture-design">
  <meta name="description" content="architecture-design">
  <title>architecture-design</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.eeae4ed.css">
</head>
<body>
  <div id="root"><div class="md2html docs-page" data-reactroot=""><header class="header-container header-container-dark"><div class="banner-tips"><div>🤔 Have queries regarding Apache DolphinScheduler, Join Slack channel to disscuss them <a class="link-tips" href="https://s.apache.org/dolphinscheduler-slack">join #dolphinscheduler channel</a>! 🌟</div></div><div class="header-body"><span class="mobile-menu-btn mobile-menu-btn-dark"></span><a href="/en-us/index.html"><img class="logo" src="/img/hlogo_white.svg"/></a><div class="search search-dark"><span class="icon-search"></span></div><span class="language-switch language-switch-dark">中</span><div class="header-menu"><div><ul class="ant-menu whiteClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/en-us/index.html" target="_self">HOME</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-item-selected" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/en-us/docs/latest/user_doc/about/introduction.html" target="_self">DOCS</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/en-us/download/download.html" target="_self">DOWNLOAD</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/en-us/blog/index.html" target="_self">BLOG</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/en-us/community/community.html" target="_self">COMMUNITY</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/en-us/user/index.html" target="_self">USER</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div><div class="mobile-menu"><div class="mobile-menu-content"><div class="mobile-menu-list"><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/index.html" target="_self">HOME</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/docs/latest/user_doc/about/introduction.html" target="_self">DOCS</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="/en-us/docs/latest/user_doc/about/introduction.html" target="_self">latest(3.1.0)</a></div><div class="mobile-sub-menu-item"><a href="/en-us/docs/3.0.1/user_doc/about/introduction.html" target="_self">3.0.1</a></div><div class="mobile-sub-menu-item"><a href="/en-us/docs/2.0.6/user_doc/guide/quick-start.html" target="_self">2.0.6</a></div><div class="mobile-sub-menu-item"><a href="/en-us/docs/release/history-versions.html" target="_self">Older Versions</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/download/download.html" target="_self">DOWNLOAD</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/blog/index.html" target="_self">BLOG</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/community/community.html" target="_self">COMMUNITY</a></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="https://www.apache.org/" target="_blank">ASF</a><em class="mobile-menu-icon"></em><div class="mobile-sub-menus"><div class="mobile-sub-menu-item"><a href="https://www.apache.org/" target="_blank">Foundation</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/licenses/" target="_blank">License</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/security/" target="_blank">Security</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></div><div class="mobile-sub-menu-item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></div></div></div><div class="mobile-menu-item"><a class="mobile-menu-title" href="/en-us/user/index.html" target="_self">USER</a></div></div></div><div class="mobile-menu-dummy"></div></div></div></header><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>About</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/about/introduction.html" target="_self">Introduction</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/about/features.html" target="_self">Features</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/about/hardware.html" target="_self">Hardware Environment</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/about/glossary.html" target="_self">Glossary</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Quick Start</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/start/quick-start.html" target="_self">Quick Start</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/start/docker.html" target="_self">Docker Deployment</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Introduction to Functions</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/homepage.html" target="_self">Application Homepage</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Project<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/project/project-list.html" target="_self">Project List</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/project/workflow-definition.html" target="_self">Workflow Definition</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/project/workflow-instance.html" target="_self">Workflow Instance</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/project/task-instance.html" target="_self">Task Instance</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/dev/user_doc/guide/project/task-definition.html" target="_self">Task Definition</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Task<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/appendix.html" target="_self">Appendix</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/shell.html" target="_self">Shell</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/sub-process.html" target="_self">SubProcess</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/dependent.html" target="_self">Dependent</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/stored-procedure.html" target="_self">Stored Procedure</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/sql.html" target="_self">SQL</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/spark.html" target="_self">Spark</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/map-reduce.html" target="_self">MapReduce</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/python.html" target="_self">Python</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/flink.html" target="_self">Flink</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/http.html" target="_self">HTTP</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/datax.html" target="_self">DataX</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/pigeon.html" target="_self">Pigeon</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/conditions.html" target="_self">Conditions</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/switch.html" target="_self">Switch</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/seatunnel.html" target="_self">SeaTunnel</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/emr.html" target="_self">Amazon EMR</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/zeppelin.html" target="_self">Apache Zeppelin</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/jupyter.html" target="_self">Jupyter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/hive-cli.html" target="_self">Hive CLI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/kubernetes.html" target="_self">Kubernetes</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/mlflow.html" target="_self">MLflow</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/openmldb.html" target="_self">Openmldb</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/dvc.html" target="_self">DVC</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/dinky.html" target="_self">Dinky</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/java.html" target="_self">Java</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/sagemaker.html" target="_self">SageMaker</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/chunjun.html" target="_self">ChunJun</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/pytorch.html" target="_self">Pytorch</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/dms.html" target="_self">Amazon DMS</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/task/datasync.html" target="_self">AWS Datasync</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Parameter<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/parameter/built-in.html" target="_self">Built-in Parameter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/parameter/global.html" target="_self">Global Parameter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/parameter/local.html" target="_self">Local Parameter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/parameter/context.html" target="_self">Parameter Context</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/parameter/priority.html" target="_self">Parameter Priority</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Data Source<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/mysql.html" target="_self">MySQL</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/postgresql.html" target="_self">PostgreSQL</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/hive.html" target="_self">HIVE</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/spark.html" target="_self">Spark</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/presto.html" target="_self">Presto</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/sqlserver.html" target="_self">SQL SERVER</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/redshift.html" target="_self">Amazon Redshift</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/clickhouse.html" target="_self">ClickHouse</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/db2.html" target="_self">IBM DB2</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/oracle.html" target="_self">Oracle</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/datasource/athena.html" target="_self">Amazon Athena</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Alert<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/alert_plugin_user_guide.html" target="_self">Alert Component User Guide </a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/email.html" target="_self">Email</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/telegram.html" target="_self">Telegram</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/dingtalk.html" target="_self">Ding Talk</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/enterprise-wechat.html" target="_self">Enterprise Wechat</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/enterprise-webexteams.html" target="_self">Enterprise Webexteams</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/script.html" target="_self">Script</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/http.html" target="_self">Http</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/alert/feishu.html" target="_self">Feishu</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Resource<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/resource/intro.html" target="_self">Introduction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/resource/configuration.html" target="_self">Configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/resource/file-manage.html" target="_self">File Manage</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/resource/udf-manage.html" target="_self">UDF Manage</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/resource/task-group.html" target="_self">Task Group Manage</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/monitor.html" target="_self">Monitor</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/security.html" target="_self">Security</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Metrics<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/metrics/metrics.html" target="_self">Metrics</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/data-quality.html" target="_self">Data Quality</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Upgrade<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/upgrade/incompatible.html" target="_self">Incompatible</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/upgrade/upgrade.html" target="_self">Upgrade</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/expansion-reduction.html" target="_self">Expansion and Reduction</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Installation</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/installation/standalone.html" target="_self">Standalone Deployment</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/installation/pseudo-cluster.html" target="_self">Pseudo Cluster Deployment</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/installation/cluster.html" target="_self">Cluster Deployment</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/installation/kubernetes.html" target="_self">Kubernetes Deployment</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>integration<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/guide/integration/rainbond.html" target="_self">Rainbond Deployment</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>Architecture Guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/design.html" target="_self">Architecture Design</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/metadata.html" target="_self">Metadata</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/configuration.html" target="_self">Configuration File</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/task-structure.html" target="_self">Task Structure</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/load-balance.html" target="_self">Load Balance</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/architecture/cache.html" target="_self">Cache</a></li></ul></li><li class="menu-item menu-item-level-1"><span>API</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/open-api.html" target="_self">Open API</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/python/dev/index.html" target="_self">PyDolphinScheduler</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/healthcheck.html" target="_self">Health Check</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Contribution</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Join<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/security.html" target="_self">Security Report</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/become-a-committer.html" target="_self">How to Become a Committer</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/subscribe.html" target="_self">Subscribe Mailing Lists</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/contribute.html" target="_self">Participate in Contributing</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/code-conduct.html" target="_self">Code of Conduct</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/review.html" target="_self">Review Issue or Pull Requests</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/e2e-guide.html" target="_self">E2E Contribution Guide</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/submit-code.html" target="_self">Submit Code</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/DS-License.html" target="_self">License Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/document.html" target="_self">Document Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/issue.html" target="_self">Issue Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/pull-request.html" target="_self">Pull Request Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/commit-message.html" target="_self">Commit Message Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/microbench.html" target="_self">Micro BenchMark Notice</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/join/unit-test.html" target="_self">Unit Test Writing Guide</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/contribute/development-environment-setup.html" target="_self">Development Environment Setup</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Design Document<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/architecture-design.html" target="_self">Architecture Design</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/backend/spi/alert.html" target="_self">Alert SPI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/backend/spi/registry.html" target="_self">Registry SPI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/backend/spi/task.html" target="_self">Task SPI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/backend/spi/datasource.html" target="_self">Datasource SPI</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/backend/mechanism/overview.html" target="_self">Mechanism Design</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Guidelines<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/frontend-development.html" target="_self">Frontend Development</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/api-standard.html" target="_self">API Standard</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/e2e-test.html" target="_self">E2E Automation Test</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/api-test.html" target="_self">API Automation Test</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/log-specification.html" target="_self">Log Specification</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Release Guide<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/release/release-prepare.html" target="_self">Release Preparation</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/release/release.html" target="_self">Release Guide</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/user_doc/contribute/release/release-post.html" target="_self">Release Post</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/contribute/have-questions.html" target="_self">Questions &amp; Communications</a></li></ul></li><li class="menu-item menu-item-level-1"><span>DSIP</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/DSIP.html" target="_self">DSIP</a></li></ul></li><li class="menu-item menu-item-level-1"><span>FAQ</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/howto/general-setting.html" target="_self">General Setting</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/user_doc/guide/howto/datasource-setting.html" target="_self">Datasource Setting</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/release/faq.html" target="_self">Others</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Older Versions</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/release/history-versions.html" target="_self">Older Versions</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h2>Architecture Design</h2>
<p>Before explaining the architecture of the schedule system, let us first understand the common nouns of the schedule system.</p>
<h3>1.Noun Interpretation</h3>
<p><strong>DAG：</strong> Full name Directed Acyclic Graph，referred to as DAG。Tasks in the workflow are assembled in the form of directed acyclic graphs, which are topologically traversed from nodes with zero indegrees of ingress until there are no successor nodes. For example, the following picture:</p>
<p align="center">
  <img src="/img/architecture-design/dag_examples.png" alt="dag示例"  width="80%" />
  <p align="center">
        <em>dag example</em>
  </p>
</p>
<p><strong>Process definition</strong>: Visualization <strong>DAG</strong> by dragging task nodes and establishing associations of task nodes</p>
<p><strong>Process instance</strong>: A process instance is an instantiation of a process definition, which can be generated by manual startup or  scheduling. The process definition runs once, a new process instance is generated</p>
<p><strong>Task instance</strong>: A task instance is the instantiation of a specific task node when a process instance runs, which indicates the specific task execution status</p>
<p><strong>Task type</strong>: Currently supports SHELL, SQL, SUB_PROCESS (sub-process), PROCEDURE, MR, SPARK, PYTHON, DEPENDENT (dependency), and plans to support dynamic plug-in extension, note: the sub-<strong>SUB_PROCESS</strong> is also A separate process definition that can be launched separately</p>
<p><strong>Schedule mode</strong> :  The system supports timing schedule and manual schedule based on cron expressions. Command type support: start workflow, start execution from current node, resume fault-tolerant workflow, resume pause process, start execution from failed node, complement, timer, rerun, pause, stop, resume waiting thread. Where <strong>recovers the fault-tolerant workflow</strong> and <strong>restores the waiting thread</strong> The two command types are used by the scheduling internal control and cannot be called externally</p>
<p><strong>Timed schedule</strong>: The system uses <strong>quartz</strong> distributed scheduler and supports the generation of cron expression visualization</p>
<p><strong>Dependency</strong>: The system does not only support <strong>DAG</strong> Simple dependencies between predecessors and successor nodes, but also provides <strong>task dependencies</strong> nodes, support for <strong>custom task dependencies between processes</strong></p>
<p><strong>Priority</strong>: Supports the priority of process instances and task instances. If the process instance and task instance priority are not set, the default is first in, first out.</p>
<p><strong>Mail Alert</strong>: Support <strong>SQL Task</strong> Query Result Email Send, Process Instance Run Result Email Alert and Fault Tolerant Alert Notification</p>
<p><strong>Failure policy</strong>: For tasks running in parallel, if there are tasks that fail, two failure policy processing methods are provided. <strong>Continue</strong> means that the status of the task is run in parallel until the end of the process failure. <strong>End</strong> means that once a failed task is found, Kill also drops the running parallel task and the process ends.</p>
<p><strong>Complement</strong>: Complement historical data, support <strong>interval parallel and serial</strong> two complement methods</p>
<h3>2.System architecture</h3>
<h4>2.1 System Architecture Diagram</h4>
<p align="center">
  <img src="/img/architecture.jpg" alt="System Architecture Diagram"  />
  <p align="center">
        <em>System Architecture Diagram</em>
  </p>
</p>
<h4>2.2 Architectural description</h4>
<ul>
<li>
<p><strong>MasterServer</strong></p>
<p>MasterServer adopts the distributed non-central design concept. MasterServer is mainly responsible for DAG task split, task submission monitoring, and monitoring the health status of other MasterServer and WorkerServer.
When the MasterServer service starts, it registers a temporary node with Zookeeper, and listens to the Zookeeper temporary node state change for fault tolerance processing.</p>
<h5>The service mainly contains:</h5>
<ul>
<li>
<p><strong>Distributed Quartz</strong> distributed scheduling component, mainly responsible for the start and stop operation of the scheduled task. When the quartz picks up the task, the master internally has a thread pool to be responsible for the subsequent operations of the task.</p>
</li>
<li>
<p><strong>MasterSchedulerThread</strong> is a scan thread that periodically scans the <strong>command</strong> table in the database for different business operations based on different <strong>command types</strong></p>
</li>
<li>
<p><strong>MasterExecThread</strong> is mainly responsible for DAG task segmentation, task submission monitoring, logic processing of various command types</p>
</li>
<li>
<p><strong>MasterTaskExecThread</strong> is mainly responsible for task persistence</p>
</li>
</ul>
</li>
<li>
<p><strong>WorkerServer</strong></p>
<ul>
<li>
<p>WorkerServer also adopts a distributed, non-central design concept. WorkerServer is mainly responsible for task execution and providing log services. When the WorkerServer service starts, it registers the temporary node with Zookeeper and maintains the heartbeat.</p>
<h5>This service contains:</h5>
<ul>
<li><strong>FetchTaskThread</strong> is mainly responsible for continuously receiving tasks from <strong>Task Queue</strong> and calling <strong>TaskScheduleThread</strong> corresponding executors according to different task types.</li>
</ul>
</li>
<li>
<p><strong>ZooKeeper</strong></p>
<p>The ZooKeeper service, the MasterServer and the WorkerServer nodes in the system all use the ZooKeeper for cluster management and fault tolerance. In addition, the system also performs event monitoring and distributed locking based on ZooKeeper.
We have also implemented queues based on Redis, but we hope that DolphinScheduler relies on as few components as possible, so we finally removed the Redis implementation.</p>
</li>
<li>
<p><strong>Task Queue</strong></p>
<p>The task queue operation is provided. Currently, the queue is also implemented based on Zookeeper. Since there is less information stored in the queue, there is no need to worry about too much data in the queue. In fact, we have over-measured a million-level data storage queue, which has no effect on system stability and performance.</p>
</li>
<li>
<p><strong>Alert</strong></p>
<p>Provides alarm-related interfaces. The interfaces mainly include <strong>Alarms</strong>. The storage, query, and notification functions of the two types of alarm data. The notification function has two types: <strong>mail notification</strong> and <strong>SNMP (not yet implemented)</strong>.</p>
</li>
<li>
<p><strong>API</strong></p>
<p>The API interface layer is mainly responsible for processing requests from the front-end UI layer. The service provides a RESTful api to provide request services externally.
Interfaces include workflow creation, definition, query, modification, release, offline, manual start, stop, pause, resume, start execution from this node, and more.</p>
</li>
<li>
<p><strong>UI</strong></p>
<p>The front-end page of the system provides various visual operation interfaces of the system. For details, see the <a href="https://dolphinscheduler.apache.org/en-us/docs/latest/user_doc/about/introduction.html">quick start</a> section.</p>
</li>
</ul>
</li>
</ul>
<h4>2.3 Architectural Design Ideas</h4>
<h5>I. Decentralized vs centralization</h5>
<h6>Centralization Thought</h6>
<p>The centralized design concept is relatively simple. The nodes in the distributed cluster are divided into two roles according to their roles:</p>
<p align="center">
   <img src="https://analysys.github.io/easyscheduler_docs_cn/images/master_slave.png" alt="master-slave role" width="50%" />
 </p>
<ul>
<li>The role of Master is mainly responsible for task distribution and supervising the health status of Slave. It can dynamically balance the task to Slave, so that the Slave node will not be &quot;busy&quot; or &quot;free&quot;.</li>
<li>The role of the Worker is mainly responsible for the execution of the task and maintains the heartbeat with the Master so that the Master can assign tasks to the Slave.</li>
</ul>
<p>Problems in the design of centralized :</p>
<ul>
<li>Once the Master has a problem, the group has no leader and the entire cluster will crash. In order to solve this problem, most Master/Slave architecture modes adopt the design scheme of the master and backup masters, which can be hot standby or cold standby, automatic switching or manual switching, and more and more new systems are available. Automatically elects the ability to switch masters to improve system availability.</li>
<li>Another problem is that if the Scheduler is on the Master, although it can support different tasks in one DAG running on different machines, it will generate overload of the Master. If the Scheduler is on the Slave, all tasks in a DAG can only be submitted on one machine. If there are more parallel tasks, the pressure on the Slave may be larger.</li>
</ul>
<h6>Decentralization</h6>
 <p align="center"
   <img src="https://analysys.github.io/easyscheduler_docs_cn/images/decentralization.png" alt="decentralized" width="50%" />
 </p>
<ul>
<li>In the decentralized design, there is usually no Master/Slave concept, all roles are the same, the status is equal, the global Internet is a typical decentralized distributed system, networked arbitrary node equipment down machine , all will only affect a small range of features.</li>
<li>The core design of decentralized design is that there is no &quot;manager&quot; that is different from other nodes in the entire distributed system, so there is no single point of failure problem. However, since there is no &quot;manager&quot; node, each node needs to communicate with other nodes to get the necessary machine information, and the unreliable line of distributed system communication greatly increases the difficulty of implementing the above functions.</li>
<li>In fact, truly decentralized distributed systems are rare. Instead, dynamic centralized distributed systems are constantly emerging. Under this architecture, the managers in the cluster are dynamically selected, rather than preset, and when the cluster fails, the nodes of the cluster will spontaneously hold &quot;meetings&quot; to elect new &quot;managers&quot;. Go to preside over the work. The most typical case is the Etcd implemented in ZooKeeper and Go.</li>
<li>Decentralization of DolphinScheduler is the registration of Master/Worker to ZooKeeper. The Master Cluster and the Worker Cluster are not centered, and the Zookeeper distributed lock is used to elect one Master or Worker as the “manager” to perform the task.</li>
</ul>
<h5>二、Distributed lock practice</h5>
<p>DolphinScheduler uses ZooKeeper distributed locks to implement only one Master to execute the Scheduler at the same time, or only one Worker to perform task submission.</p>
<ol>
<li>The core process algorithm for obtaining distributed locks is as follows</li>
</ol>
 <p align="center">
   <img src="/img/architecture-design/distributed_lock.png" alt="Get Distributed Lock Process" width="70%" />
 </p>
<ol start="2">
<li>Scheduler thread distributed lock implementation flow chart in DolphinScheduler:</li>
</ol>
 <p align="center">
   <img src="/img/architecture-design/distributed_lock_procss.png" alt="Get Distributed Lock Process" />
 </p>
<h5>Third, the thread is insufficient loop waiting problem</h5>
<ul>
<li>If there is no subprocess in a DAG, if the number of data in the Command is greater than the threshold set by the thread pool, the direct process waits or fails.</li>
<li>If a large number of sub-processes are nested in a large DAG, the following figure will result in a &quot;dead&quot; state:</li>
</ul>
 <p align="center">
   <img src="/img/architecture-design/lack_thread.png" alt="Thread is not enough to wait for loop" width="70%" />
 </p>
<p>In the above figure, MainFlowThread waits for SubFlowThread1 to end, SubFlowThread1 waits for SubFlowThread2 to end, SubFlowThread2 waits for SubFlowThread3 to end, and SubFlowThread3 waits for a new thread in the thread pool, then the entire DAG process cannot end, and thus the thread cannot be released. This forms the state of the child parent process loop waiting. At this point, the scheduling cluster will no longer be available unless a new Master is started to add threads to break such a &quot;stuck.&quot;</p>
<p>It seems a bit unsatisfactory to start a new Master to break the deadlock, so we proposed the following three options to reduce this risk:</p>
<ol>
<li>Calculate the sum of the threads of all Masters, and then calculate the number of threads required for each DAG, that is, pre-calculate before the DAG process is executed. Because it is a multi-master thread pool, the total number of threads is unlikely to be obtained in real time.</li>
<li>Judge the single master thread pool. If the thread pool is full, let the thread fail directly.</li>
<li>Add a Command type with insufficient resources. If the thread pool is insufficient, the main process will be suspended. This way, the thread pool has a new thread, which can make the process with insufficient resources hang up and wake up again.</li>
</ol>
<p>Note: The Master Scheduler thread is FIFO-enabled when it gets the Command.</p>
<p>So we chose the third way to solve the problem of insufficient threads.</p>
<h5>IV. Fault Tolerant Design</h5>
<p>Fault tolerance is divided into service fault tolerance and task retry. Service fault tolerance is divided into two types: Master Fault Tolerance and Worker Fault Tolerance.</p>
<h6>1. Downtime fault tolerance</h6>
<p>Service fault tolerance design relies on ZooKeeper's Watcher mechanism. The implementation principle is as follows:</p>
 <p align="center">
   <img src="/img/architecture-design/fault-tolerant.png" alt="DolphinScheduler Fault Tolerant Design" width="70%" />
 </p>
<p>The Master monitors the directories of other Masters and Workers. If the remove event is detected, the process instance is fault-tolerant or the task instance is fault-tolerant according to the specific business logic.</p>
<ul>
<li>Master fault tolerance flow chart:</li>
</ul>
 <p align="center">
   <img src="/img/architecture-design/fault-tolerant_master.png" alt="Master Fault Tolerance Flowchart" width="70%" />
 </p>
<p>After the ZooKeeper Master is fault-tolerant, it is rescheduled by the Scheduler thread in DolphinScheduler. It traverses the DAG to find the &quot;Running&quot; and &quot;Submit Successful&quot; tasks, and monitors the status of its task instance for the &quot;Running&quot; task. You need to determine whether the Task Queue already exists. If it exists, monitor the status of the task instance. If it does not exist, resubmit the task instance.</p>
<ul>
<li>Worker fault tolerance flow chart:</li>
</ul>
 <p align="center">
   <img src="/img/architecture-design/fault-tolerant_worker.png" alt="Worker Fault Tolerance Flowchart" width="70%" />
 </p>
<p>Once the Master Scheduler thread finds the task instance as &quot;need to be fault tolerant&quot;, it takes over the task and resubmits.</p>
<p>Note: Because the &quot;network jitter&quot; may cause the node to lose the heartbeat of ZooKeeper in a short time, the node's remove event occurs. In this case, we use the easiest way, that is, once the node has timeout connection with ZooKeeper, it will directly stop the Master or Worker service.</p>
<h6>2. Task failure retry</h6>
<p>Here we must first distinguish between the concept of task failure retry, process failure recovery, and process failure rerun:</p>
<ul>
<li>Task failure Retry is task level, which is automatically performed by the scheduling system. For example, if a shell task sets the number of retries to 3 times, then the shell task will try to run up to 3 times after failing to run.</li>
<li>Process failure recovery is process level, is done manually, recovery can only be performed <strong>from the failed node</strong> or <strong>from the current node</strong></li>
<li>Process failure rerun is also process level, is done manually, rerun is from the start node</li>
</ul>
<p>Next, let's talk about the topic, we divided the task nodes in the workflow into two types.</p>
<ul>
<li>One is a business node, which corresponds to an actual script or processing statement, such as a Shell node, an MR node, a Spark node, a dependent node, and so on.</li>
<li>There is also a logical node, which does not do the actual script or statement processing, but the logical processing of the entire process flow, such as sub-flow sections.</li>
</ul>
<p>Each <strong>service node</strong> can configure the number of failed retries. When the task node fails, it will automatically retry until it succeeds or exceeds the configured number of retries. <strong>Logical node</strong> does not support failed retry. But the tasks in the logical nodes support retry.</p>
<p>If there is a task failure in the workflow that reaches the maximum number of retries, the workflow will fail to stop, and the failed workflow can be manually rerun or process resumed.</p>
<h5>V. Task priority design</h5>
<p>In the early scheduling design, if there is no priority design and fair scheduling design, it will encounter the situation that the task submitted first may be completed simultaneously with the task submitted subsequently, but the priority of the process or task cannot be set. We have redesigned this, and we are currently designing it as follows:</p>
<ul>
<li>According to <strong>different process instance priority</strong> prioritizes <strong>same process instance priority</strong> prioritizes <strong>task priority within the same process</strong> takes precedence over <strong>same process</strong> commit order from high Go to low for task processing.
<ul>
<li>The specific implementation is to resolve the priority according to the json of the task instance, and then save the <strong>process instance priority _ process instance id_task priority _ task id</strong> information in the ZooKeeper task queue, when obtained from the task queue, Through string comparison, you can get the task that needs to be executed first.
<ul>
<li>
<p>The priority of the process definition is that some processes need to be processed before other processes. This can be configured at the start of the process or at the time of scheduled start. There are 5 levels, followed by HIGHEST, HIGH, MEDIUM, LOW, and LOWEST. As shown below</p>
<p align="center">
   <img src="/img/architecture-design/process_priority.png" alt="Process Priority Configuration" width="40%" />
 </p>
</li>
<li>
<p>The priority of the task is also divided into 5 levels, followed by HIGHEST, HIGH, MEDIUM, LOW, and LOWEST. As shown below</p>
<p align="center">`
   <img src="/img/architecture-design/task_priority.png" alt="task priority configuration" width="35%" />
 </p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5>VI. Logback and gRPC implement log access</h5>
<ul>
<li>Since the Web (UI) and Worker are not necessarily on the same machine, viewing the log is not as it is for querying local files. There are two options:
<ul>
<li>Put the logs on the ES search engine</li>
<li>Obtain remote log information through gRPC communication</li>
</ul>
</li>
<li>Considering the lightweightness of DolphinScheduler as much as possible, gRPC was chosen to implement remote access log information.</li>
</ul>
 <p align="center">
   <img src="/img/architecture-design/grpc.png" alt="grpc remote access" width="50%" />
 </p>
<ul>
<li>We use a custom Logback FileAppender and Filter function to generate a log file for each task instance.</li>
<li>The main implementation of FileAppender is as follows:</li>
</ul>
<pre><code class="language-java"> <span class="hljs-comment">/**
  * task log appender
  */</span>
 Public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaskLogAppender</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FileAppender</span>&lt;<span class="hljs-title">ILoggingEvent</span>&gt; </span>{
 
     ...

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function">Protected <span class="hljs-keyword">void</span> <span class="hljs-title">append</span><span class="hljs-params">(ILoggingEvent event)</span> </span>{

        If (currentlyActiveFile == <span class="hljs-keyword">null</span>){
            currentlyActiveFile = getFile();
        }
        String activeFile = currentlyActiveFile;
        <span class="hljs-comment">// thread name: taskThreadName-processDefineId_processInstanceId_taskInstanceId</span>
        String threadName = event.getThreadName();
        String[] threadNameArr = threadName.split(<span class="hljs-string">&quot;-&quot;</span>);
        <span class="hljs-comment">// logId = processDefineId_processInstanceId_taskInstanceId</span>
        String logId = threadNameArr[<span class="hljs-number">1</span>];
        ...
        <span class="hljs-keyword">super</span>.subAppend(event);
    }
}
</code></pre>
<p>Generate a log in the form of /process definition id/process instance id/task instance id.log</p>
<ul>
<li>Filter matches the thread name starting with TaskLogInfo:</li>
<li>TaskLogFilter is implemented as follows:</li>
</ul>
<pre><code class="language-java"> <span class="hljs-comment">/**
 * task log filter
 */</span>
Public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaskLogFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Filter</span>&lt;<span class="hljs-title">ILoggingEvent</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function">Public FilterReply <span class="hljs-title">decide</span><span class="hljs-params">(ILoggingEvent event)</span> </span>{
        If (event.getThreadName().startsWith(<span class="hljs-string">&quot;TaskLogInfo-&quot;</span>)){
            Return FilterReply.ACCEPT;
        }
        Return FilterReply.DENY;
    }
}
</code></pre>
<h3>summary</h3>
<p>Starting from the scheduling, this paper introduces the architecture principle and implementation ideas of the big data distributed workflow scheduling system-DolphinScheduler. To be continued</p>
</div></section><footer class="footer-container"><div class="footer-body"><div><h3>About us</h3><h4>Do you need feedback? Please contact us through the following ways.</h4></div><div class="contact-container"><ul><li><a href="https://s.apache.org/dolphinscheduler-slack"><img class="img-base" src="/img/slack.png"/><img class="img-change" src="/img/slack-selected.png"/><p>Slack</p></a></li><li><a href="/en-us/docs/latest/user_doc/contribute/join/subscribe.html"><img class="img-base" src="/img/emailgray.png"/><img class="img-change" src="/img/emailblue.png"/><p>Email List</p></a></li><li><a href="https://twitter.com/dolphinschedule"><img class="img-base" src="/img/twittergray.png"/><img class="img-change" src="/img/twitterblue.png"/><p>Twitter</p></a></li></ul></div><div class="copyright"><span>Copyright © 2019-2022 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="/asset/js/react/react-with-addons.min.js"></script>
  <script src="/asset/js/react/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.4986751.js"></script>
  <script src="/build/docs.md.41e0826.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d6bc736fd9885d9a5dc938425ac062ad";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-899J8PYKJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-899J8PYKJZ');
  </script>
</body>
</html>