{
  "filename": "metadata-1.3.md",
  "__html": "<h1>Dolphin Scheduler 1.3 Metadata document</h1>\n<p><a name=\"25Ald\"></a></p>\n<h3>Table overview</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Table Name</th>\n<th style=\"text-align:center\">Table information</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">t_ds_access_token</td>\n<td style=\"text-align:center\">Access the token of the ds backend</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_alert</td>\n<td style=\"text-align:center\">Warning message</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_alertgroup</td>\n<td style=\"text-align:center\">Alarm group</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_command</td>\n<td style=\"text-align:center\">Excuting an order</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_datasource</td>\n<td style=\"text-align:center\">data source</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_error_command</td>\n<td style=\"text-align:center\">Wrong command</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_process_definition</td>\n<td style=\"text-align:center\">Process definition</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_process_instance</td>\n<td style=\"text-align:center\">Process instance</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_project</td>\n<td style=\"text-align:center\">project</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_queue</td>\n<td style=\"text-align:center\">queue</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_datasource_user</td>\n<td style=\"text-align:center\">User associated data source</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_process_instance</td>\n<td style=\"text-align:center\">Subprocess</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_project_user</td>\n<td style=\"text-align:center\">User-related projects</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_resources_user</td>\n<td style=\"text-align:center\">User associated resources</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_udfs_user</td>\n<td style=\"text-align:center\">User associated UDF function</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_relation_user_alertgroup</td>\n<td style=\"text-align:center\">User associated alarm group</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_resources</td>\n<td style=\"text-align:center\">resource</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_schedules</td>\n<td style=\"text-align:center\">Process timing scheduling</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_session</td>\n<td style=\"text-align:center\">User login session</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_task_instance</td>\n<td style=\"text-align:center\">Task instance</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_tenant</td>\n<td style=\"text-align:center\">Tenant</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_udfs</td>\n<td style=\"text-align:center\">UDF resources</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_user</td>\n<td style=\"text-align:center\">user</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">t_ds_version</td>\n<td style=\"text-align:center\">ds version information</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"VNVGr\"></a></p>\n<h3>user\tqueue\tdata source</h3>\n<p><img src=\"/img/metadata-erd/user-queue-datasource.png\" alt=\"image.png\"></p>\n<ul>\n<li>There can be multiple users under a tenant<br /></li>\n<li>The queue field in t_ds_user stores the queue_name information in the queue list, and t_ds_tenant stores queue_id. During the execution of the process definition, the user queue has the highest priority. If the user queue is empty, the tenant queue is used<br /></li>\n<li>The user_id field in the t_ds_datasource table represents the user who created the data source, and the user_id in t_ds_relation_datasource_user represents the user who has permission to the data source<br />\n<a name=\"HHyGV\"></a></li>\n</ul>\n<h3>project\tResources\tAlert</h3>\n<p><img src=\"/img/metadata-erd/project-resource-alert.png\" alt=\"image.png\"></p>\n<ul>\n<li>A user can have multiple projects, and the user project is authorized to complete the relationship binding between project_id and user_id through the t_ds_relation_project_user table<br /></li>\n<li>The user_id in the t_ds_projcet table represents the user who created the project, and the user_id in the t_ds_relation_project_user table represents the user who has permission to the project<br /></li>\n<li>The user_id in the t_ds_resources table represents the user who created the resource, and the user_id in t_ds_relation_resources_user represents the user who has permission to the resource<br /></li>\n<li>The user_id in the t_ds_udfs table represents the user who created the UDF, and the user_id in the t_ds_relation_udfs_user table represents the user who has permission to the UDF<br />\n<a name=\"Bg2Sn\"></a></li>\n</ul>\n<h3>command\tProcess\ttask</h3>\n<p><img src=\"/img/metadata-erd/command.png\" alt=\"image.png\"><br /><img src=\"/img/metadata-erd/process-task.png\" alt=\"image.png\"></p>\n<ul>\n<li>A project has multiple process definitions, one process definition can generate multiple process instances, and one process instance can generate multiple task instances<br /></li>\n<li>The t_ds_schedulers table stores the timing scheduling information defined by the process<br /></li>\n<li>The data stored in the t_ds_relation_process_instance table is used to handle the case where the process definition contains sub-processes. parent_process_instance_id represents the main process instance id containing the sub-process, process_instance_id represents the id of the sub-process instance, parent_task_instance_id represents the task instance id of the sub-process node, the process instance table and The task instance table corresponds to the t_ds_process_instance table and t_ds_task_instance table respectively\n<a name=\"Pv25P\"></a></li>\n</ul>\n<h3>Core table schema</h3>\n<p><a name=\"32Jzd\"></a></p>\n<h4>t_ds_process_definition</h4>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>int</td>\n<td>Primary key</td>\n</tr>\n<tr>\n<td>name</td>\n<td>varchar</td>\n<td>Process definition name</td>\n</tr>\n<tr>\n<td>version</td>\n<td>int</td>\n<td>Process definition version</td>\n</tr>\n<tr>\n<td>release_state</td>\n<td>tinyint</td>\n<td>Release status of the process definition: 0 Not online  1 Online</td>\n</tr>\n<tr>\n<td>project_id</td>\n<td>int</td>\n<td>project id</td>\n</tr>\n<tr>\n<td>user_id</td>\n<td>int</td>\n<td>User to whom the process definition belongs id</td>\n</tr>\n<tr>\n<td>process_definition_json</td>\n<td>longtext</td>\n<td>Process definition json string</td>\n</tr>\n<tr>\n<td>description</td>\n<td>text</td>\n<td>Process definition description</td>\n</tr>\n<tr>\n<td>global_params</td>\n<td>text</td>\n<td>Global parameters</td>\n</tr>\n<tr>\n<td>flag</td>\n<td>tinyint</td>\n<td>Whether the process is available: 0 is not available, 1 is available</td>\n</tr>\n<tr>\n<td>locations</td>\n<td>text</td>\n<td>Node coordinate information</td>\n</tr>\n<tr>\n<td>connects</td>\n<td>text</td>\n<td>Node connection information</td>\n</tr>\n<tr>\n<td>receivers</td>\n<td>text</td>\n<td>Recipient</td>\n</tr>\n<tr>\n<td>receivers_cc</td>\n<td>text</td>\n<td>Cc</td>\n</tr>\n<tr>\n<td>create_time</td>\n<td>datetime</td>\n<td>Creation time</td>\n</tr>\n<tr>\n<td>timeout</td>\n<td>int</td>\n<td>overtime time</td>\n</tr>\n<tr>\n<td>tenant_id</td>\n<td>int</td>\n<td>queue id</td>\n</tr>\n<tr>\n<td>update_time</td>\n<td>datetime</td>\n<td>Update time</td>\n</tr>\n<tr>\n<td>modify_by</td>\n<td>varchar</td>\n<td>Modify user</td>\n</tr>\n<tr>\n<td>resource_ids</td>\n<td>varchar</td>\n<td>Resource id set</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"e6jfz\"></a></p>\n<h4>t_ds_process_instance</h4>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>int</td>\n<td>Primary key</td>\n</tr>\n<tr>\n<td>name</td>\n<td>varchar</td>\n<td>Process instance name</td>\n</tr>\n<tr>\n<td>process_definition_id</td>\n<td>int</td>\n<td>Process definition id</td>\n</tr>\n<tr>\n<td>state</td>\n<td>tinyint</td>\n<td>Process instance status: 0 Submitted successfully,1 running,2 Ready to pause,3 time out,4 Ready to stop,5 stop,6 failure,7 success,8 Need for fault tolerance,9 kill,10 Waiting thread,11 Wait for dependencies to complete</td>\n</tr>\n<tr>\n<td>recovery</td>\n<td>tinyint</td>\n<td>Process instance fault tolerance ID: 0 normal,1 Need to be restarted by fault tolerance</td>\n</tr>\n<tr>\n<td>start_time</td>\n<td>datetime</td>\n<td>Process instance start time</td>\n</tr>\n<tr>\n<td>end_time</td>\n<td>datetime</td>\n<td>Process instance end time</td>\n</tr>\n<tr>\n<td>run_times</td>\n<td>int</td>\n<td>Number of process instance runs</td>\n</tr>\n<tr>\n<td>host</td>\n<td>varchar</td>\n<td>The machine where the process instance is located</td>\n</tr>\n<tr>\n<td>command_type</td>\n<td>tinyint</td>\n<td>Command type: 0 Start the workflow,1 Start execution from the current node,2 Restore a fault-tolerant workflow,3 Resume suspended process,4 Start execution from the failed node,5 Complement,6 Scheduling,7 Rerun,8 time out,9 stop,10 Resume waiting thread</td>\n</tr>\n<tr>\n<td>command_param</td>\n<td>text</td>\n<td>Command parameters (json format）</td>\n</tr>\n<tr>\n<td>task_depend_type</td>\n<td>tinyint</td>\n<td>Node dependency type: 0 current node, 1 forward execution, 2 backward execution</td>\n</tr>\n<tr>\n<td>max_try_times</td>\n<td>tinyint</td>\n<td>Maximum number of retries</td>\n</tr>\n<tr>\n<td>failure_strategy</td>\n<td>tinyint</td>\n<td>Failure strategy 0 ends after failure, 1 continues after failure</td>\n</tr>\n<tr>\n<td>warning_type</td>\n<td>tinyint</td>\n<td>Alarm type: 0 not sent, 1 sent if the process is successful, 2 sent if the process fails, 3 sent both if the process fails</td>\n</tr>\n<tr>\n<td>warning_group_id</td>\n<td>int</td>\n<td>Alarm group id</td>\n</tr>\n<tr>\n<td>schedule_time</td>\n<td>datetime</td>\n<td>Expected running time</td>\n</tr>\n<tr>\n<td>command_start_time</td>\n<td>datetime</td>\n<td>Start command time</td>\n</tr>\n<tr>\n<td>global_params</td>\n<td>text</td>\n<td>Global parameters (parameters defined by the curing process)</td>\n</tr>\n<tr>\n<td>process_instance_json</td>\n<td>longtext</td>\n<td>Process instance json (json of the process definition of copy)</td>\n</tr>\n<tr>\n<td>flag</td>\n<td>tinyint</td>\n<td>Is it available, 1 is available, 0 is not available</td>\n</tr>\n<tr>\n<td>update_time</td>\n<td>timestamp</td>\n<td>Update time</td>\n</tr>\n<tr>\n<td>is_sub_process</td>\n<td>int</td>\n<td>Is it a sub-workflow 1 yes, 0 no</td>\n</tr>\n<tr>\n<td>executor_id</td>\n<td>int</td>\n<td>Command execution user</td>\n</tr>\n<tr>\n<td>locations</td>\n<td>text</td>\n<td>Node coordinate information</td>\n</tr>\n<tr>\n<td>connects</td>\n<td>text</td>\n<td>Node connection information</td>\n</tr>\n<tr>\n<td>history_cmd</td>\n<td>text</td>\n<td>Historical commands, record all operations on process instances</td>\n</tr>\n<tr>\n<td>dependence_schedule_times</td>\n<td>text</td>\n<td>Depend on the estimated time of the node</td>\n</tr>\n<tr>\n<td>process_instance_priority</td>\n<td>int</td>\n<td>Process instance priority: 0 Highest, 1 High, 2 Medium, 3 Low, 4 Lowest</td>\n</tr>\n<tr>\n<td>worker_group</td>\n<td>varchar</td>\n<td>Tasks specify the group of workers to run</td>\n</tr>\n<tr>\n<td>timeout</td>\n<td>int</td>\n<td>overtime time</td>\n</tr>\n<tr>\n<td>tenant_id</td>\n<td>int</td>\n<td>queue id</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"IvHEc\"></a></p>\n<h4>t_ds_task_instance</h4>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>int</td>\n<td>Primary key</td>\n</tr>\n<tr>\n<td>name</td>\n<td>varchar</td>\n<td>mission name</td>\n</tr>\n<tr>\n<td>task_type</td>\n<td>varchar</td>\n<td>Task type</td>\n</tr>\n<tr>\n<td>process_definition_id</td>\n<td>int</td>\n<td>Process definition id</td>\n</tr>\n<tr>\n<td>process_instance_id</td>\n<td>int</td>\n<td>Process instance id</td>\n</tr>\n<tr>\n<td>task_json</td>\n<td>longtext</td>\n<td>Task node json</td>\n</tr>\n<tr>\n<td>state</td>\n<td>tinyint</td>\n<td>Task instance status: 0 submitted successfully, 1 running, 2 ready to be suspended, 3 suspended, 4 ready to stop, 5 stopped, 6 failed, 7 successful, 8 needs fault tolerance, 9 kill, 10 waiting for thread, 11 waiting for dependency to complete</td>\n</tr>\n<tr>\n<td>submit_time</td>\n<td>datetime</td>\n<td>Task submission time</td>\n</tr>\n<tr>\n<td>start_time</td>\n<td>datetime</td>\n<td>Task start time</td>\n</tr>\n<tr>\n<td>end_time</td>\n<td>datetime</td>\n<td>Task end time</td>\n</tr>\n<tr>\n<td>host</td>\n<td>varchar</td>\n<td>The machine performing the task</td>\n</tr>\n<tr>\n<td>execute_path</td>\n<td>varchar</td>\n<td>Task execution path</td>\n</tr>\n<tr>\n<td>log_path</td>\n<td>varchar</td>\n<td>Task log path</td>\n</tr>\n<tr>\n<td>alert_flag</td>\n<td>tinyint</td>\n<td>Whether to alert</td>\n</tr>\n<tr>\n<td>retry_times</td>\n<td>int</td>\n<td>number of retries</td>\n</tr>\n<tr>\n<td>pid</td>\n<td>int</td>\n<td>Process pid</td>\n</tr>\n<tr>\n<td>app_link</td>\n<td>varchar</td>\n<td>yarn app id</td>\n</tr>\n<tr>\n<td>flag</td>\n<td>tinyint</td>\n<td>vailability: 0 is not available, 1 is available</td>\n</tr>\n<tr>\n<td>retry_interval</td>\n<td>int</td>\n<td>Retry interval</td>\n</tr>\n<tr>\n<td>max_retry_times</td>\n<td>int</td>\n<td>Maximum number of retries</td>\n</tr>\n<tr>\n<td>task_instance_priority</td>\n<td>int</td>\n<td>Task instance priority: 0 Highest, 1 High, 2 Medium, 3 Low, 4 Lowest</td>\n</tr>\n<tr>\n<td>worker_group</td>\n<td>varchar</td>\n<td>Tasks specify the group of workers to run</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"pPQkU\"></a></p>\n<h4>t_ds_schedules</h4>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>int</td>\n<td>Primary key</td>\n</tr>\n<tr>\n<td>process_definition_id</td>\n<td>int</td>\n<td>Process definition id</td>\n</tr>\n<tr>\n<td>start_time</td>\n<td>datetime</td>\n<td>Schedule start time</td>\n</tr>\n<tr>\n<td>end_time</td>\n<td>datetime</td>\n<td>Schedule end time</td>\n</tr>\n<tr>\n<td>crontab</td>\n<td>varchar</td>\n<td>crontab expression</td>\n</tr>\n<tr>\n<td>failure_strategy</td>\n<td>tinyint</td>\n<td>Failure strategy: 0 ends, 1 continues</td>\n</tr>\n<tr>\n<td>user_id</td>\n<td>int</td>\n<td>User id</td>\n</tr>\n<tr>\n<td>release_state</td>\n<td>tinyint</td>\n<td>Status: 0 not online, 1 online</td>\n</tr>\n<tr>\n<td>warning_type</td>\n<td>tinyint</td>\n<td>Alarm type: 0 not sent, 1 sent if the process is successful, 2 sent if the process fails, 3 sent both if the process fails</td>\n</tr>\n<tr>\n<td>warning_group_id</td>\n<td>int</td>\n<td>Alarm group id</td>\n</tr>\n<tr>\n<td>process_instance_priority</td>\n<td>int</td>\n<td>Process instance priority：0 Highest,1 High,2 Medium,3 Low,4 Lowest</td>\n</tr>\n<tr>\n<td>worker_group</td>\n<td>varchar</td>\n<td>Tasks specify the group of workers to run</td>\n</tr>\n<tr>\n<td>create_time</td>\n<td>datetime</td>\n<td>Creation time</td>\n</tr>\n<tr>\n<td>update_time</td>\n<td>datetime</td>\n<td>Update time</td>\n</tr>\n</tbody>\n</table>\n<p><a name=\"TkQzn\"></a></p>\n<h4>t_ds_command</h4>\n<table>\n<thead>\n<tr>\n<th>Field</th>\n<th>Type</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>int</td>\n<td>Primary key</td>\n</tr>\n<tr>\n<td>command_type</td>\n<td>tinyint</td>\n<td>Command type: 0 start the workflow, 1 start execution from the current node, 2 resume the fault-tolerant workflow, 3 resume the suspended process, 4 start execution from the failed node, 5 complement, 6 schedule, 7 rerun, 8 pause, 9 Stop, 10 resume waiting thread</td>\n</tr>\n<tr>\n<td>process_definition_id</td>\n<td>int</td>\n<td>Process definition id</td>\n</tr>\n<tr>\n<td>command_param</td>\n<td>text</td>\n<td>Command parameters (json format)</td>\n</tr>\n<tr>\n<td>task_depend_type</td>\n<td>tinyint</td>\n<td>Node dependency type: 0 current node, 1 forward execution, 2 backward execution</td>\n</tr>\n<tr>\n<td>failure_strategy</td>\n<td>tinyint</td>\n<td>Failure strategy: 0 ends, 1 continues</td>\n</tr>\n<tr>\n<td>warning_type</td>\n<td>tinyint</td>\n<td>Alarm type: 0 not sent, 1 sent if the process is successful, 2 sent if the process fails, 3 sent both if the process fails</td>\n</tr>\n<tr>\n<td>warning_group_id</td>\n<td>int</td>\n<td>Alarm group</td>\n</tr>\n<tr>\n<td>schedule_time</td>\n<td>datetime</td>\n<td>Expected running time</td>\n</tr>\n<tr>\n<td>start_time</td>\n<td>datetime</td>\n<td>Starting time</td>\n</tr>\n<tr>\n<td>executor_id</td>\n<td>int</td>\n<td>Execute user id</td>\n</tr>\n<tr>\n<td>dependence</td>\n<td>varchar</td>\n<td>Dependent field</td>\n</tr>\n<tr>\n<td>update_time</td>\n<td>datetime</td>\n<td>Update time</td>\n</tr>\n<tr>\n<td>process_instance_priority</td>\n<td>int</td>\n<td>Process instance priority：0 Highest,1 High,2 Medium,3 Low,4 Lowest</td>\n</tr>\n<tr>\n<td>worker_group</td>\n<td>varchar</td>\n<td>Tasks specify the group of workers to run</td>\n</tr>\n</tbody>\n</table>\n",
  "link": "/dist/en-us/docs/1.3.1/user_doc/metadata-1.3.html",
  "meta": {}
}