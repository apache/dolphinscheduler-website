

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Concepts &mdash; apache-dolphinscheduler 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d45e8c67"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/tabs.js?v=3ee01567"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tasks" href="tasks/index.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            apache-dolphinscheduler
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#process-definition">Process Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#schedule">Schedule</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tenant">Tenant</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tasks">Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tasks-dependence">Tasks Dependence</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-with-process-definition">Task With Process Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tasks/index.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto/index.html">HOWTOs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">apache-dolphinscheduler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Concepts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/concept.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Link to this heading"></a></h1>
<p>In this section, you would know the core concepts of <em>PyDolphinScheduler</em>.</p>
<section id="process-definition">
<h2>Process Definition<a class="headerlink" href="#process-definition" title="Link to this heading"></a></h2>
<p>Process definition describe the whole things except <a class="reference internal" href="#tasks">tasks</a> and <a class="reference internal" href="#tasks-dependence">tasks dependence</a>, which including
name, schedule interval, schedule start time and end time. You would know scheduler</p>
<p>Process definition could be initialized in normal assign statement or in context manger.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialization with assign statement</span>
<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessDefinition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my first process definition&quot;</span><span class="p">)</span>

<span class="c1"># Or context manger</span>
<span class="k">with</span> <span class="n">ProcessDefinition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my first process definition&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pd</span><span class="p">:</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</pre></div>
</div>
<p>Process definition is the main object communicate between <em>PyDolphinScheduler</em> and DolphinScheduler daemon.
After process definition and task is be declared, you could use <cite>submit</cite> and <cite>run</cite> notify server your definition.</p>
<p>If you just want to submit your definition and create workflow, without run it, you should use attribute <cite>submit</cite>.
But if you want to run the workflow after you submit it, you could use attribute <cite>run</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Just submit definition, without run it</span>
<span class="n">pd</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>

<span class="c1"># Both submit and run definition</span>
<span class="n">pd</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<section id="schedule">
<h3>Schedule<a class="headerlink" href="#schedule" title="Link to this heading"></a></h3>
<p>We use parameter <cite>schedule</cite> determine the schedule interval of workflow, <em>PyDolphinScheduler</em> support seven
asterisks expression, and each of the meaning of position as below</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>* * * * * * *
┬ ┬ ┬ ┬ ┬ ┬ ┬
│ │ │ │ │ │ │
│ │ │ │ │ │ └─── year
│ │ │ │ │ └───── day of week (0 - 7) (0 to 6 are Sunday to Saturday, or use names; 7 is Sunday, the same as 0)
│ │ │ │ └─────── month (1 - 12)
│ │ │ └───────── day of month (1 - 31)
│ │ └─────────── hour (0 - 23)
│ └───────────── min (0 - 59)
└─────────────── second (0 - 59)
</pre></div>
</div>
<p>Here we add some example crontab:</p>
<ul class="simple">
<li><p><cite>0 0 0 * * ? *</cite>: Workflow execute every day at 00:00:00.</p></li>
<li><p><cite>10 2 * * * ? *</cite>: Workflow execute hourly day at ten pass two.</p></li>
<li><p><cite>10,11 20 0 1,2 * ? *</cite>: Workflow execute first and second day of month at 00:20:10 and 00:20:11.</p></li>
</ul>
</section>
<section id="tenant">
<h3>Tenant<a class="headerlink" href="#tenant" title="Link to this heading"></a></h3>
<p>Tenant is the user who run task command in machine or in virtual machine. it could be assign by simple string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessDefinition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;process definition tenant&quot;</span><span class="p">,</span> <span class="n">tenant</span><span class="o">=</span><span class="s2">&quot;tenant_exists&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make should tenant exists in target machine, otherwise it will raise an error when you try to run command</p>
</div>
</section>
</section>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Link to this heading"></a></h2>
<p>Task is the minimum unit running actual job, and it is nodes of DAG, aka directed acyclic graph. You could define
what you want to in the task. It have some required parameter to make uniqueness and definition.</p>
<p>Here we use <a class="reference internal" href="api.html#pydolphinscheduler.tasks.Shell" title="pydolphinscheduler.tasks.Shell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pydolphinscheduler.tasks.Shell()</span></code></a> as example, parameter <cite>name</cite> and <cite>command</cite> is required and must be provider. Parameter
<cite>name</cite> set name to the task, and parameter <cite>command</cite> declare the command you wish to run in this task.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># We named this task as &quot;shell&quot;, and just run command `echo shell task`</span>
<span class="n">shell_task</span> <span class="o">=</span> <span class="n">Shell</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;shell&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s2">&quot;echo shell task&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to see all type of tasks, you could see <a class="reference internal" href="tasks/index.html"><span class="doc">Tasks</span></a>.</p>
<section id="tasks-dependence">
<h3>Tasks Dependence<a class="headerlink" href="#tasks-dependence" title="Link to this heading"></a></h3>
<p>You could define many tasks in on single <a class="reference internal" href="#process-definition">Process Definition</a>. If all those task is in parallel processing,
then you could leave them alone without adding any additional information. But if there have some tasks should
not be run unless pre task in workflow have be done, we should set task dependence to them. Set tasks dependence
have two mainly way and both of them is easy. You could use bitwise operator <cite>&gt;&gt;</cite> and <cite>&lt;&lt;</cite>, or task attribute
<cite>set_downstream</cite> and <cite>set_upstream</cite> to do it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set task1 as task2 upstream</span>
<span class="n">task1</span> <span class="o">&gt;&gt;</span> <span class="n">task2</span>
<span class="c1"># You could use attribute `set_downstream` too, is same as `task1 &gt;&gt; task2`</span>
<span class="n">task1</span><span class="o">.</span><span class="n">set_downstream</span><span class="p">(</span><span class="n">task2</span><span class="p">)</span>

<span class="c1"># Set task1 as task2 downstream</span>
<span class="n">task1</span> <span class="o">&lt;&lt;</span> <span class="n">task2</span>
<span class="c1"># It is same as attribute `set_upstream`</span>
<span class="n">task1</span><span class="o">.</span><span class="n">set_upstream</span><span class="p">(</span><span class="n">task2</span><span class="p">)</span>

<span class="c1"># Beside, we could set dependence between task and sequence of tasks,</span>
<span class="c1"># we set `task1` is upstream to both `task2` and `task3`. It is useful</span>
<span class="c1"># for some tasks have same dependence.</span>
<span class="n">task1</span> <span class="o">&gt;&gt;</span> <span class="p">[</span><span class="n">task2</span><span class="p">,</span> <span class="n">task3</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="task-with-process-definition">
<h3>Task With Process Definition<a class="headerlink" href="#task-with-process-definition" title="Link to this heading"></a></h3>
<p>In most of data orchestration cases, you should assigned attribute <cite>process_definition</cite> to task instance to
decide workflow of task. You could set <cite>process_definition</cite> in both normal assign or in context manger mode</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Normal assign, have to explicit declaration and pass `ProcessDefinition` instance to task</span>
<span class="n">pd</span> <span class="o">=</span> <span class="n">ProcessDefinition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my first process definition&quot;</span><span class="p">)</span>
<span class="n">shell_task</span> <span class="o">=</span> <span class="n">Shell</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;shell&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s2">&quot;echo shell task&quot;</span><span class="p">,</span> <span class="n">process_definition</span><span class="o">=</span><span class="n">pd</span><span class="p">)</span>

<span class="c1"># Context manger, `ProcessDefinition` instance pd would implicit declaration to task</span>
<span class="k">with</span> <span class="n">ProcessDefinition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my first process definition&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pd</span><span class="p">:</span>
    <span class="n">shell_task</span> <span class="o">=</span> <span class="n">Shell</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;shell&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="s2">&quot;echo shell task&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>With both <a class="reference internal" href="#process-definition">Process Definition</a>, <a class="reference internal" href="#tasks">Tasks</a>  and <a class="reference internal" href="#tasks-dependence">Tasks Dependence</a>, we could build a workflow with multiple tasks.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial.html" class="btn btn-neutral float-left" title="Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tasks/index.html" class="btn btn-neutral float-right" title="Tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, apache.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 3.1.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../2.0.5/concept.html">2.0.5</a></dd>
      <dd><a href="../2.0.6/concept.html">2.0.6</a></dd>
      <dd><a href="../2.0.7/concept.html">2.0.7</a></dd>
      <dd><a href="../3.0.0/concept.html">3.0.0</a></dd>
      <dd><a href="../3.0.1/concept.html">3.0.1</a></dd>
      <dd><a href="concept.html">3.1.0</a></dd>
      <dd><a href="../4.0.0/concept.html">4.0.0</a></dd>
      <dd><a href="../4.0.1/concept.html">4.0.1</a></dd>
      <dd><a href="../4.0.2/concept.html">4.0.2</a></dd>
      <dd><a href="../4.0.3/concept.html">4.0.3</a></dd>
      <dd><a href="../4.0.4/concept.html">4.0.4</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../main/concept.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>