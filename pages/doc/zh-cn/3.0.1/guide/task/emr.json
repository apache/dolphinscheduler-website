{
  "__html": "<h1 id=\"amazon-emr\">Amazon EMR</h1>\n<h2 id=\"综述\">综述</h2>\n<p>Amazon EMR任务类型，用于在AWS上创建EMR集群并执行计算任务。 后台使用<a href=\"https://aws.amazon.com/cn/sdk-for-java/\">aws-java-sdk</a> 将json参数转换为<a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticmapreduce/model/RunJobFlowRequest.html\">RunJobFlowRequest</a> 对象，提交到AWS</p>\n<h2 id=\"任务参数\">任务参数</h2>\n<ul>\n<li>节点名称：一个工作流定义中的节点名称是唯一的。</li>\n<li>运行标志：标识这个节点是否能正常调度,如果不需要执行，可以打开禁止执行开关。</li>\n<li>描述信息：描述该节点的功能。</li>\n<li>任务优先级：worker线程数不足时，根据优先级从高到低依次执行，优先级一样时根据先进先出原则执行。</li>\n<li>Worker分组：任务分配给worker组的机器机执行，选择Default，会随机选择一台worker机执行。</li>\n<li>失败重试次数：任务失败重新提交的次数，支持下拉和手填。</li>\n<li>失败重试间隔：任务失败重新提交任务的时间间隔，支持下拉和手填。</li>\n<li>超时告警：勾选超时告警、超时失败，当任务超过&quot;超时时长&quot;后，会发送告警邮件并且任务执行失败.</li>\n<li>json: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticmapreduce/model/RunJobFlowRequest.html\">RunJobFlowRequest</a> 对象对应的json，详细json定义参见 <a href=\"https://docs.aws.amazon.com/emr/latest/APIReference/API_RunJobFlow.html#API_RunJobFlow_Examples\">API_RunJobFlow_Examples</a></li>\n</ul>\n<h2 id=\"json参数样例\">json参数样例</h2>\n<pre><code class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;Name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;SparkPi&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;ReleaseLabel&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;emr-5.34.0&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;Applications&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;Name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Spark&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;Instances&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;InstanceGroups&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n      <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;Name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Primary node&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">&quot;InstanceRole&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;MASTER&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">&quot;InstanceType&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;m4.xlarge&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">&quot;InstanceCount&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span>\n      <span class=\"hljs-punctuation\">}</span>\n    <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;KeepJobFlowAliveWhenNoSteps&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;TerminationProtected&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"hljs-keyword\">false</span></span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;Steps&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n    <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;Name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;calculate_pi&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;ActionOnFailure&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;CONTINUE&quot;</span><span class=\"hljs-punctuation\">,</span>\n      <span class=\"hljs-attr\">&quot;HadoopJarStep&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n        <span class=\"hljs-attr\">&quot;Jar&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;command-runner.jar&quot;</span><span class=\"hljs-punctuation\">,</span>\n        <span class=\"hljs-attr\">&quot;Args&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span>\n          <span class=\"hljs-string\">&quot;/usr/lib/spark/bin/run-example&quot;</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-string\">&quot;SparkPi&quot;</span><span class=\"hljs-punctuation\">,</span>\n          <span class=\"hljs-string\">&quot;15&quot;</span>\n        <span class=\"hljs-punctuation\">]</span>\n      <span class=\"hljs-punctuation\">}</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;JobFlowRole&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;EMR_EC2_DefaultRole&quot;</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;ServiceRole&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;EMR_DefaultRole&quot;</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n",
  "location": [
    "功能介绍",
    "任务类型",
    "Amazon EMR"
  ],
  "time": "2022-9-26",
  "structure": [
    {
      "title": "综述",
      "children": [],
      "anchor": "综述"
    },
    {
      "title": "任务参数",
      "children": [],
      "anchor": "任务参数"
    },
    {
      "title": "json参数样例",
      "children": [],
      "anchor": "json参数样例"
    }
  ],
  "title": "Amazon EMR",
  "link": "/guide/task/emr"
}