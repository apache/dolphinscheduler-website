{
  "__html": "<h1 id=\"远程日志存储（remote-logging）\">远程日志存储（Remote Logging）</h1>\n<p>Apache DolphinScheduler支持将任务日志传输到远端存储上。当配置开启远程日志存储后，DolphinScheduler将在任务结束后，将对应的任务日志异步地发送到指定的远端存储上。此外，用户在查看或下载任务日志时，若本地没有该日志文件，DolphinScheduler将从远端存储上下载对应的日志文件到本地文件系统。</p>\n<h2 id=\"开启远程日志存储\">开启远程日志存储</h2>\n<p>如果您以 <code>集群</code> 模式或者 <code>伪集群</code> 模式部署DolphinScheduler，您需要对以下路径的文件进行配置：<code>api-server/conf/common.properties</code>，<code>master-server/conf/common.properties</code>和 <code>worker-server/conf/common.properties</code>；\n若您以 <code>单机</code> 模式部署DolphinScheduler，您只需要配置 <code>standalone-server/conf/common.properties</code>，具体配置如下：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># 是否开启远程日志存储</span>\n<span class=\"hljs-attr\">remote.logging.enable</span>=<span class=\"hljs-string\">true</span>\n<span class=\"hljs-comment\"># 任务日志写入的远端存储，目前支持OSS, S3, GCS</span>\n<span class=\"hljs-attr\">remote.logging.target</span>=<span class=\"hljs-string\">OSS</span>\n<span class=\"hljs-comment\"># 任务日志在远端存储上的目录</span>\n<span class=\"hljs-attr\">remote.logging.base.dir</span>=<span class=\"hljs-string\">logs</span>\n<span class=\"hljs-comment\"># 设置向远端存储异步发送日志的线程池大小</span>\n<span class=\"hljs-attr\">remote.logging.thread.pool.size</span>=<span class=\"hljs-string\">10</span>\n</code></pre>\n<h2 id=\"将任务日志写入<a-href=\"https://www.aliyun.com/product/oss\">阿里云对象存储（oss）</a>\">将任务日志写入<a href=\"https://www.aliyun.com/product/oss\">阿里云对象存储（OSS）</a></h2>\n<p>配置<code>common.propertis</code>如下：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># oss access key id, required if you set remote.logging.target=OSS</span>\n<span class=\"hljs-attr\">remote.logging.oss.access.key.id</span>=<span class=\"hljs-string\">&lt;access.key.id&gt;</span>\n<span class=\"hljs-comment\"># oss access key secret, required if you set remote.logging.target=OSS</span>\n<span class=\"hljs-attr\">remote.logging.oss.access.key.secret</span>=<span class=\"hljs-string\">&lt;access.key.secret&gt;</span>\n<span class=\"hljs-comment\"># oss bucket name, required if you set remote.logging.target=OSS</span>\n<span class=\"hljs-attr\">remote.logging.oss.bucket.name</span>=<span class=\"hljs-string\">&lt;bucket.name&gt;</span>\n<span class=\"hljs-comment\"># oss endpoint, required if you set remote.logging.target=OSS</span>\n<span class=\"hljs-attr\">remote.logging.oss.endpoint</span>=<span class=\"hljs-string\">&lt;endpoint&gt;</span>\n</code></pre>\n<h2 id=\"将任务日志写入<a-href=\"https://aws.amazon.com/cn/s3/\">amazon-s3</a>\">将任务日志写入<a href=\"https://aws.amazon.com/cn/s3/\">Amazon S3</a></h2>\n<p>配置<code>common.propertis</code>如下：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># s3 access key id, required if you set remote.logging.target=S3</span>\n<span class=\"hljs-attr\">remote.logging.s3.access.key.id</span>=<span class=\"hljs-string\">&lt;access.key.id&gt;</span>\n<span class=\"hljs-comment\"># s3 access key secret, required if you set remote.logging.target=S3</span>\n<span class=\"hljs-attr\">remote.logging.s3.access.key.secret</span>=<span class=\"hljs-string\">&lt;access.key.secret&gt;</span>\n<span class=\"hljs-comment\"># s3 bucket name, required if you set remote.logging.target=S3</span>\n<span class=\"hljs-attr\">remote.logging.s3.bucket.name</span>=<span class=\"hljs-string\">&lt;bucket.name&gt;</span>\n<span class=\"hljs-comment\"># s3 endpoint, required if you set remote.logging.target=S3</span>\n<span class=\"hljs-attr\">remote.logging.s3.endpoint</span>=<span class=\"hljs-string\">&lt;endpoint&gt;</span>\n<span class=\"hljs-comment\"># s3 region, required if you set remote.logging.target=S3</span>\n<span class=\"hljs-attr\">remote.logging.s3.region</span>=<span class=\"hljs-string\">&lt;region&gt;</span>\n</code></pre>\n<h2 id=\"将任务日志写入<a-href=\"https://cloud.google.com/storage\">google-cloud-storage-(gcs)</a>\">将任务日志写入<a href=\"https://cloud.google.com/storage\">Google Cloud Storage (GCS)</a></h2>\n<p>配置<code>common.propertis</code>如下：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># the location of the google cloud credential, required if you set remote.logging.target=GCS</span>\n<span class=\"hljs-attr\">remote.logging.google.cloud.storage.credential</span>=<span class=\"hljs-string\">/path/to/credential</span>\n<span class=\"hljs-comment\"># gcs bucket name, required if you set remote.logging.target=GCS</span>\n<span class=\"hljs-attr\">remote.logging.google.cloud.storage.bucket.name</span>=<span class=\"hljs-string\">&lt;your-bucket&gt;</span>\n</code></pre>\n<h2 id=\"将任务日志写入<a-href=\"https://azure.microsoft.com/en-us/products/storage/blobs\">azure-blob-storage-(abs)</a>\">将任务日志写入<a href=\"https://azure.microsoft.com/en-us/products/storage/blobs\">Azure Blob Storage (ABS)</a></h2>\n<p>配置<code>common.propertis</code>如下：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># abs container name, required if you set resource.storage.type=ABS</span>\n<span class=\"hljs-attr\">resource.azure.blob.storage.container.name</span>=<span class=\"hljs-string\">&lt;your-container&gt;</span>\n<span class=\"hljs-comment\"># abs account name, required if you set resource.storage.type=ABS</span>\n<span class=\"hljs-attr\">resource.azure.blob.storage.account.name</span>=<span class=\"hljs-string\">&lt;your-account-name&gt;</span>\n<span class=\"hljs-comment\"># abs connection string, required if you set resource.storage.type=ABS</span>\n<span class=\"hljs-attr\">resource.azure.blob.storage.connection.string</span>=<span class=\"hljs-string\">&lt;your-connection-string&gt;</span>\n</code></pre>\n<h3 id=\"注意事项\">注意事项</h3>\n<p>由于Azure Blob Storage不支持空目录单独存在，因此资源目录下会有空文件<code>&lt;no name&gt;</code>。但是并不影响Dolphinscheduler资源中心上的文件展示。</p>\n",
  "location": [
    "功能介绍",
    "远程日志存储"
  ],
  "time": "2024-2-11",
  "structure": [
    {
      "title": "开启远程日志存储",
      "children": [
        {
          "title": "注意事项",
          "children": [],
          "anchor": "注意事项"
        }
      ],
      "anchor": "开启远程日志存储"
    },
    {
      "title": "将任务日志写入阿里云对象存储（OSS）",
      "children": [
        {
          "title": "注意事项",
          "children": [],
          "anchor": "注意事项"
        }
      ],
      "anchor": "将任务日志写入阿里云对象存储（oss）"
    },
    {
      "title": "将任务日志写入Amazon S3",
      "children": [
        {
          "title": "注意事项",
          "children": [],
          "anchor": "注意事项"
        }
      ],
      "anchor": "将任务日志写入amazon-s3"
    },
    {
      "title": "将任务日志写入Google Cloud Storage (GCS)",
      "children": [
        {
          "title": "注意事项",
          "children": [],
          "anchor": "注意事项"
        }
      ],
      "anchor": "将任务日志写入google-cloud-storage-(gcs)"
    },
    {
      "title": "将任务日志写入Azure Blob Storage (ABS)",
      "children": [
        {
          "title": "注意事项",
          "children": [],
          "anchor": "注意事项"
        }
      ],
      "anchor": "将任务日志写入azure-blob-storage-(abs)"
    }
  ],
  "title": "远程日志存储（Remote Logging）",
  "link": "/guide/remote-logging"
}