{
  "__html": "<h1 id=\"任务组管理\">任务组管理</h1>\n<p>任务组主要用于控制任务实例并发，旨在控制其他资源的压力（也可以控制 Hadoop 集群压力，不过集群会有队列管控）。您可在新建任务定义时，可配置对应的任务组，并配置任务在任务组内运行的优先级。</p>\n<blockquote>\n<p>注意：任务组的对资源的限制是在项目级别的，和租户没有关系</p>\n</blockquote>\n<h3 id=\"任务组配置\">任务组配置</h3>\n<h4 id=\"新建任务组\">新建任务组</h4>\n<p><img src=\"/img/new_ui/dev/resource/taskGroup.png\" alt=\"taskGroup\"></p>\n<p>用户点击【资源中心】-【任务组管理】-【任务组配置】-新建任务组</p>\n<p><img src=\"/img/new_ui/dev/resource/create-taskGroup.png\" alt=\"create-taskGroup\"></p>\n<p>您需要输入图片中信息，其中</p>\n<p>【任务组名称】：任务组在被使用时显示的名称</p>\n<p>【项目名称】：任务组作用的项目，该项为非必选项，如果不选择，则整个系统所有项目均可使用该任务组。</p>\n<p>【资源容量】：允许任务实例并发的最大数量</p>\n<h4 id=\"查看任务组队列\">查看任务组队列</h4>\n<p><img src=\"/img/new_ui/dev/resource/view-queue.png\" alt=\"view-queue\"></p>\n<p>点击按钮查看任务组使用信息</p>\n<p><img src=\"/img/new_ui/dev/resource/view-groupQueue.png\" alt=\"view-queue\"></p>\n<h4 id=\"任务组的使用\">任务组的使用</h4>\n<p>注：任务组的使用适用于由 worker 执行的任务，例如【switch】节点、【condition】节点、【sub_process】等由 master 负责执行的节点类型不受任务组控制。</p>\n<p>我们以 shell 节点为例：</p>\n<p><img src=\"/img/new_ui/dev/resource/use-queue.png\" alt=\"use-queue\"></p>\n<p>关于任务组的配置，您需要做的只需要配置红色框内的部分，其中：</p>\n<p>【任务组名称】：任务组配置页面显示的任务组名称，这里只能看到该项目有权限的任务组（新建任务组时选择了该项目），或作用在全局的任务组（新建任务组时没有选择项目）</p>\n<p>【组内优先级】：在出现等待资源时，优先级高的任务会最先被 master 分发给 worker 执行，该部分数值越大，优先级越高。</p>\n<h3 id=\"任务组的实现逻辑\">任务组的实现逻辑</h3>\n<h4 id=\"获取任务组资源：\">获取任务组资源：</h4>\n<p>Master 在分发任务时判断该任务是否配置了任务组，如果任务没有配置，则正常抛给 worker 运行；如果配置了任务组，在抛给 worker 执行之前检查任务组资源池剩余大小是否满足当前任务运行，如果满足资源池 -1，继续运行；如果不满足则退出任务分发，等待其他任务结束唤醒。</p>\n<h4 id=\"释放与唤醒：\">释放与唤醒：</h4>\n<p>当获取到任务组资源的任务结束运行后，会释放任务组资源，释放后会检查当前任务组是否有任务等待，如果有则标记优先级最好的任务可以运行，并新建一个可以执行的event。该event中存储着被标记可以获取资源的任务id，随后在获取任务组资源然后运行。</p>\n<h4 id=\"任务组流程图\">任务组流程图</h4>\n<p><img src=\"/img/task_group_process.png\" alt=\"task_group\"></p>\n",
  "location": [
    "功能介绍",
    "资源中心",
    "任务组管理"
  ],
  "time": "2023-12-25",
  "structure": [
    {
      "title": "任务组配置",
      "children": [
        {
          "title": "新建任务组",
          "children": [],
          "anchor": "新建任务组"
        },
        {
          "title": "查看任务组队列",
          "children": [],
          "anchor": "查看任务组队列"
        },
        {
          "title": "任务组的使用",
          "children": [],
          "anchor": "任务组的使用"
        },
        {
          "title": "获取任务组资源：",
          "children": [],
          "anchor": "获取任务组资源："
        },
        {
          "title": "释放与唤醒：",
          "children": [],
          "anchor": "释放与唤醒："
        },
        {
          "title": "任务组流程图",
          "children": [],
          "anchor": "任务组流程图"
        }
      ],
      "anchor": "任务组配置"
    },
    {
      "title": "任务组的实现逻辑",
      "children": [
        {
          "title": "新建任务组",
          "children": [],
          "anchor": "新建任务组"
        },
        {
          "title": "查看任务组队列",
          "children": [],
          "anchor": "查看任务组队列"
        },
        {
          "title": "任务组的使用",
          "children": [],
          "anchor": "任务组的使用"
        },
        {
          "title": "获取任务组资源：",
          "children": [],
          "anchor": "获取任务组资源："
        },
        {
          "title": "释放与唤醒：",
          "children": [],
          "anchor": "释放与唤醒："
        },
        {
          "title": "任务组流程图",
          "children": [],
          "anchor": "任务组流程图"
        }
      ],
      "anchor": "任务组的实现逻辑"
    }
  ],
  "title": "任务组管理",
  "link": "/guide/resource/task-group"
}