{
  "__html": "<h1 id=\"介绍\">介绍</h1>\n<p>这个插件将使用 JDBC 作为注册中心。将使用与 api-server 的 yaml 默认的 DolphinScheduler 相同的数据库配置。</p>\n<h1 id=\"如何使用\">如何使用</h1>\n<ol>\n<li>初始化数据库</li>\n</ol>\n<ul>\n<li>\n<p>如果你使用 MySQL，你可以直接执行 SQL 脚本 <code>src/main/resources/mysql_registry_init.sql</code>.</p>\n</li>\n<li>\n<p>如果你使用 PostgreSQL，你可以直接执行 SQL 脚本 <code>src/main/resources/postgresql_registry_init.sql</code>.</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li>修改配置</li>\n</ol>\n<p>需要在 master/worker/api 的 application.yml 中设置属性</p>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">registry:</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">jdbc</span>\n</code></pre>\n<p>完成这两步后，你就可以启动你的 DolphinScheduler 集群了，你的集群将使用 MySQL 作为注册中心来存储服务器元数据。</p>\n<p>注意: 如果您使用mysql数据库，您需要将 <code>mysql-connector-java.jar</code> 添加到 DS 的类路径中，因为这个插件不会在发行版中捆绑此驱动程序。</p>\n<h2 id=\"可选配置\">可选配置</h2>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">registry:</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">jdbc</span>\n  <span class=\"hljs-comment\"># Used to schedule refresh the heartbeat.</span>\n  <span class=\"hljs-attr\">heartbeat-refresh-interval:</span> <span class=\"hljs-string\">3s</span>\n  <span class=\"hljs-comment\"># Once the client&#x27;s heartbeat is not refresh in this time, the server will consider the client is offline.</span>\n  <span class=\"hljs-attr\">session-timeout:</span> <span class=\"hljs-string\">60s</span>\n</code></pre>\n<h2 id=\"为-worker-配置数据源\">为 worker 配置数据源</h2>\n<p>由于Worker服务默认不包含数据源，因此你需要在 worker 的 application.yml 中为注册中心设置数据源属性</p>\n<h3 id=\"使用-mysql-作为注册中心\">使用 MySQL 作为注册中心</h3>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">registry:</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">jdbc</span>\n  <span class=\"hljs-attr\">heartbeat-refresh-interval:</span> <span class=\"hljs-string\">3s</span>\n  <span class=\"hljs-attr\">session-timeout:</span> <span class=\"hljs-string\">60s</span>\n  <span class=\"hljs-attr\">hikari-config:</span>\n    <span class=\"hljs-attr\">jdbc-url:</span> <span class=\"hljs-string\">jdbc:mysql://127.0.0.1:3306/dolphinscheduler</span>\n    <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">root</span>\n    <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">root</span>\n    <span class=\"hljs-attr\">maximum-pool-size:</span> <span class=\"hljs-number\">5</span>\n    <span class=\"hljs-attr\">connection-timeout:</span> <span class=\"hljs-number\">9000</span>\n    <span class=\"hljs-attr\">idle-timeout:</span> <span class=\"hljs-number\">600000</span>\n</code></pre>\n<h3 id=\"使用-postgresql-作为注册中心\">使用 PostgreSQL 作为注册中心</h3>\n<pre><code class=\"language-yaml\"><span class=\"hljs-attr\">registry:</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">jdbc</span>\n  <span class=\"hljs-attr\">heartbeat-refresh-interval:</span> <span class=\"hljs-string\">3s</span>\n  <span class=\"hljs-attr\">session-timeout:</span> <span class=\"hljs-string\">60s</span>\n  <span class=\"hljs-attr\">hikari-config:</span>\n    <span class=\"hljs-attr\">jdbc-url:</span> <span class=\"hljs-string\">jdbc:postgresql://localhost:5432/dolphinscheduler</span>\n    <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">root</span>\n    <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">root</span>\n    <span class=\"hljs-attr\">maximum-pool-size:</span> <span class=\"hljs-number\">5</span>\n    <span class=\"hljs-attr\">connection-timeout:</span> <span class=\"hljs-number\">9000</span>\n    <span class=\"hljs-attr\">idle-timeout:</span> <span class=\"hljs-number\">600000</span>\n</code></pre>\n",
  "location": [
    "部署指南",
    "注册中心插件",
    "JDBC"
  ],
  "structure": [
    {
      "title": "可选配置",
      "children": [
        {
          "title": "使用 MySQL 作为注册中心",
          "children": [],
          "anchor": "使用-mysql-作为注册中心"
        },
        {
          "title": "使用 PostgreSQL 作为注册中心",
          "children": [],
          "anchor": "使用-postgresql-作为注册中心"
        }
      ],
      "anchor": "可选配置"
    },
    {
      "title": "为 worker 配置数据源",
      "children": [
        {
          "title": "使用 MySQL 作为注册中心",
          "children": [],
          "anchor": "使用-mysql-作为注册中心"
        },
        {
          "title": "使用 PostgreSQL 作为注册中心",
          "children": [],
          "anchor": "使用-postgresql-作为注册中心"
        }
      ],
      "anchor": "为-worker-配置数据源"
    }
  ],
  "title": "介绍",
  "link": "/guide/installation/registry-plugins/jdbc"
}