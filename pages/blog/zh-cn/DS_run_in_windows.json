{
  "__html": "<h1>DolphinScheduler 在 Windows 本地搭建开发环境，源码启动</h1>\n<p>如果您对本地开发的视频教程感兴趣的话，也可以跟着视频来一步一步操作:\n<a href=\"https://www.bilibili.com/video/BV1hf4y1b7sX\"><img src=\"/img/build_dev_video.png\" alt=\" DolphinScheduler 本地开发搭建 \"></a></p>\n<ol>\n<li>\n<h2>下载源码</h2>\n<p>官网 ：https://dolphinscheduler.apache.org/zh-cn</p>\n<p>地址 ：https://github.com/apache/dolphinscheduler.git</p>\n<p>这里选用 1.3.6-release 分支。</p>\n</li>\n<li>\n<h2>windows 安装 zk</h2>\n<ol>\n<li>\n<p>下载 zk https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.6.3/apache-zookeeper-3.6.3-bin.tar.gz</p>\n</li>\n<li>\n<p>解压 apache-zookeeper-3.6.3-bin.tar.gz</p>\n</li>\n<li>\n<p>在 zk 的目录下新建 data、log 文件夹</p>\n</li>\n<li>\n<p>将 conf 目录下的 zoo_sample.cfg 文件，复制一份，重命名为 zoo.cfg，修改其中数据和日志的配置，如：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-attr\">dataDir</span>=<span class=\"hljs-string\">D:\\\\code\\\\apache-zookeeper-3.6.3-bin\\\\data</span>\n<span class=\"hljs-attr\">dataLogDir</span>=<span class=\"hljs-string\">D:\\\\code\\\\apache-zookeeper-3.6.3-bin\\\\log</span>\n</code></pre>\n</li>\n<li>\n<p>在 bin 中运行 zkServer.cmd，然后运行 zkCli.cmd 查看 zk 运行状态，可以查看 zk 节点信息即代表安装成功。</p>\n</li>\n</ol>\n</li>\n<li>\n<h2>搭建后端环境</h2>\n<ol>\n<li>\n<p>新建一个自我调试的 mysql 库，库名可为 ：dolphinschedulerKou</p>\n</li>\n<li>\n<p>把代码导入 idea，修改根项目中 pom.xml，将 mysql-connector-java 依赖的 scope 修改为 compile</p>\n</li>\n<li>\n<p>修改 dolphinscheduler-dao 模块的 datasource.properties</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># mysql</span>\n<span class=\"hljs-attr\">spring.datasource.driver-class-name</span>=<span class=\"hljs-string\">com.mysql.jdbc.Driver</span>\n<span class=\"hljs-attr\">spring.datasource.url</span>=<span class=\"hljs-string\">jdbc:mysql://192.168.2.227:3306/dolphinschedulerKou?useUnicode=true&amp;characterEncoding=UTF-8</span>\n<span class=\"hljs-attr\">spring.datasource.username</span>=<span class=\"hljs-string\">root</span>\n<span class=\"hljs-attr\">spring.datasource.password</span>=<span class=\"hljs-string\">Dm!23456</span>\n</code></pre>\n</li>\n<li>\n<p>刷新 dao 模块，运行 org.apache.dolphinscheduler.dao.upgrade.shell.CreateDolphinScheduler 的 main 方法，自动插入项目所需的表和数据</p>\n</li>\n<li>\n<p>修改 dolphinscheduler-service 模块的 zookeeper.properties</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-attr\">zookeeper.quorum</span>=<span class=\"hljs-string\">localhost:2181</span>\n</code></pre>\n</li>\n<li>\n<p>在 logback-worker.xml、logback-master.xml、logback-api.xml 中添加控制台输出</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">root</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;INFO&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;STDOUT&quot;</span>/&gt;</span>  <span class=\"hljs-comment\">&lt;!-- 添加控制台输出 --&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;APILOGFILE&quot;</span>/&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;SKYWALKING-LOG&quot;</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">root</span>&gt;</span>\n</code></pre>\n</li>\n<li>\n<p>启动 MasterServer，执行 org.apache.dolphinscheduler.server.master.MasterServer 的 main 方法，需要设置 VM Options:</p>\n<pre><code>-Dlogging.config=classpath:logback-master.xml -Ddruid.mysql.usePingMethod=false\n</code></pre>\n</li>\n<li>\n<p>启动 WorkerServer，执行 org.apache.dolphinscheduler.server.worker.WorkerServer 的 main 方法，需要设置 VM Options:</p>\n<pre><code>-Dlogging.config=classpath:logback-worker.xml -Ddruid.mysql.usePingMethod=false\n</code></pre>\n</li>\n<li>\n<p>启动 ApiApplicationServer，执行 org.apache.dolphinscheduler.api.ApiApplicationServer 的 main 方法，需要设置 VM Options:</p>\n<pre><code>-Dlogging.config=classpath:logback-api.xml -Dspring.profiles.active=api\n</code></pre>\n</li>\n<li>\n<p>如果需要用到日志功能，执行 org.apache.dolphinscheduler.server.log.LoggerServer 的 main 方法。</p>\n</li>\n<li>\n<p>后端 swagger 地址 ：http://localhost:12345/dolphinscheduler/doc.html?language=zh_CN&amp;lang=cn</p>\n</li>\n</ol>\n</li>\n<li>\n<h2>搭建前端环境</h2>\n<ol>\n<li>\n<p>本机安装 node（不再赘述）</p>\n</li>\n<li>\n<p>进入 dolphinscheduler-ui，运行</p>\n<pre><code class=\"language-shell\">npm install\nnpm run start\n</code></pre>\n</li>\n<li>\n<p>访问 <a href=\"http://localhost:8888/\">http://localhost:8888</a></p>\n</li>\n<li>\n<p>登录管理员账号</p>\n<blockquote>\n<p>用户：admin</p>\n<p>密码：dolphinscheduler123</p>\n</blockquote>\n</li>\n</ol>\n</li>\n</ol>\n",
  "time": "2021-07-05",
  "author": "寇文皓",
  "title": "DolphinScheduler在Windows环境启动源码",
  "type": "tech",
  "label": "技术详解"
}