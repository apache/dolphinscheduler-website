{
  "__html": "<p>```yaml\ntitle: Apache DolphinScheduler 重磅发布3.2.0版本！\nkeywords: Apache DolphinScheduler, 版本发布, 技术动态\ndescription: 首度公开！Apache DolphinScheduler 3.2.0 全新功能与优化汇总。\n为您带来更加完善的功能体验与系统稳定性。</p>\n<pre><code>\n![file](/img/2023-10-17/0.png)\n\n今天，Apache DolphinScheduler 3.2.0 版本在万众期待中终于发布了！在之前的预告中，包括[《重磅预告！Apache DolphinScheduler 3.2.0 新功能“剧透”》](http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247518178&amp;idx=1&amp;sn=59584d01ad5c4661ebe98a40d0a4c00c&amp;chksm=9fe6b0d9a89139cff462faa14fa4c47d03ea19ae89f5b982bf41cbd9d6fcb4ba3c73980f6e65&amp;scene=21#wechat_redirect)、[《3.2.0 版本预告！Apache DolphinScheduler API 增强相关功能》](http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247519378&amp;idx=1&amp;sn=831802da114034a476c9d015bb3021fb&amp;chksm=9fe6bba9a89132bfe8fa00a4d76786f339957c242a2afc361cdd4dd816d706019d24203d531b&amp;scene=21#wechat_redirect)、[《3.2.0 版本预告！远程日志解决 Worker 故障获取不到日志的问题》](http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247519520&amp;idx=1&amp;sn=cdfd1226e84cd7f48fc00569aed844c8&amp;chksm=9fe6ba1ba891330d35869acdefb44e350b7c392e455d4b3d52c53f81765fd43229d207d29f5f&amp;scene=21#wechat_redirect)，以及《[3.2.0 终极预告！云原生支持新增 Spark on k8S 支持》](https://mp.weixin.qq.com/s/QT9wUT42M2HRhlFwMVvp2g)文章汇总已经大致覆盖了 3.2.0 版本的全新功能和优化。\n\n现在，来看看新版本的全新“样貌”吧！\n\nRelease Note: https://github.com/apache/dolphinscheduler/releases/tag/3.2.0\n\n下载地址： https://dolphinscheduler.apache.org/en-us/download/3.2.0\n\n**主要更新包括：**\n\n&gt; - 添加默认租户\n&gt; - 新增多种数据源\n&gt; - 新增任务类型\n&gt; - 重跑任务时指定工作流向前、向后运行\n&gt; - 增加远程日志功能\n&gt; - 参数优化\n&gt; - 资源中心\n&gt; - 增强页面易用性\n&gt; - 云原生支持新增 Spark on k8S 支持\n&gt; - 增加了部分 Restful API\n&gt; - 注册中心增加 ETCD、JDBC 注册中心\n&gt; - 架构优化\n\n# 添加默认租户\n\n在之前的版本中，用户部署完毕后必须手动添加租户。3.2.0 版本中添加了默认租户，方便用户更直接地使用 Apache DolphinScheduler。\n\n# 新增多种数据源\n\n新增了多个数据源，如 Snowflake、Databend、Kyuubi、Doris、OceanBase、Dameng、AzureSQL、StarRocks、AWS Athena、，并且更新了部分数据源，如 Redshift 增加 Access key。\n\n![file](/img/2023-10-17/1.png)\n\n# 新增任务类型\n\n新增了多个任务类型，包括：\n\n- &gt; - 通用模块中，增加 Remote-shell组件、Java Task\n  &gt; \n  &gt; - Cloud 模块中，新增 Amazon DMS、Azure Datafactory、AWS Database Migration，增强与各种云的互联互通\n  &gt; \n  &gt; - 机器学习模块中，新增 Kubeflow组件（基于云原生构建的机器学习任务工具大合集）\n  &gt; \n  &gt; - 其他模块中，增加 AmazonDatasync、Apache Linkis\n\n![file](/img/2023-10-17/2.png)\n\n![file](/img/2023-10-17/3.png)\n\n![file](/img/2023-10-17/4.png)\n\n![file](/img/2023-10-17/5.png)\n\n并更新了部分任务，如 DataX 支持 Presto，http任务增加output 参数传递，运行批量同时 kill 多个 Yarn 任务：\n\n![file](/img/2023-10-17/6.png)\n\nDependent 支持依赖自己：\n\n![file](/img/2023-10-17/7.png)\n\n支持了 Zeppelin 鉴权；\n\n此外，任务现在可以支持缓存；\n\n![file](/img/2023-10-17/8.png)\n\nSqoop 日志支持隐藏密码；\n\n以及 SQL 任务支持默认切割符：\n\n![file](/img/2023-10-17/9.png)\n\n# 新增远程日志功能\n\n3.2.0 版本增加了远程日志功能，并同时支持了 Google Cloud Storage、Amazon S3、阿里云 OSS 日志存储，用户可以通过编辑配置文件，把日志存储到云端，解决万一意外情况发生，Woker 日志不存在，用户无法查看日志的问题。\n\n![file](/img/2023-10-17/10.png)\n\n详情参加[《3.2.0 版本预告！远程日志解决 Worker 故障获取不到日志的问题》](https://mp.weixin.qq.com/s/6HTN3XsZi79BcWYvupOuJg)。\n\n# 参数优化\n\n&gt; - 增加了项目级别参数\n&gt; - 调整参数优先级，启动参数最高\n&gt; - 增加了内置参数计算规则\n\n![file](/img/2023-10-17/11.png)\n\n- 增加了文件类型的参数\n\n![file](/img/2023-10-17/12.png)\n\n# 云原生相关\n\n- 支持 KEDA 做 worker 自动扩缩容\n- 支持 Terraform 部署到 AWS\n- zk 和 pg 支持多架构\n- 提交 Spark 任务到 Kubernetes（详情见[《3.2.0 终极预告！云原生支持新增 Spark on k8S 支持》](https://mp.weixin.qq.com/s/QT9wUT42M2HRhlFwMVvp2g)）\n- 获取 pod 实时日志\n- 自定义 k8s 任务标签\n\n# 资源中心\n\n增加了 Alibaba Cloud OSS 、Huawei Cloud OBS、Azure Blob Storage的支持，重构资源中心并设计默认使用本地作为存储介质，重新支持了 re-upload。\n\n![file](/img/2023-10-17/13.png)\n\n资源中心容许覆盖上传，优化文件路径，显示文件的全部路径。另外，之前版本中资源中心已经上传的同类型文件只能删除后重新上传，新版本中对本功能进行了优化，可以点击上传按钮进行上传。\n\n![file](/img/2023-10-17/14.png)\n\n支持 reupload 文件\n\n# API 增强\n\n3.2.0 版本中，增加了部分 Restful API，包括 taskInstance、workflow state、workflowInstance、workflow and schedule、task relation，且API 触发工作流运行可以获得 instance ID，从而使得 Apache DolphinScheduler 的 API 能力得到显著增强。\n\n详情参见：《[3.2.0 版本预告！Apache DolphinScheduler API 增强相关功能](https://mp.weixin.qq.com/s/zQ7eaqXMQbvH6W3clVT5Vw)》\n\n# 增加页面易用性\n\n3.2.0 增加了页面易用性和便利性，如增加 workflow instance 跳转到当前工作流、复制工作流名称、调整列宽等操作。\n\n![file](/img/2023-10-17/15.png)\n\n跳转到工作流实例\n\n![file](/img/2023-10-17/16.png)\n\n复制工作流名称\n\n![file](/img/2023-10-17/17.png)\n\n调整列表名称宽度\n\n默认情况下会有 default 租户和本地资源中心，安装后就能使用。\n\n![file](/img/2023-10-17/18.png)\n\n默认租户\n\n允许在 workflow instance 中重新运行任务，任务运行日志更加明确。\n\n![file](/img/2023-10-17/19.png)\n\n可以重新运行任务  \njson 导出可阅读性加强。\n\n![file](/img/2023-10-17/20.png)\n\n# 注册中心\n\n增加了 ETCD、JDBC 注册中心。\n\n# 架构\n\n- Alert 支持 HA\n- 单线程更新 Kerberos\n- Worker server 移除了 dao 依赖\n- 接管 task instance 失败的任务\n- 增加动态任务组配置\n- 重构了逻辑任务和远程命令\n- 资源限制（cpu 内存）从原来绝对值改成百分比\n- 支持了 SSO\n\n其中，支持了 SSO 后，用户可以通过 Casdoor 实现 SSO 登录。Casdoor 是基于 OAuth 2.0、OIDC、SAML 和 CAS 的面向 UI 的身份访问管理（IAM）/单点登录（SSO）平台，需要先部署 Casdoor 并获取 \\`Client ID\\` 和 \\`Client secret\\` 两个字段，再修改 dolphinscheduler-api/src/main/resources/application.yaml 文件配置 SSO。\n\n可以通过以下步骤通过 Casdoor 为 Apache Dolphinscheduler 添加 SSO 功能：\n\n</code></pre>\n<p>security:\n  authentication:\n    # Authentication types (supported types: PASSWORD,LDAP,CASDOOR_SSO)\n    type: CASDOOR_SSO\ncasdoor:\n  # Your Casdoor server url\n  endpoint:\n  client-id:\n  client-secret:\n  # The certificate may be multi-line, you can use <code>|-</code> for ease\n  certificate: \n  # Your organization name added in Casdoor\n  organization-name:\n  # Your application name added in Casdoor\n  application-name:\n  # Doplhinscheduler login url\n  redirect-url: http://localhost:5173/login</p>\n<pre><code>\n# 贡献者列表\n\n感谢@zhongjiajie对此次发版的指导，以及下列贡献者的支持：\n\n&gt; 106umao, Abingcbc, AliceXiaoLu, BongBongBang, CallMeKingsley97, Chris-Arith, DarkAssassinator, EricGao888, EricPyZhou, FlechazoW, Gallardot, GavinGYM, IT-Kwj, LiXuemin, LucasClt, Mukvin, NoSuchField, Orange-Summer, QuantumXiecao, Radeity, Rianico, SYSU-Coder, SbloodyS, Tianqi-Dotes, TyrantLucifer, ZhongJinHacker, Zzih, ahuljh, alei1206, alextinng, amaoisnb, arlendp, baihongbin, bmk15897, boy-xiaozhang, c3Vu, caishunfeng, calvinjiang, darrkz, davidzollo, dddyszy, devosend, ediconss, eye-gu, fengjian1129, fuchanghai, guowei-su, haibingtown, hantmac, hdygxsj, hezean, hiSandog, hoey94, hstdream, huage1994, imizao, insist777, iuhoay, jackfanwan, jbampton, jieguangzhou, kezhenxu94, kingbabingge, labbomb, lenian, ly109974, lynn-illumio, moonkop, muggleChen, pandong2011, pppppjcc, qianli2022, qindongliang, qingwli, rickchengx, ruanwenjun, sandiegoe, seedscoder, shangeyao, shenyun, simsicon, sketchmind, stalary, tracehh, whhe, xdu-chenrj, xiaomin0322, xinxingi, xuchunlai, xxjingcd, yeahhhz, youzipi, zhangfane, zhangkuantian, zhaohehuhu,zhoufanglu, zhuangchong, zhutong6688, zhuxt2015, zzzhangqi\n</code></pre>\n",
  "time": "2023-10-17",
  "author": "Niko Zeng",
  "title": "Apache DolphinScheduler 重磅发布3.2.0版本！",
  "type": "release",
  "label": "版本发布"
}