{
  "__html": "<h2>---\ntitle: Apache DolphinScheduler 重磅发布3.2.0版本！\nkeywords: Apache DolphinScheduler, 版本发布, 技术动态\ndescription: 首度公开！Apache DolphinScheduler 3.2.0 全新功能与优化汇总。\n为您带来更加完善的功能体验与系统稳定性。</h2>\n<p><img src=\"/img/2023-10-17/0.png\" alt=\"file\"></p>\n<p>今天，Apache DolphinScheduler 3.2.0 版本在万众期待中终于发布了！在之前的预告中，包括<a href=\"http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247518178&amp;idx=1&amp;sn=59584d01ad5c4661ebe98a40d0a4c00c&amp;chksm=9fe6b0d9a89139cff462faa14fa4c47d03ea19ae89f5b982bf41cbd9d6fcb4ba3c73980f6e65&amp;scene=21#wechat_redirect\">《重磅预告！Apache DolphinScheduler 3.2.0 新功能“剧透”》</a>、<a href=\"http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247519378&amp;idx=1&amp;sn=831802da114034a476c9d015bb3021fb&amp;chksm=9fe6bba9a89132bfe8fa00a4d76786f339957c242a2afc361cdd4dd816d706019d24203d531b&amp;scene=21#wechat_redirect\">《3.2.0 版本预告！Apache DolphinScheduler API 增强相关功能》</a>、<a href=\"http://mp.weixin.qq.com/s?__biz=MzA4NDYxNTc2NA==&amp;mid=2247519520&amp;idx=1&amp;sn=cdfd1226e84cd7f48fc00569aed844c8&amp;chksm=9fe6ba1ba891330d35869acdefb44e350b7c392e455d4b3d52c53f81765fd43229d207d29f5f&amp;scene=21#wechat_redirect\">《3.2.0 版本预告！远程日志解决 Worker 故障获取不到日志的问题》</a>，以及《<a href=\"https://mp.weixin.qq.com/s/QT9wUT42M2HRhlFwMVvp2g\">3.2.0 终极预告！云原生支持新增 Spark on k8S 支持》</a>文章汇总已经大致覆盖了 3.2.0 版本的全新功能和优化。</p>\n<p>现在，来看看新版本的全新“样貌”吧！</p>\n<p>Release Note: https://github.com/apache/dolphinscheduler/releases/tag/3.2.0</p>\n<p>下载地址： https://dolphinscheduler.apache.org/en-us/download/3.2.0</p>\n<p><strong>主要更新包括：</strong></p>\n<blockquote>\n<ul>\n<li>添加默认租户</li>\n<li>新增多种数据源</li>\n<li>新增任务类型</li>\n<li>重跑任务时指定工作流向前、向后运行</li>\n<li>增加远程日志功能</li>\n<li>参数优化</li>\n<li>资源中心</li>\n<li>增强页面易用性</li>\n<li>云原生支持新增 Spark on k8S 支持</li>\n<li>增加了部分 Restful API</li>\n<li>注册中心增加 ETCD、JDBC 注册中心</li>\n<li>架构优化</li>\n</ul>\n</blockquote>\n<h1>添加默认租户</h1>\n<p>在之前的版本中，用户部署完毕后必须手动添加租户。3.2.0 版本中添加了默认租户，方便用户更直接地使用 Apache DolphinScheduler。</p>\n<h1>新增多种数据源</h1>\n<p>新增了多个数据源，如 Snowflake、Databend、Kyuubi、Doris、OceanBase、Dameng、AzureSQL、StarRocks、AWS Athena、，并且更新了部分数据源，如 Redshift 增加 Access key。</p>\n<p><img src=\"/img/2023-10-17/1.png\" alt=\"file\"></p>\n<h1>新增任务类型</h1>\n<p>新增了多个任务类型，包括：</p>\n<ul>\n<li>\n<blockquote>\n<ul>\n<li>\n<p>通用模块中，增加 Remote-shell组件、Java Task</p>\n</li>\n<li>\n<p>Cloud 模块中，新增 Amazon DMS、Azure Datafactory、AWS Database Migration，增强与各种云的互联互通</p>\n</li>\n<li>\n<p>机器学习模块中，新增 Kubeflow组件（基于云原生构建的机器学习任务工具大合集）</p>\n</li>\n<li>\n<p>其他模块中，增加 AmazonDatasync、Apache Linkis</p>\n</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<p><img src=\"/img/2023-10-17/2.png\" alt=\"file\"></p>\n<p><img src=\"/img/2023-10-17/3.png\" alt=\"file\"></p>\n<p><img src=\"/img/2023-10-17/4.png\" alt=\"file\"></p>\n<p><img src=\"/img/2023-10-17/5.png\" alt=\"file\"></p>\n<p>并更新了部分任务，如 DataX 支持 Presto，http任务增加output 参数传递，运行批量同时 kill 多个 Yarn 任务：</p>\n<p><img src=\"/img/2023-10-17/6.png\" alt=\"file\"></p>\n<p>Dependent 支持依赖自己：</p>\n<p><img src=\"/img/2023-10-17/7.png\" alt=\"file\"></p>\n<p>支持了 Zeppelin 鉴权；</p>\n<p>此外，任务现在可以支持缓存；</p>\n<p><img src=\"/img/2023-10-17/8.png\" alt=\"file\"></p>\n<p>Sqoop 日志支持隐藏密码；</p>\n<p>以及 SQL 任务支持默认切割符：</p>\n<p><img src=\"/img/2023-10-17/9.png\" alt=\"file\"></p>\n<h1>新增远程日志功能</h1>\n<p>3.2.0 版本增加了远程日志功能，并同时支持了 Google Cloud Storage、Amazon S3、阿里云 OSS 日志存储，用户可以通过编辑配置文件，把日志存储到云端，解决万一意外情况发生，Woker 日志不存在，用户无法查看日志的问题。</p>\n<p><img src=\"/img/2023-10-17/10.png\" alt=\"file\"></p>\n<p>详情参加<a href=\"https://mp.weixin.qq.com/s/6HTN3XsZi79BcWYvupOuJg\">《3.2.0 版本预告！远程日志解决 Worker 故障获取不到日志的问题》</a>。</p>\n<h1>参数优化</h1>\n<blockquote>\n<ul>\n<li>增加了项目级别参数</li>\n<li>调整参数优先级，启动参数最高</li>\n<li>增加了内置参数计算规则</li>\n</ul>\n</blockquote>\n<p><img src=\"/img/2023-10-17/11.png\" alt=\"file\"></p>\n<ul>\n<li>增加了文件类型的参数</li>\n</ul>\n<p><img src=\"/img/2023-10-17/12.png\" alt=\"file\"></p>\n<h1>云原生相关</h1>\n<ul>\n<li>支持 KEDA 做 worker 自动扩缩容</li>\n<li>支持 Terraform 部署到 AWS</li>\n<li>zk 和 pg 支持多架构</li>\n<li>提交 Spark 任务到 Kubernetes（详情见<a href=\"https://mp.weixin.qq.com/s/QT9wUT42M2HRhlFwMVvp2g\">《3.2.0 终极预告！云原生支持新增 Spark on k8S 支持》</a>）</li>\n<li>获取 pod 实时日志</li>\n<li>自定义 k8s 任务标签</li>\n</ul>\n<h1>资源中心</h1>\n<p>增加了 Alibaba Cloud OSS 、Huawei Cloud OBS、Azure Blob Storage的支持，重构资源中心并设计默认使用本地作为存储介质，重新支持了 re-upload。</p>\n<p><img src=\"/img/2023-10-17/13.png\" alt=\"file\"></p>\n<p>资源中心容许覆盖上传，优化文件路径，显示文件的全部路径。另外，之前版本中资源中心已经上传的同类型文件只能删除后重新上传，新版本中对本功能进行了优化，可以点击上传按钮进行上传。</p>\n<p><img src=\"/img/2023-10-17/14.png\" alt=\"file\"></p>\n<p>支持 reupload 文件</p>\n<h1>API 增强</h1>\n<p>3.2.0 版本中，增加了部分 Restful API，包括 taskInstance、workflow state、workflowInstance、workflow and schedule、task relation，且API 触发工作流运行可以获得 instance ID，从而使得 Apache DolphinScheduler 的 API 能力得到显著增强。</p>\n<p>详情参见：《<a href=\"https://mp.weixin.qq.com/s/zQ7eaqXMQbvH6W3clVT5Vw\">3.2.0 版本预告！Apache DolphinScheduler API 增强相关功能</a>》</p>\n<h1>增加页面易用性</h1>\n<p>3.2.0 增加了页面易用性和便利性，如增加 workflow instance 跳转到当前工作流、复制工作流名称、调整列宽等操作。</p>\n<p><img src=\"/img/2023-10-17/15.png\" alt=\"file\"></p>\n<p>跳转到工作流实例</p>\n<p><img src=\"/img/2023-10-17/16.png\" alt=\"file\"></p>\n<p>复制工作流名称</p>\n<p><img src=\"/img/2023-10-17/17.png\" alt=\"file\"></p>\n<p>调整列表名称宽度</p>\n<p>默认情况下会有 default 租户和本地资源中心，安装后就能使用。</p>\n<p><img src=\"/img/2023-10-17/18.png\" alt=\"file\"></p>\n<p>默认租户</p>\n<p>允许在 workflow instance 中重新运行任务，任务运行日志更加明确。</p>\n<p><img src=\"/img/2023-10-17/19.png\" alt=\"file\"></p>\n<p>可以重新运行任务<br>\njson 导出可阅读性加强。</p>\n<p><img src=\"/img/2023-10-17/20.png\" alt=\"file\"></p>\n<h1>注册中心</h1>\n<p>增加了 ETCD、JDBC 注册中心。</p>\n<h1>架构</h1>\n<ul>\n<li>Alert 支持 HA</li>\n<li>单线程更新 Kerberos</li>\n<li>Worker server 移除了 dao 依赖</li>\n<li>接管 task instance 失败的任务</li>\n<li>增加动态任务组配置</li>\n<li>重构了逻辑任务和远程命令</li>\n<li>资源限制（cpu 内存）从原来绝对值改成百分比</li>\n<li>支持了 SSO</li>\n</ul>\n<p>其中，支持了 SSO 后，用户可以通过 Casdoor 实现 SSO 登录。Casdoor 是基于 OAuth 2.0、OIDC、SAML 和 CAS 的面向 UI 的身份访问管理（IAM）/单点登录（SSO）平台，需要先部署 Casdoor 并获取 `Client ID` 和 `Client secret` 两个字段，再修改 dolphinscheduler-api/src/main/resources/application.yaml 文件配置 SSO。</p>\n<p>可以通过以下步骤通过 Casdoor 为 Apache Dolphinscheduler 添加 SSO 功能：</p>\n<pre><code>security:\n  authentication:\n    # Authentication types (supported types: PASSWORD,LDAP,CASDOOR_SSO)\n    type: CASDOOR_SSO\ncasdoor:\n  # Your Casdoor server url\n  endpoint:\n  client-id:\n  client-secret:\n  # The certificate may be multi-line, you can use `|-` for ease\n  certificate: \n  # Your organization name added in Casdoor\n  organization-name:\n  # Your application name added in Casdoor\n  application-name:\n  # Doplhinscheduler login url\n  redirect-url: http://localhost:5173/login \n</code></pre>\n<h1>贡献者列表</h1>\n<p>感谢@zhongjiajie对此次发版的指导，以及下列贡献者的支持：</p>\n<blockquote>\n<p>106umao, Abingcbc, AliceXiaoLu, BongBongBang, CallMeKingsley97, Chris-Arith, DarkAssassinator, EricGao888, EricPyZhou, FlechazoW, Gallardot, GavinGYM, IT-Kwj, LiXuemin, LucasClt, Mukvin, NoSuchField, Orange-Summer, QuantumXiecao, Radeity, Rianico, SYSU-Coder, SbloodyS, Tianqi-Dotes, TyrantLucifer, ZhongJinHacker, Zzih, ahuljh, alei1206, alextinng, amaoisnb, arlendp, baihongbin, bmk15897, boy-xiaozhang, c3Vu, caishunfeng, calvinjiang, darrkz, davidzollo, dddyszy, devosend, ediconss, eye-gu, fengjian1129, fuchanghai, guowei-su, haibingtown, hantmac, hdygxsj, hezean, hiSandog, hoey94, hstdream, huage1994, imizao, insist777, iuhoay, jackfanwan, jbampton, jieguangzhou, kezhenxu94, kingbabingge, labbomb, lenian, ly109974, lynn-illumio, moonkop, muggleChen, pandong2011, pppppjcc, qianli2022, qindongliang, qingwli, rickchengx, ruanwenjun, sandiegoe, seedscoder, shangeyao, shenyun, simsicon, sketchmind, stalary, tracehh, whhe, xdu-chenrj, xiaomin0322, xinxingi, xuchunlai, xxjingcd, yeahhhz, youzipi, zhangfane, zhangkuantian, zhaohehuhu,zhoufanglu, zhuangchong, zhutong6688, zhuxt2015, zzzhangqi</p>\n</blockquote>\n",
  "time": "2023-10-17",
  "author": "Niko Zeng",
  "title": "Apache DolphinScheduler 重磅发布3.2.0版本！",
  "type": "release",
  "label": "版本发布"
}